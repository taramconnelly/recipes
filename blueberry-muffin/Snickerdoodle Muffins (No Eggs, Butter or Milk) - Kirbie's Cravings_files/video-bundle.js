!function(){"use strict";var t,e,i={724:function(t,e,i){i.d(e,{Z:function(){return P}});var r=i(145),n=function(t){const e=(0,r.mz)(t.supportedDomRefs),i=(0,r.mz)(t.initState);return Object.seal(e),Object.seal(i),{domRefs:e,state:i,csrOptions:{},promises:[]}};var s=i(277);var a=i(876),o=i(114),l=i(745);const{NW:c,NE:d,SE:h,SW:u,TL_CLASS_PREFIX:p}=o.ZP,m={[c]:function(t,e,i){a.Z.setStyleProperties(t,[["top",i],["right","auto"],["bottom","auto"],["left",e]])},[d]:function(t,e,i){a.Z.setStyleProperties(t,[["top",i],["right",e],["bottom","auto"],["left","auto"]])},[h]:function(t,e,i){a.Z.setStyleProperties(t,[["top","auto"],["right",e],["bottom",i],["left","auto"]])},[u]:function(t,e,i){a.Z.setStyleProperties(t,[["top","auto"],["right","auto"],["bottom",i],["left",e]])}};const g=o.ZP.BUTTONS_DIR+"edaa/",f=g+"OBA_TRANS.png",v={fr:g+"OBA_FRANCE.png",bg:g+"OBA_BULGARIA.png",cs:g+"OBA_CZECH.png",da:g+"OBA_DENMARK.png",fi:g+"OBA_FINLAND.png",de:g+"OBA_GERMANY.png",el:g+"OBA_GREEK.png",hu:g+"OBA_HUNGARY.png",en:g+"OBA_UK.png",it:g+"OBA_ITALY.png",nl:g+"OBA_NETHERLANDS.png",no:g+"OBA_NORWAY.png",pl:g+"OBA_POLAND.png",ro:g+"OBA_ROMANIA.png",sk:g+"OBA_SLOVAKIA.png",es:g+"OBA_SPAIN.png",sv:g+"OBA_SWEDEN.png"};var y=function({creative:t,positionService:e,eventController:i}){let r,n,o,c;return{render:function(e){({domRefs:r,state:n}=e);const p=r.adWrapper.querySelector("."+_);p?(r.adchoices=p,n.isAdChoiceFromTemplate=!0):(r.adchoices=function(){const e=function(){const t=a.Z.setStyleProperties(document.createElement("div"),[["padding","1px"],["display","inline-block"],["background","rgba(204, 204, 204, 0.5)"],["width","initial"],["height","initial"]]);return o=document.createElement("img"),o.className="tl-edaa-icon",o.src=f,c=document.createElement("img"),c.className="tl-edaa-text",c.src=function(){const t=navigator.language.slice(0,2);return v[t]||v.en}(),t.appendChild(o),t.appendChild(c),d(),t}();return e.className=_,a.Z.setStyleProperties(e,[["z-index",(0,l.K)(t,l.T.ADCHOICES)],["position","absolute"],["margin","initial"],["min-height","initial"],["cursor","pointer"]])}(),i.on(s.ql,u),i.on(s.WR,h),i.on(s.jB,d))}};function d(){a.Z.setStyle(o,"display","block"),a.Z.setStyle(c,"display","none")}function h(){a.Z.setStyle(c,"display","block"),a.Z.setStyle(o,"display","none")}function u(){const i=function(){if(!function(t){const i=e.getElDims(t);return i.width*i.height>=I}(r.mainImageCsrEl))return!1;if(t.isAutoplay()&&(n.isEnded||!n.isPlaying))return!1;return!0}()?"inline":"none";a.Z.setStyle(r.adchoices,"display",i)}};const _=o.ZP.TL_CLASS_PREFIX+"adchoices",I=15e3;var A=function({creative:t,eventController:e}){const i=t.getParams();let n,o,c,d,h,u,p,m=null;return{render:function(f){if(p=f,!_())return;o=(0,r.EC)("?"+i.img_server_params),c=parseInt(o.queryKey.minLogoPct,10),d=parseInt(o.queryKey.maxLogoPct,10),n=parseInt(o.queryKey.logo_width,10),h=i.logo_image_url,u=i.logo_width,m=function(){const n=document.createElement("img");return n.className="tl-logo",(0,r.CA)(n),a.Z.setStyleProperties(n,[["z-index",(0,l.K)(t,l.T.NON_VIDEO_LOGO)],["position","absolute"]]),a.Z.setStyle(n,"display","none"),n.onload=()=>{e.publish(s.q3),a.Z.setStyle(n,"display","block")},n.src=i.logo_image_url,n}(),e.on(s.ql,g),p.domRefs.logo=m},_getLogoDims:f};function g(t){if(m&&m.naturalHeight&&t.width&&t.height){const{width:e,height:i}=t,{naturalWidth:s,naturalHeight:a}=m,o=f({imgWidth:e,imgHeight:i,logoAspectRatio:s/a,scaleFactor:C,logoWidth:n,minLogoPct:c,maxLogoPct:d});(0,r.QU)(m,o.width,o.height);const l=(0,r.Cd)(h,o.width,u);(0,r.hv)(m.src,l)||(m.src=l)}}function f({imgWidth:t,imgHeight:e,logoAspectRatio:i,logoWidth:r,minLogoPct:n,maxLogoPct:s,scaleFactor:a}){let o={};if(r)return o.width=r,o.height=r*(1/i),v(o,i,{imgWidth:t,imgHeight:e});if(o.width=t*a,o.height=o.width*(1/i),o.width/t<o.height/e&&(o.height=e*a,o.width=o.height*i),function(t,e){if(isNaN(t)&&isNaN(e))return!1;const i=isNaN(t)?0:t,r=isNaN(e)?100:e;return i<=r&&i>=0&&i<=100&&r>=0&&r<=100}(n,s)){const r=t*e,a=o.width*o.height;a<r*(n/100)?(o.width=Math.sqrt(r*i*(n/100)),o.height=o.width/i):a>r*(s/100)&&(o.width=Math.sqrt(r*i*(s/100)),o.height=o.width/i)}return o=v(o,i,{imgWidth:t,imgHeight:e}),o.width=Math.round(o.width),o.height=Math.round(o.height),o}function v(t,e,{imgWidth:i,imgHeight:r}){const n={...t};return y(n,{imgWidth:i,imgHeight:r})&&(n.width=i*S,n.height=n.width*(1/e),y(n,{imgWidth:i,imgHeight:r})&&(n.height=r*S,n.width=n.height*e)),n}function y({width:t,height:e},{imgWidth:i,imgHeight:r}){return t>i/2||e>r/2}function _(){return i.logo_image_url&&!t.isPharma()&&!t.isVast()}};const C=.25,S=.5;var w=i(696);const M="data:image/svg+xml;base64,PHN2ZyBjbGFzcz0ic3ZnLWlubGluZS0tZmEgZmEtY2hldnJvbi1yaWdodCBmYS13LTEwIiBhcmlhLWhpZGRlbj0idHJ1ZSIgZm9jdXNhYmxlPSJmYWxzZSIgZGF0YS1wcmVmaXg9ImZhcyIgZGF0YS1pY29uPSJjaGV2cm9uLXJpZ2h0IiByb2xlPSJpbWciIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDMyMCA1MTIiIGRhdGEtZmEtaTJzdmc9IiIgc3R5bGU9IndpZHRoOiA4cHg7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgICBsaW5lLWhlaWdodDogMTBweDsKICAgIGZsb2F0OiByaWdodDsiPjxwYXRoIGZpbGw9IiNmZmYiIGQ9Ik0yODUuNDc2IDI3Mi45NzFMOTEuMTMyIDQ2Ny4zMTRjLTkuMzczIDkuMzczLTI0LjU2OSA5LjM3My0zMy45NDEgMGwtMjIuNjY3LTIyLjY2N2MtOS4zNTctOS4zNTctOS4zNzUtMjQuNTIyLS4wNC0zMy45MDFMMTg4LjUwNSAyNTYgMzQuNDg0IDEwMS4yNTVjLTkuMzM1LTkuMzc5LTkuMzE3LTI0LjU0NC4wNC0zMy45MDFsMjIuNjY3LTIyLjY2N2M5LjM3My05LjM3MyAyNC41NjktOS4zNzMgMzMuOTQxIDBMMjg1LjQ3NSAyMzkuMDNjOS4zNzMgOS4zNzIgOS4zNzMgMjQuNTY4LjAwMSAzMy45NDF6Ij48L3BhdGg+PC9zdmc+Cgo=";var E=function({placement:t,creative:e,asyncUtil:i,analytics:n,docInfo:o,eventController:c}){return{render:function({domRefs:r}){if(o=r.ctaMacro,!o&&e.isDemandSideCtaTextOptIn()){const o=function(i){const r=document.createElement("div");return r.className=t.invCode+"_sponsor_tag",r.innerText=i,r.appendChild(function(){const e=document.createElement("span");let i=document.createElement("img");return i.className=t.invCode+"_sponsor_tag_arrow",i.src=M,i=a.Z.setStyleProperties(i,[["width","8px"],["max-width","100%"],["line-height","15px"],["float","right"],["margin-top","3px"]]),e.appendChild(i),e}()),a.Z.setStyleProperties(r,[["display","block"],["font-family","'Open Sans', sans-serif"],["font-size","12px"],["font-weight","normal"],["font-style","normal"],["color","#fff"],["text-transform","none"],["letter-spacing","normal"],["text-decoration","none"],["text-align","left"],["padding","5px"],["background","rgba(40,103,178,.7)"],["width","100%"],["z-index",(0,l.K)(e,l.T.CTA_OVERLAY)],["float","left"],["position","relative"],["box-sizing","border-box"],["pointer-events","all"],["cursor","pointer"]])}(e.getParams().cta);i.listen(o,"click",(()=>{n.fireEEE("click_cta")})),r.mainImageCsrEl?c.on(s.ql,(t=>{t.height&&d(r)})):d(r),r.ctaOverlay=o}var o}};function d(t){const e=t.adWrapper.clientHeight;(0,r.ZM)(t.ctaElList).forEach((e=>{(0,r.l)(e),t.ctaElList.pop()}));const i=e-t.adWrapper.clientHeight;i&&function(t,e){if(o.canAccessTop){if(o.window.frameElement){const{frameElement:e}=o.window,i=a.Z.getPropertyValue(e,"height"),r=parseInt(i,10);r&&a.Z.setStyle(e,"height",r-t+"px")}}else{const i=a.Z.getPropertyValue(e,"top"),r=(parseInt(i,10)||0)+t/2;a.Z.setStyle(e,"top",r+"px"),a.Z.setStyle(e,"position","absolute")}}(i,t.adWrapper)}};const T=1,b=2,L=3;var P=function(t,e){const{positionService:i,featureConfigs:s}=e,a={initState:function(){const e=s.reduce(((t,e)=>Object.assign(t,e.initState)),(0,r.mz)(t.initState));return{...D,...e}}(),supportedDomRefs:d("supportedDomRefs",x)},o=n(a),l=d("renderers",R),c=d("eventManagers",N);return{render:function(){t=l,t.forEach((t=>t(e).render(o))),i.setAdContainer(o.domRefs.adWrapperWithDims);var t;const n=(0,r.Xq)(Object.keys(o.domRefs),a.supportedDomRefs);if(n.length>0)throw new w.Z("domRefs invalid. Unmatched keys: "+n.join(", "));return Object.freeze(o.domRefs),h(),Promise.all(o.promises).then((()=>o))},context:o};function d(e,i){return s.reduce(((t,i)=>t.concat(i[e])),t[e]).concat(i)}function h(){c.forEach((t=>new t(e).init(o)))}};const D={isAdChoiceFromTemplate:!1,isBackgroundImage:!1,imageBoxingOffsetX:0,imageBoxingOffsetY:0,logoOffsetX:0,logoOffsetY:0,visibleImageWidth:0,visibleImageHeight:0},x=["adchoices","adWrapper","adWrapperWithDims","logo","mainClickTarget","mainImage","mainImageCsrEl","overlayContainer","innerOverlayContainer","ctaOverlay","ctaElList","ctaMacro","templateComponent"],R=[A,y,E,({creative:t,errorHandler:e,asyncUtil:i,eventController:n,cornerElementsConfig:o})=>{let c=null,d=null,g=null,f=null,v=null,y=null;return{render:function(m){c=m,({domRefs:d,state:g}=c),o.domRefs=d,o.state=g;d.mainImageCsrEl?function(){let e;if(f=S(),t.isVast()){if(e=d.video,e.parentElement.appendChild(f),n.on(s.Cn,E),t.isHighImpact()){const e=function(){const e=document.createElement("div");return e.className=p+"progress",d.progressBar=e,a.Z.setStyleProperties(e,[["display","block"],["background-color","rgb(252, 85, 20)"],["height","3px"],["transition","all .3s linear"],["position","relative"],["z-index",(0,l.K)(t,l.T.VIDEO_PROGRESS_BAR)]]),e.style.setProperty("width","0"),e}();_(),f.appendChild(e)}}else e=d.mainImageCsrEl,d.mainImageCsrEl.insertBefore(f,d.mainImageCsrEl.firstElementChild);n.on(s.p0,C),n.on(s.ql,A),d.ctaOverlay&&(v||_(),t.isWindow()||t.isCarousel()?a.Z.setStyle(f,"position","absolute"):a.Z.setStyle(f,"position","relative"),f.appendChild(d.ctaOverlay));I(o.create())}():function(){f=S(),I(o.create()),i.addResizeListener(w),d.mainImage&&d.mainImage.addEventListener("load",M);d.ctaOverlay&&t(d.ctaOverlay);function t(t){a.Z.setStyle(t,"bottom","0px"),a.Z.setStyle(t,"position","absolute"),f.appendChild(t),n.on(s.RU,(()=>{setTimeout((()=>{if(o.insertedLogoCorner.includes("S"))return e.fireError("Cta overlay not rendered because it would cover logo.",e.WARNING),(0,r.l)(d.ctaOverlay),d.ctaOverlay=null,void(o.corners[o.insertedLogoCorner]=null);const{height:i}=t.getBoundingClientRect();o.corners[h]&&a.Z.setStyle(d[o.corners[h]],"bottom",i+"px"),o.corners[u]&&a.Z.setStyle(d[o.corners[u]],"bottom",i+"px")}),0)}))}}();d.overlayContainer=f}};function _(){v=S(),v.className=p+"inner-transparent",a.Z.setStyle(v,"position","relative"),d.innerOverlayContainer=v,f.appendChild(v)}function I(t){try{if(0===t.length)return;const e=v||f;t.forEach((t=>{!function({element:t,corner:e,xOffsetPx:i,yOffsetPx:r},n){n.appendChild(t),a.Z.setStyle(t,"pointer-events","all"),m[e](t,i,r)}(t,e),function(t){t.callback&&t.callback()}(t)}))}catch(t){e.fireError(t,e.ERROR)}}function A(t){var e;t.height&&(y=t,f.offsetHeight&&f.offsetHeight!==(null===(e=d.ctaOverlay)||void 0===e?void 0:e.offsetHeight)||(a.Z.setStyle(f,"width",t.width+"px"),a.Z.setStyle(f,"height",t.height+"px")),d.ctaOverlay&&b(d.ctaOverlay))}function C(t){a.Z.setStyle(f,"top",t.y+"px"),a.Z.setStyle(f,"left",t.x+"px"),y&&(a.Z.setStyle(f,"height",y.height-2*t.y+"px"),a.Z.setStyle(f,"width",y.width-2*t.x+"px"))}function S(){const t=document.createElement("div");return t.className=p+"transparent",a.Z.setStyle(t,"position","absolute"),a.Z.setStyle(t,"pointer-events","none"),t}function w(){T();const t=d.mainImage;t&&t.complete&&M()}function M(){T();const t=d.mainImage.getBoundingClientRect(),e=f.parentElement.getBoundingClientRect(),i=t.top-e.top,r=t.left-e.left;a.Z.setStyle(f,"top",i+"px"),a.Z.setStyle(f,"left",r+"px"),a.Z.setStyle(f,"width",t.width+"px"),a.Z.setStyle(f,"height",t.height+"px")}function E(t){a.Z.setStyle(f,"width",t.width+"px"),a.Z.setStyle(f,"height",t.height+"px"),d.progressBar&&b(d.progressBar)}function T(){if(null===f.parentElement){(function(t){let i=t;const r=a.Z.getPropertyValue(i,"position");["static","","relative"].indexOf(r)<0?i=document.body:a.Z.setStyle(i,"position","relative");i!==t&&e.fireError("Invalid position style set on ad wrapper",e.WARNING);return i})(d.adWrapperWithDims).appendChild(f)}return f.parentElement}function b(t){const e=f.offsetHeight-t.offsetHeight;a.Z.setStyle(v,"height",e+"px")}}],N=[class{constructor({creative:t,eventController:e,asyncUtil:i}){this.creative=t,this.eventController=e,this.asyncUtil=i,this.params=t.getParams(),this.adchoicesUrl=this.params.adchoices_url}init({domRefs:t,state:e}){const i=t.adchoices;this.asyncUtil.listen(i,"click",(()=>this.onClick()),!1,!0),e.isAdChoiceFromTemplate||(this.asyncUtil.listen(i,"mouseenter",(()=>this.eventController.publish(s.WR)),!1,!0),this.asyncUtil.listen(i,"mouseleave",(()=>this.eventController.publish(s.jB)),!1,!0))}onClick(){window.open(this.adchoicesUrl,"popup","width=650,height=316")}},class{constructor({analytics:t,eventController:e,docInfo:i}){this.analytics=t,this.eventController=e,this.docInfo=i,this.ctaRenderMethod=T,this.ctaRenderText=""}init({domRefs:t}){var e;t.ctaOverlay?this._buildOverlayRenderResult(t.ctaOverlay):t.ctaMacro?this._buildTemplateRenderResult(t.ctaMacro,this.docInfo.window):(null===(e=t.ctaElList)||void 0===e?void 0:e.length)>0&&this._buildEmptyMacroRenderResult(t.ctaElList);const{ctaRenderMethod:i,ctaRenderText:r}=this;this.analytics.ctaRenderResult({cta_render_method:i,cta_render_text:r})}_buildTemplateRenderResult(t,e){t&&(0,r.tU)(t,e)&&(this.ctaRenderMethod=b,this.ctaRenderText=t.innerText)}_buildOverlayRenderResult(t){this.ctaRenderMethod=L,this.ctaRenderText=t.innerText}_buildEmptyMacroRenderResult(t){this.ctaRenderMethod=T,this.ctaRenderText=t[0].innerText}}]},973:function(t,e,i){i.d(e,{Z:function(){return n}});var r=i(654);class n{constructor({analytics:t,asyncUtil:e}){this.analytics=t,this.asyncUtil=e}init(t){(0,r.f)(t.domRefs.adWrapperWithDims,(()=>this.mouseover()),this.asyncUtil)}mouseover(){this.analytics.mouseover()}}},849:function(t,e,i){i.d(e,{$m:function(){return a},FU:function(){return A},Jt:function(){return C},ML:function(){return s},Oe:function(){return g},Pw:function(){return o},RU:function(){return n},T4:function(){return y},X8:function(){return m},al:function(){return v},bc:function(){return h},cM:function(){return d},co:function(){return I},fz:function(){return _},kq:function(){return r},ot:function(){return f},qH:function(){return l},qp:function(){return p},tF:function(){return c},xg:function(){return u}});const r="r",n="aop",s="ev",a="evv",o="ev1",l="eev",c="sce",d="pmd",h="pe",u="ctar",p="dr",m={DRM_ADVERTISER:1,DRM_PUBLISHER:2,DRM_DEFAULT:3,DRM_NO_MACRO:4},g="eee",f="ec",v="em",y="ci",_="vpa",I="evd",A="px",C="tpvpx"},314:function(t,e,i){i.d(e,{Fx:function(){return n},WN:function(){return o},Z2:function(){return a},vJ:function(){return s},ws:function(){return r}});const r=23019,n=20230221,s=60003,a=20230613,o=20230703},493:function(t,e,i){i.d(e,{Z:function(){return s}});var r=i(942),n=i(277);class s{constructor({environment:t,bundleStartTime:e},{eventController:i,urlParams:n}){(0,r.Z)(this,"auctionId","none"),(0,r.Z)(this,"formatName","none"),(0,r.Z)(this,"_log",((t,...e)=>{console.log(this._makeLogString(t,e))})),this.environment=t,this.bundleStartTime=e,this.eventController=i,n.debugLog&&this._setupListeners()}_setupListeners(){this.eventController.on(n.sY,this._log),this.eventController.on(n.i2,(t=>{var e,i,r,n,s,a,o;this.auctionId=(null===(e=t.ad)||void 0===e||null===(i=e.ext)||void 0===i||null===(r=i.tlAdditionalData)||void 0===r?void 0:r.aid)||(null===(n=t.settings)||void 0===n||null===(s=n.additional_data)||void 0===s?void 0:s.aid);const l=(null===(a=t.ad)||void 0===a||null===(o=a.ext)||void 0===o?void 0:o.tlFormatId)||t.settings.format_id;this.formatName=this._getFormatName(l)}))}_getFormatName(t){return Object.keys(this.environment.formats).find((e=>this.environment.formats[e]===t))}_makeLogString(t,e){return"["+this.formatName+"]["+this.auctionId+"]["+this._getTimeSinceStartMS()+"ms]["+t+"]"+(e.length>0?JSON.stringify(e):"")}_getTimeSinceStartMS(){return performance.now()-this.bundleStartTime}static warn(t,...e){console.warn("tl: "+(t.stack||t),{...e})}}},277:function(t,e,i){i.d(e,{Cn:function(){return v},E7:function(){return l},GZ:function(){return P},H0:function(){return z},Iq:function(){return W},Ku:function(){return a},Lc:function(){return J},MD:function(){return G},Mz:function(){return X},NH:function(){return o},Nq:function(){return b},Om:function(){return S},P7:function(){return p},PZ:function(){return nt},Q2:function(){return n},RB:function(){return u},RU:function(){return I},S_:function(){return tt},Sn:function(){return m},T5:function(){return F},TZ:function(){return j},Up:function(){return B},VQ:function(){return w},WR:function(){return Q},Wh:function(){return A},XW:function(){return Y},ZY:function(){return D},a8:function(){return g},cF:function(){return $},ck:function(){return M},eP:function(){return V},fh:function(){return d},h7:function(){return L},hs:function(){return it},i2:function(){return rt},jB:function(){return q},jT:function(){return Z},js:function(){return U},kJ:function(){return H},ly:function(){return c},mA:function(){return K},nP:function(){return C},oU:function(){return k},o_:function(){return x},ot:function(){return s},p0:function(){return y},q3:function(){return _},ql:function(){return f},r7:function(){return h},re:function(){return N},rp:function(){return T},sY:function(){return r},sk:function(){return E},tn:function(){return st},wK:function(){return R},yK:function(){return O},z7:function(){return et}});const r="log",n="mute",s="unmute",a="ended",o="play",l="pause",c="complete",d="playerReady",h="vpaidFallback",u="autoplayFallback",p="triggerFallbacks",m="cancelFallbacks",g="csrReady",f="csrUpdate",v="csrVideoDimsUpdate",y="csrOverlayOffsetUpdate",_="forceCsrUpdate",I="adOnPage",A="clickThrough",C="positionUpdate",S="videoStart",w="firstQuartile",M="midpoint",E="thirdQuartile",T="complete",b="vpaid.AdLog",L="vpaid.AdImpression",P="vpaid.AdPlaying",D="vpaid.AdStarted",x="vpaid.AdVideoComplete",R="vpaid.AdVideoFirstQuartile",N="vpaid.AdVideoMidpoint",k="vpaid.AdVideoStart",O="vpaid.AdVideoThirdQuartile",Z="vpaid.AdClickThru",j="vastVideoError",V="vpaidBlockedError",U="vpaidNonBlockedError",F="scroll",B="transform",W="transitionEnd",H="goRight",z="goLeft",G="onTriggerEnter",Y="onTriggerExit",Q="onAdchoicesEnter",q="onAdchoicesExit",J="clickPause",X="clickPlay",K="twoSecondViewable",$="trackClick",tt="firstPlay",et="mouseenter",it="mouseleave",rt="auctionResponse",nt="auctionComplete",st="passthru"},498:function(t,e,i){i.d(e,{Z:function(){return o}});var r=i(942),n=i(849),s=i(696),a=i(493);class o{constructor({firePix:t,lifecycleManager:e,urlParams:i}){this.firePix=t,this.lifecycleManager=e,this.urlParams=i,this.previousErrorMap={}}get UNKNOWN(){return 0}get ERROR(){return 1}get WARNING(){return 2}get LOG(){return 3}fireError(t,e=0,i={},r){const n=r||this.lifecycleManager.getPhase();if(this.urlParams.debugFlag)a.Z.warn(t,n,e,i);else{if(t.stack){const e={stack:t.stack};Object.assign(i,e)}this._logEbError(t instanceof Error?t.message:t,n,e,i)}}decorate(t){let e=!1;const i=this;return function(...r){try{return t.apply(this,r)}catch(t){e||(e=!0,i.fireError(t,t instanceof s.Z?t.errorLevel:void 0))}return null}}_logEbError(t,e,i,r){const s={e:t,block:e,lvl:i,dc:r?JSON.stringify(r):""};return this._isFirstOfType(e,i)?this._recordError(e,i):s.dup=1,this.firePix.fireEB(n.tF,s),this}_isFirstOfType(t,e){return!(this.previousErrorMap[t]&&this.previousErrorMap[t][e])}_recordError(t,e){this.previousErrorMap[t]||(this.previousErrorMap[t]={}),this.previousErrorMap[t][e]=!0}}(0,r.Z)(o,"UNKNOWN",0),(0,r.Z)(o,"ERROR",1),(0,r.Z)(o,"WARNING",2),(0,r.Z)(o,"LOG",3)},696:function(t,e,i){i.d(e,{Z:function(){return s}});var r=i(942),n=i(498);class s extends Error{constructor(t,e=n.Z.ERROR){super(t),(0,r.Z)(this,"errorLevel",null),this.errorLevel=e}}},993:function(t,e,i){i.d(e,{Og:function(){return o},ZP:function(){return l},k0:function(){return s}});var r=i(942),n=i(277);const s="init",a="post_render",o="render_validation";class l{constructor({eventController:t}){(0,r.Z)(this,"phase",s),t.on(n.i2,(()=>this.setPhaseAfterAuction()))}setPhaseAfterInit(){this.phase="auction"}setPhaseAfterAuction(){this.phase="render"}setPhaseAfterRender(t){this.phase=t?"video":a}setPhaseAfterVideoStart(){this.phase=a}setPhaseAfterPostRender(){this.phase=o}getPhase(){return this.phase}}},278:function(t,e,i){i.d(e,{Z:function(){return s}});var r=i(145),n=i(849);class s{static build(t,e,i){const n=s.getImageUrlKey(e),a=(0,r.Rz)(e[n]);a&&(e[n]=a);const o=e[n],l=s.parseSizedImgMacros(t,o);Object.assign(e,l);let c=e.cta;if(!c){const t="Learn more";c=i.cta||t}const d=this.parseDisclosure(...arguments);return s.interpolate(t,{...e,inv_code:i.invCode,disclosure:d,cta:c})}static parseDisclosure(t,e,i,r){var s;let a=null===(s=e.disclosure)||void 0===s?void 0:s.text;a||(a=i.disclosure);const o=new RegExp("%%%DISCLOSURE%%%","gi");return t.match(o)||(r.disclosure={render_method:n.X8.DRM_NO_MACRO,text:this.getDisclosureText(t)}),a}static getDisclosureText(t){if(!t)return"No template found";const e=new RegExp("(Sponsored|by|From|Patrocinado|SponsorisÃ©|Von)(\\w|\\s+){1,8}(%%%ADVERTISER_NAME%%%)","gi"),i=t.match(e);return i&&i[0]||""}static parseSizedImgMacros(t,e){const i=(0,r.EC)(e),n=t.match(/%%%IMAGE_URL_\d+_X_\d+%%%/gi)||[],s={};return n.forEach((t=>{const n=t.slice(3,-3),a=n.split("_");if("data"===i.protocol)s[n]=e;else{i.host.indexOf("img.3lift")>=0&&(i.queryKey.width=a[2],i.queryKey.height=a[4]);const t=(o=i.queryKey,Object.keys(o).map((t=>t+"="+o[t])).join("&"));s[n]=(0,r.Rz)("//"+i.host+i.path+"?"+t)}var o})),s}static interpolate(t,e){let i,r,n=t;return Object.keys(e).forEach((s=>{var a;i=e[s],r=new RegExp("%%%"+s+"%%%","gi"),t.match(r)&&(n=n.replace(r,(a=i,()=>a)))})),n}static getImageUrlKey(t){const e=Object.keys(t);let i,r;for(r=0;r<e.length;r+=1)if(i=e[r],"image_url"===i.toLowerCase())return i;return null}}},465:function(t,e,i){i.d(e,{Z:function(){return l},g:function(){return o}});var r=i(114),n=i(145);const s="tl-img-src-place-holder",a="tl-img-srcset-place-holder",o=r.ZP.TL_CLASS_PREFIX+"cta-macro";class l{constructor(t){this._errorHandler=t,this._templateDetail={string:""},this._chosenTemplate=null,this._templateWrapEl=null,this._templateId=0,this._hasCtaMacro=!1}get templateDetail(){return this._templateDetail}get chosenTemplate(){return this._chosenTemplate}get templateWrapEl(){return this._templateWrapEl}get templateId(){return this._templateId}get hasCtaMacro(){return this._hasCtaMacro}parse(t){const e=l.makeTemplateWrapEl(l.getTransformedMacroSrcAttrs(t)),i=l.markElements(e),r=i.innerHTML;(0,n.NH)(i),this._templateDetail.string=l.getInterpolatedMacroSrcAttrs(r),this._templateWrapEl=e,this._chosenTemplate=i}static markElements(t){return t&&1===t.nodeType?(l.isClickThroughEl(t)&&t.classList.add(r.ZP.TL_CLASS_PREFIX+"clickthrough-url"),l.isLogoEl(t)&&t.classList.add(r.ZP.TL_CLASS_PREFIX+"logo-img"),l.isSubHeadlineEl(t)&&t.classList.add(r.ZP.TL_CLASS_PREFIX+"sub-headline"),l.isCtaMacroEl(t)&&(t.classList.add(o),this._hasCtaMacro=!0),[].forEach.call(t.childNodes,(e=>{3===e.nodeType&&r.ZP.TEXT_FIELDS.forEach((i=>{e.textContent.toLowerCase().indexOf("%%%"+i+"%%%")>-1&&t.classList.add(""+r.ZP.TL_CLASS_PREFIX+i)})),l.markElements(e)})),t):t}static isClickThroughEl(t){if(!t||!t.tagName||!t.getAttribute("href"))return!1;const e=t.tagName.toLowerCase(),i=t.getAttribute("href").toLowerCase();return"a"===e&&i.indexOf("%%%clickthrough_url%%%")>-1}static isLogoEl(t){if(!t||!t.tagName||!t.getAttribute(s))return!1;const e=t.tagName.toLowerCase(),i=t.getAttribute(s).toLowerCase();return"img"===e&&i.indexOf("%%%logo_image_url%%%")>-1}static isSubHeadlineEl(t){return t&&t.tagName&&t.innerHTML&&"%%%subheadline%%%"===t.innerHTML.toLowerCase()}static isCtaMacroEl(t){return t&&t.innerHTML&&"%%%cta%%%"===t.innerHTML.toLowerCase().trim()}static getTransformedMacroSrcAttrs(t){return t.replace(/src([="'\s]+%%%)/gi,s+"$1").replace(/srcset([="'\s]+%%%)/gi,a+"$1")}static getInterpolatedMacroSrcAttrs(t){const e=new RegExp(s,"g"),i=new RegExp(a,"g");return t.replace(e,"src").replace(i,"srcset")}static makeTemplateWrapEl(t){const e=document.createElement("div");return e.innerHTML=t,e}static hasMacro(t){return-1!==(null==t?void 0:t.indexOf("%%%"))}getAltTemplateId(t,e,i){return+i||+e||+t}getAltTemplate(t,e){if(isNaN(Number(e)))return{};if(!t)return this.errNoAltTemplates(),{};const i=(0,n.sE)(t,(t=>t.id===e));if(!i)return this.errTemplateNotFound(e),{};const{id:r,...s}=i;return this._templateId=r,{templateId:r,...s}}errNoAltTemplates(){this._errorHandler.fireError("templateId specified but no templates found on placement. Default templateCode used.",this._errorHandler.WARNING)}errTemplateNotFound(t){const e="Cannot find templateCode with id = "+t+" in templateList. Default templateCode used";this._errorHandler.fireError(e,this._errorHandler.WARNING)}}},114:function(t,e,i){i.d(e,{Ec:function(){return r},Wg:function(){return n}});const r={logo:1,cta:2,overlay:3,end_card:4,feature:5,skin:6,image_position_1:7,image_position_2:8,image_position_3:9,image_position_4:10,image_position_5:11,other_image_positions:12},n={hiveCta:r.cta,endCard:r.end_card,endCardCta:r.cta,endCardFeature:r.feature,overlay:r.overlay,featureImg:r.feature,skin:r.skin,videoLogo:r.logo};e.ZP={BUTTONS_DIR:"https://ib.3lift.com/static/buttons/",NW:"NW",NE:"NE",SE:"SE",SW:"SW",BASE_Z_INDEX:0,DEFAULT_ADCHOICES_URL:"https://optout.aboutads.info",TEXT_FIELDS:["heading","caption"],TINY_IMG_DATA:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",TL_CLASS_PREFIX:"tl-",COLORS:{BLACK:"#000",WHITE:"#fff"},DCO_PROTOCOLS:{DYNAMIC_CONTENT:1,NATIVE_ADS:2,DV_BLOCKING:3},DEFAULT_FALLBACK_URL:"https://images.3lift.com/5333898.jpg",DISPLAY_CLICK_MACROS:[{regex:/{clickurl}/gi,level:0},{regex:/{clickurl_enc}/gi,level:1},{regex:/{clickurl_dbl_enc}/gi,level:2}],SRCSET_2X_CAP_PX:600}},440:function(t,e,i){i.d(e,{rl:function(){return d},yK:function(){return c}});i(876);const r="height",n="width",s=(t,e,i)=>{const s=i===r?n:r;if(!e[i]||!t[i])return{height:0,width:0};const a=t[i]/e[i];return{[i]:t[i],[s]:e[s]*a}},a=(t,e)=>s(t,e,r),o=(t,e)=>s(t,e,n),l=({height:t,width:e},{height:i,width:r})=>i<=t&&r<=e,c=(t,e)=>{const i=a(t,e);return l(t,i)?i:o(t,e)},d=(t,e)=>{if(!t.height||!e.height)return{x:0,y:0};const i=a(t,e);return l(t,i)?((t,e)=>({x:Math.ceil((t.width-e.width)/2)||0,y:0}))(t,i):((t,e)=>{const i=o(t,e);return{x:0,y:Math.ceil((t.height-i.height)/2)||0}})(t,e)}},805:function(t,e,i){i.d(e,{Z:function(){return h}});var r=i(278),n=i(145),s=i(465),a={init:function({adWrapper:t,creative:e,analytics:i,asyncUtil:r,domRefs:a,errorHandler:o}){const l=e.getVastTag(),c=l&&l.getVastClickThroughUrl(),d=function(t,e){const i="tl-cta",r=e+"_cta",s="tl-cta-macro";let a=t.getElementsByClassName(i);a.length||(a=t.getElementsByClassName(r));a.length||(a=t.getElementsByClassName(s));return(0,n.ZM)(a)}(t,e.placement.invCode);if(e.params.clickthrough_url||c)a.ctaElList=d,d.forEach((t=>{r.listen(t,"click",(()=>{i.fireEEE("click_cta")})),function(t,e){if(t.className.includes(s.g))e.ctaMacro=t;else{const r=t.childNodes;for(let t=0;t<r.length;t++){var i;null!==(i=r[t].classList)&&void 0!==i&&i.contains(s.g)&&(e.ctaMacro=r[t])}}}(t,a)}));else{if(e.isHighImpact())return void(0,n.UP)(.01,(()=>{o.fireError("No clickthrough present for HIVE cta",o.LOG)}));d.forEach(n.l),(0,n.UP)(.01,(()=>{o.fireError("Cta removed. No clickthrough present.",o.LOG)}))}}};var o=i(114);var l={init:function(t,e){if(!e.params.logo_image_url){const e=t.getElementsByClassName(o.ZP.TL_CLASS_PREFIX+"logo-img")[0];e&&(e.src=o.ZP.TINY_IMG_DATA,(0,n.l)(e));const i=t.getElementsByClassName(o.ZP.TL_CLASS_PREFIX+"logo")[0];i&&(0,n.l)(i)}}};const c={init:function(t,e){const i=t.getElementsByClassName(o.ZP.TL_CLASS_PREFIX+"sub-headline");if(!e.params.subheadline&&i.length>0){const t=i[0];t&&(0,n.l)(t)}}};var d=c,h=function({environment:t,placement:e,creative:i,templateCode:s,analytics:c,asyncUtil:h,errorHandler:p}){const m=i.getParams();let g=null,f=null;return{render:function(t){var I,A;f=t.domRefs;const C=function(t){const i=document.createElement("div");i.innerHTML=t,i.style.display="inline",i.className="tlod";const r=(0,n.sE)(i.children,a);return{adWrapper:l(),adWrapperWithDims:r};function a(t){return-1===u.indexOf(_(t))}function o(t){return"script"===_(t)}function l(){let t;return e.customOptions.unwrappedUnit?((0,n.hX)(i.children,o).forEach((t=>{r.appendChild(t)})),t=r):t=i,t.setAttribute("plid",e.id),s.templateId&&t.setAttribute("tlid",s.templateId),(0,n.Nj)(m.additional_data.adid,t),t}}(r.Z.build(s.templateDetail.string,m,e,c));f.adWrapper=C.adWrapper,f.adWrapperWithDims=C.adWrapperWithDims,g||(g=function(){const t=f.adWrapper.getElementsByTagName("img");return v((0,n.hX)(t,y))}()||function(){const t=f.adWrapper.getElementsByTagName("*"),e=(0,n.EC)(m.image_url);return(0,n.sE)(t,i);function i(t){const i=t.style&&t.style["background-image"],r=t.hasAttribute&&t.hasAttribute("data-background");return i&&i.match(e.query)||r&&r.match(e.query)}}());f.mainImage=g,"div"===_(g)&&(t.state.isBackgroundImage=!0);"img"===_(g)&&m.image_srcset_2x&&!g.getAttribute("srcset")&&e.imageWidth<=o.ZP.SRCSET_2X_CAP_PX&&e.imageHeight<=o.ZP.SRCSET_2X_CAP_PX&&(null===(I=m.customization)||void 0===I||!I.reveal)&&g.setAttribute("srcset",m.image_srcset_2x);if(l.init(f.adWrapper,i),a.init({adWrapper:f.adWrapper,creative:i,analytics:c,asyncUtil:h,domRefs:f,errorHandler:p}),d.init(f.adWrapper,i),!m.clickthrough_url){const t=f.adWrapper.getElementsByClassName("tl-clickthrough-url");for(let e=0;e<t.length;e++)t[e].removeAttribute("href"),t[e].removeAttribute("target")}if(""===(null===(A=c.disclosure)||void 0===A?void 0:A.text)){var S,w;const t=e.invCode+"_sponsor",i=(null===(S=f.adWrapper.getElementsByClassName(t)[0])||void 0===S||null===(w=S.textContent)||void 0===w?void 0:w.trim())||"";c.disclosure.text=i}const M=f.adWrapper.getElementsByClassName("tl_clickthrough")[0];f.mainClickTarget=M||f.adWrapperWithDims},_bestImage:v};function v(t){return t.sort((function(t,i){const r="none"===e(t),n="none"===e(i),s=!r&&!n;if(r&&n||s){const e=t.width*t.height,r=i.width*i.height;return isNaN(e)?1:isNaN(r)?-1:r-e}if(r)return 1;return-1}))[0];function e(t){return t&&t.style&&t.style.display}}function y(e){const i=[m.image_url,t.tlImageAddr];try{return e.src&&i.some((t=>(0,n.BD)(e.src,t)))}catch(t){return!1}}function _(t){const e=t&&t.tagName;return e&&e.toLowerCase&&e.toLowerCase()}};const u=["iframe","style","meta","script","link","br","hr"]},251:function(t,e,i){var r=i(277),n=i(145),s=i(114);const a="tl-dummy-img",{TL_CLASS_PREFIX:o}=s.ZP;e.Z=function({placement:t,environment:e,creative:i,browserInfo:l,asyncUtil:c,eventController:d}){let h,u,p,m=!1;return{render:function(s){p=s;const{state:m,domRefs:y}=p;if(m.isBackgroundImage&&(i.isImage()||i.isCinemagraph()))return void(y.mainImageCsrEl=y.mainImage);const _=y.mainImage;y.mainImageCsrEl||(y.mainImageCsrEl=function(t,r){const s=i.getParams().render_options_bm,a=e.renderOptionsMap,l=(0,n.hU)(s,a.gda_iframe),c=(0,n.hU)(s,a.img_tag_csr);if(l)return function(){const t=i.getParams().allImages[0].img_frame,e=document.createElement("div");return e.innerHTML=t,e.firstChild}();if(c)return function(t,e){const i=document.createElement("div");i.style.setProperty("width",e.imageWidth+"px","important"),i.style.setProperty("height",e.imageHeight+"px","important"),i.style.setProperty("display","flex"),i.style.setProperty("align-items","center"),i.style.setProperty("justify-content","center");const r=document.createElement("img");return r.classList.add(o+"csr-img"),r.setAttribute("src",t),r.style.setProperty("max-width","100%"),r.style.setProperty("max-height","100%"),i.appendChild(r),i}(t,r);return v(t,r)}(_.src,t));u=y.mainImageCsrEl,u.classList.add("tl-csr"),h=function(t,e,i,r="",s="",o){const d=o.createElement("img");d.className=r+" "+a,d.id=s,d.style.setProperty("display","none","important"),l.isIE?d.onload=()=>{c.timeoutWrap(g,0)}:p.promises.push(new Promise((t=>{d.onload=()=>{g(),t()}})));return d.src=function(t,e,i){return(0,n.Rz)("//"+t+"/blank?width="+e+"&height="+i)}(t,e,i),d}(e.tlImageAddr,t.imageWidth,t.imageHeight,_.className,_.id,document),function(t,e={}){let i,r=0;for(;e[r];)i=e[r],t.style.setProperty(i,e[i],"important"),r++}(h,_.style),_.parentNode.insertBefore(h,_),c.addResizeListener(f),(0,n.C4)(u,_),d.on(r.q3,f),d.on(r.S_,f)},createMainImageCsrDiv:v};function g(){m=!0,d.publish(r.a8),f()}function f(){h&&d.publish(r.ql,function(){if(!m)return{width:0,height:0};h.style.setProperty("display","","important");const t=h.ownerDocument.defaultView,e=t?t.getComputedStyle(h):getComputedStyle(h);!function(t,e){["width","height","float","margin","margin-top","margin-right","margin-bottom","margin-left","max-width","max-height","padding","padding-top","padding-right","padding-bottom","padding-left","border","border-top","border-right","border-bottom","border-left"].forEach((i=>{e[i]&&t.style.setProperty(i,e[i],"important")}));""===e.position||"static"===e.position?t.style.setProperty("position","relative","important"):t.style.setProperty("position",e.position,"important")}(u,e);const i=parseFloat(e.width),r=parseFloat(e.height);return h.style.setProperty("display","none","important"),{width:i,height:r}}())}function v(t,e){const r=i.isWhitePillarBoxingColorWhite(i.getParams()),n=document.createElement("div"),a=e.customOptions.is3pAdPreview?"cover":"contain";return n.style.setProperty("width",e.imageWidth+"px","important"),n.style.setProperty("height",e.imageHeight+"px","important"),n.style.setProperty("background-size",a,"important"),n.style.setProperty("background-position","center","important"),n.style.setProperty("background-repeat","no-repeat","important"),n.style.setProperty("background-image","url("+t+")","important"),r&&n.style.setProperty("background-color",s.ZP.COLORS.WHITE),n}}},876:function(t,e,i){var r=i(696);function n(t,e,i){if(!t)throw new r.Z("Tried to set style "+e+" to "+i+" on an invalid element.");if(!t.style)throw new r.Z("Failed to set styles on "+t.nodeName);t.style.setProperty(e,i,"important")}e.Z={setStyle:n,setStyleProperties:function(t,e){if(!Array.isArray(e))throw new r.Z("arg2 of setStyleProperties must be an array");for(let i=0;i<e.length;i++)n(t,e[i][0],e[i][1]);return t},getPropertyValue:function(t,e){return window.getComputedStyle(t).getPropertyValue(e)}}},654:function(t,e,i){i.d(e,{f:function(){return n},l:function(){return s}});const r=300;function n(t,e,i){let n=!1,s=null;i.listen(t,"mouseenter",(function(){n=!0,s=i.timeoutWrap((()=>{n&&e()}),r)})),i.listen(t,"mouseleave",(function(){clearTimeout(s),n=!1}))}function s(t){t&&window.open(t,"_blank")}},145:function(t,e,i){i.d(e,{A2:function(){return E},BD:function(){return F},BF:function(){return a},C4:function(){return k},CA:function(){return l},Cd:function(){return O},DA:function(){return g},DM:function(){return $},EC:function(){return C},E_:function(){return L},Ej:function(){return U},GY:function(){return v},I$:function(){return B},Id:function(){return u},LB:function(){return R},NH:function(){return V},Nj:function(){return X},P2:function(){return N},QU:function(){return Z},Qt:function(){return I},Rz:function(){return w},UP:function(){return y},Up:function(){return x},Xq:function(){return d},Z0:function(){return M},ZM:function(){return J},Zx:function(){return S},hL:function(){return P},hU:function(){return o},hX:function(){return G},hj:function(){return T},hr:function(){return Y},hv:function(){return W},l:function(){return m},lX:function(){return Q},mz:function(){return c},p5:function(){return b},qe:function(){return D},r3:function(){return f},rO:function(){return h},sE:function(){return z},sf:function(){return j},tU:function(){return K},uC:function(){return _},ws:function(){return q},xh:function(){return p},xp:function(){return A},yu:function(){return H}});var r=i(876),n=i(114),s=i(696);function a(...t){const e=[].slice.call(t);return Object.assign.apply(null,e.map((function(t){const e={};return Object.keys(t).forEach((i=>{(function(t){return"_"!==t[0]})(i)&&(e[i]=t[i])})),e})))}function o(t,e){return!!t&&!!(t&2**e)}function l(t){return r.Z.setStyle(t,"display","inline"),r.Z.setStyle(t,"box-sizing","content-box"),r.Z.setStyle(t,"-webkit-box-sizing","content-box"),r.Z.setStyle(t,"-moz-box-sizing","content-box"),r.Z.setStyle(t,"padding","0"),r.Z.setStyle(t,"border","0"),r.Z.setStyle(t,"margin","0"),r.Z.setStyle(t,"float","none"),r.Z.setStyle(t,"outline","none"),r.Z.setStyle(t,"object-fit","fill"),r.Z.setStyle(t,"background","none"),t}function c(t){if("object"==typeof(e=t)&&!Array.isArray(e)&&null!==e)return t;var e;if(Array.isArray(t))return t.reduce(function(t=null){return(e,i)=>(e[i]=t,e)}(null),{});throw new TypeError("invalid arguments, objectify takes an object or an array")}function d(t,e){const i=t.filter(n.bind(null,e)),r=e.filter(n.bind(null,t));return i.concat(r);function n(t,e){return-1===t.indexOf(e)}}function h(t){return Math.floor((t+1)*Math.random())}function u(t){return!isNaN(t)&&"number"==typeof t}function p(t,e,i){if(r=t,parseFloat(r)!==parseInt(r,10)||!u(r))throw new TypeError("arg 0 of updateCopyAndHref must be an integer");var r,s;if(s=e,!("object"==typeof Node?s instanceof Node:s&&"object"==typeof s&&"number"==typeof s.nodeType&&"string"==typeof s.nodeName))throw new TypeError("arg 1 of updateCopyAndHref must be DOM element");if(!Array.isArray(i))throw new TypeError("arg 2 of updateCopyAndHref must be an array");n.ZP.TEXT_FIELDS.forEach((r=>{const s=e.getElementsByClassName(""+n.ZP.TL_CLASS_PREFIX+r);for(let e=0;e<s.length;e++)s[e].textContent=i[t][r]}));const a=e.getElementsByClassName(n.ZP.TL_CLASS_PREFIX+"clickthrough-url");for(let e=0;e<a.length;e++)a[e].href=i[t].clickthrough_url}function m(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function g(t,e){return isNaN(t)&&isNaN(e)?NaN:isNaN(t)?e:isNaN(e)?t:Math.min(t,e)}function f(t,e){let i=!1;return function(...r){i||t.apply(e||null,r),i=!0}}function v(t){return[...t].reverse()}function y(t,e){Math.random()<t&&e()}function _(t,e,i={},r=!0,n="?"){!1!==r&&(i.cb=I(5));const s=A(function(t){const e={};return Object.keys(t).forEach((i=>{const r=t[i];null!=r&&(e[i]=r)})),e}(i));return w("//"+t.replace(/\/$/,"")+"/"+e+n+s)}function I(t){if(t<1)return NaN;if(1===t)return Math.floor(10*Math.random());const e=10**(t-1);return Math.floor(9*Math.random()*e)+e}function A(t){return Object.keys(t).map((e=>e+"="+encodeURIComponent(t[e]))).join("&")}function C(t){const e=C.options,i=e.parser[e.strictMode?"strict":"loose"].exec(t),r={};let n=14;for(;n--;)r[e.key[n]]=i[n]||"";return r[e.q.name]={},r[e.key[12]].replace(e.q.parser,((t,i,n)=>{i&&(r[e.q.name][i]=n)})),r}function S(t){if(!t)return t;const e=C(t);let i="";return""!==e.port&&(i=":"+e.port),"//"+e.host+i+e.relative}function w(t){return t?"data:"===t.substring(0,5)?t:function(t){if(t.indexOf("3lift.")>=0||t.indexOf("triplelift.")>=0)return"https:";const e=C(t);if("http"===e.protocol||"https"===e.protocol)return e.protocol+":";try{return window.location.protocol}catch(t){return"https:"}}(t)+S(t):t}function M(){return!!document.getElementById("tl-app")}function E(t=""){return t.toUpperCase()}C.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}};const T=(t,e="GET")=>new Promise(((i,r)=>{const n=new XMLHttpRequest;n.open(e,t,!0),n.addEventListener("load",(t=>{n.status>=200&&n.status<300?i(t):r(n.statusText)})),n.addEventListener("error",(t=>r(t))),n.send()})),b=t=>Object.keys(t).reduce(((e,i)=>{const r=t[i];return e[i]="number"==typeof r?Math.round(r):r,e}),{}),L=t=>(r.Z.setStyle(t,"display","none"),r.Z.setStyle(t,"width",0),r.Z.setStyle(t,"height",0),t);function P(t,e){if(!t)return"";if(!e)return t;if(t.length<=e)return t;const i=t.slice(0,e);return-1!==i.lastIndexOf("&")?i.slice(0,i.lastIndexOf("&")):i}function D(t,e,i){const r=i.createEvent("Event");if(!r.initEvent)throw new s.Z("triggerEvent could not call initEvent");r.initEvent(e,!0,!0);try{t.dispatchEvent(r)}catch(t){throw new s.Z("triggerEvent could not dispatch an uninitialized event")}}function x(t={}){const e={};return Object.keys(t).forEach((i=>{e[i]=encodeURIComponent(t[i])})),e}function R(t){if(!t)return NaN;const e=t.split("."),i=e[0].split(":"),r=parseInt(e[1],10)||0;return 60*parseInt(i[0],10)*60*1e3+60*parseInt(i[1],10)*1e3+1e3*parseInt(i[2],10)+r}function N(t,e){let i,r=0;return(...n)=>{i&&clearTimeout(i),i=setTimeout(t.bind(null,...n),e);const s=Date.now();s-r>e&&(r=s,t(...n))}}function k(t,e){e.parentElement.insertBefore(t,e),e.parentElement.removeChild(e)}function O(t,e,i){if(!t||!e)return t;if(t.indexOf("images.3lift")<0)return t;if(i&&i<e)return t;let r;r=e<=100?"_w90":e<=200?"_w192":e<=350?"_w300":e<=650?"_w600":"";const n=t.split(".");return n[n.length-2]+=r,n.join(".")}function Z(t,e,i,r="px"){t.style.setProperty("width",e+r,"important"),t.style.setProperty("min-width",e+r,"important"),t.style.setProperty("max-width",e+r,"important"),t.style.setProperty("height",i+r,"important"),t.style.setProperty("min-height",i+r,"important"),t.style.setProperty("max-height",i+r,"important")}function j(t,e){return t.split("&").filter((t=>-1===t.indexOf(e+"="))).join("&")}function V(t){for(;t.lastChild;)t.removeChild(t.lastChild)}function U(t){if(t<0)return NaN;let e,i,r,n,s=t;return e=Math.floor(s/36e5),s-=36e5*e,i=Math.floor(s/6e4),s-=6e4*i,r=Math.floor(s/1e3),n=s-1e3*r,e=e<10?"0"+e:e,i=i<10?"0"+i:i,r=r<10?"0"+r:r,n<10?n="00"+n:n<100&&(n="0"+n),e+":"+i+":"+r+"."+n}function F(t,e){return-1!==t.indexOf(e)}function B(){let t=!1;try{new ActiveXObject("ShockwaveFlash.ShockwaveFlash")&&(t=!0)}catch(e){navigator.mimeTypes&&void 0!==navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin&&(t=!0)}return t}function W(t,e){const i=/^https?:/i;return t.replace(i,"")===e.replace(i,"")}function H(t,e){return!!t&&(Object.keys(t).forEach((i=>{e(i,t[i])})),!0)}function z(t,e){if(!t)return!1;for(let i=0;i<t.length;i++)if(e(t[i]))return t[i];return!1}function G(t,e){if(!t)return[];const i=[];for(let r=0;r<t.length;r++)e(t[r])&&i.push(t[r]);return i}function Y(t){return t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}function Q(t,e){if(!Array.isArray(t))return[];if(0===e)return[];if(t.length<e)return t;const i=t.slice(),r=[];for(let n=0;n<e;n++){const e=Math.floor(Math.random()*i.length);r.push(t.indexOf(i.splice(e,1)[0]))}return r.sort().map((e=>t[e]))}function q(t){const e=n.ZP.DISPLAY_CLICK_MACROS;let i=t;return e.forEach((t=>{const{regex:e}=t;e.test(i)&&(i=i.replace(e,""))})),i}function J(t){return t?[].slice.call(t):[]}function X(t,e){t&&(e.ownerDocument.getElementById(t)||e.setAttribute("id",t))}function K(t,e){return"none"!==e.getComputedStyle(t).display}function $(t){const e=new URLSearchParams(t);if(!e)return{};const i={};return e.forEach(((t,e)=>{i[e]=t})),i}},85:function(t,e,i){i.d(e,{Tl:function(){return s},ZP:function(){return o},jT:function(){return a}});var r=i(942),n=i(277);const s={init:1,running:2,finished:3,success:4,fail:5},a={FIRST:1,SECOND:2};class o{constructor(t){(0,r.Z)(this,"conditions",{}),(0,r.Z)(this,"success",!1),(0,r.Z)(this,"state",s.init),(0,r.Z)(this,"priority",void 0),(0,r.Z)(this,"fireFallbackCondition",void 0),this.eventController=t,this.fireFallbackCondition={fireFallbackAuction:!0},this.addCondition(this.fireFallbackCondition),this.playUnsubscribe=this.eventController.once(n.Sn,(()=>{this.avoidFallbackFunction()}))}addCondition(t){this.conditions={...this.conditions,...t}}modifyCondition(t){const[e,i]=Object.entries(t)[0];void 0!==this.conditions[e]&&(this.conditions[e]=i)}avoidFallbackFunction(){this.fireFallbackCondition.fireFallbackAuction=!1,this.modifyCondition(this.fireFallbackCondition)}conditionsMet(){return Object.values(this.conditions).every((t=>t))}setCallback(t){this.callback=t}finish(){this.success?this.state=s.success:this.state=s.fail}verifySuccess(){this.success=!0}async run(){this.state=s.running,await this.callback(),this.finish()}destroy(){this.conditions={},this.state=s.init,this.playUnsubscribe()}}},601:function(t,e,i){i.d(e,{Z:function(){return s}});var r=i(942);const n={start:"AdVideoStart",firstQuartile:"AdVideoFirstQuartile",midpoint:"AdVideoMidpoint",thirdQuartile:"AdVideoThirdQuartile",complete:"AdVideoComplete",pause:"AdPaused",resume:"AdPlaying",mute:"AdVolumeChange",unmute:"AdVolumeChange"};class s{constructor({auctionID:t,creative:e,placement:i,context:n,asyncUtil:s}){(0,r.Z)(this,"moatApi",void 0),(0,r.Z)(this,"cachedEvents",[]),this._auctionID=t,this._creative=e,this._placement=i,this._context=n,this._asyncUtil=s,this._fireCachedEvent=this._fireCachedEvent.bind(this)}init(t,e){this.moatApi||(t.setAttribute("data-auction-id",this._auctionID),t.setAttribute("data-video-context","inline"),this.moatApi=this._getMoatApi(e,t),this.cachedEvents.forEach(this._fireCachedEvent),this.cachedEvents=[])}track(t){this.moatApi?this._asyncUtil.timeoutWrap((()=>this._fireTracker(t)),0):this.cachedEvents.push(t)}_fireCachedEvent(t){this._fireTracker(t)}_fireTracker(t){if(!n[t])return;let e;e="mute"===t||"unmute"!==t&&this._context.player.isMuted(),this.moatApi.dispatchEvent({type:n[t],adVolume:e?0:1})}_getMoatApi(t,e){return function(t,e,i,r,n){var s,a,o=document.createElement("script"),l=[];e={adData:{ids:e,duration:i,url:n},dispatchEvent:function(t){this.sendEvent?(l&&(l.push(t),t=l,l=!1),this.sendEvent(t)):l.push(t)}},i="_moatApi"+Math.floor(1e8*Math.random());try{a=(s=t.ownerDocument).defaultView||s.parentWindow}catch(t){s=document,a=window}return a[i]=e,o.type="text/javascript",t&&t.insertBefore(o,t.childNodes[0]||null),o.src="https://z.moatads.com/"+r+"/moatvideo.js#"+i,e}(e,this._getMoatIds(),Math.round(t/1e3),"tripleliftvideojs305296359897")}_getMoatIds(){const{params:{format_id:t=0}}=this._creative,{additional_data:e}=this._creative.params,{tid:i=0,clid:r=0,bid:n=0,bmid:a=0}=e,{id:o,publisherId:l}=this._placement,c=s.makeZParamsString(this._creative,e);return{level1:l.toString(),level2:o.toString(),level3:r.toString(),level4:t.toString(),slicer1:a.toString(),slicer2:n.toString(),zMoatTactic:i.toString(),zMoatPixelParams:c}}static makeZParamsString(t,e){const i=t.getParams().viewability.moat;return[{key:"aid",val:e.aid||0},{key:"sr",val:i},{key:"uid",val:e.unid||0}].reduce((function(t,e){return t+e.key+":"+e.val+";"}),"")}}},906:function(t,e,i){i.d(e,{Z:function(){return s}});var r=i(942),n=i(277);class s{static listen({eventController:t,errorHandler:e}){this.VAST_CODE_LEVELS||(this.VAST_CODE_LEVELS={[s.VAST_ERROR_XML_PARSING]:e.ERROR,[s.VAST_ERROR_VAST_SCHEMA]:e.ERROR,[s.VAST_TRAFFICKING_ERROR]:e.ERROR,[s.VAST_UNEXPECTED_DURATION_ERROR]:e.WARNING,[s.VAST_WRAPPER_ERROR]:e.ERROR,[s.VAST_WRAPPER_TIMEOUT]:e.ERROR,[s.VAST_TOO_MANY_REDIRECTS]:e.ERROR,[s.VAST_NO_ADS_AFTER_WRAPPER]:e.ERROR,[s.VAST_LINEAR_ERROR]:e.ERROR,[s.VAST_MEDIA_NOT_FOUND]:e.ERROR,[s.VAST_MEDIA_LOAD_TIMEOUT]:e.ERROR,[s.VAST_MEDIA_ASSET_MISMATCH]:e.ERROR,[s.VAST_PROBLEM_DISPLAYING_MEDIA_FILE]:e.ERROR,[s.VAST_UNDEFINED_ERROR]:e.ERROR,[s.VAST_VPAID_ERROR]:e.ERROR}),t.on(n.TZ,((t,i={})=>{const r=s.VAST_CODE_MAP[t],n=this.VAST_CODE_LEVELS[t];if(void 0===r)e.fireError("invalid vast error code");else{const s=r+(i.message?" "+i.message:"");e.fireError(t+": "+s,n,{errorCode:t,...i.diagnosticContext},this.ERROR_BLOCK)}}))}}(0,r.Z)(s,"VAST_ERROR_XML_PARSING",100),(0,r.Z)(s,"VAST_ERROR_VAST_SCHEMA",101),(0,r.Z)(s,"VAST_TRAFFICKING_ERROR",200),(0,r.Z)(s,"VAST_UNEXPECTED_DURATION_ERROR",202),(0,r.Z)(s,"VAST_WRAPPER_ERROR",300),(0,r.Z)(s,"VAST_WRAPPER_TIMEOUT",301),(0,r.Z)(s,"VAST_TOO_MANY_REDIRECTS",302),(0,r.Z)(s,"VAST_NO_ADS_AFTER_WRAPPER",303),(0,r.Z)(s,"VAST_LINEAR_ERROR",400),(0,r.Z)(s,"VAST_MEDIA_NOT_FOUND",401),(0,r.Z)(s,"VAST_MEDIA_LOAD_TIMEOUT",402),(0,r.Z)(s,"VAST_MEDIA_ASSET_MISMATCH",403),(0,r.Z)(s,"VAST_PROBLEM_DISPLAYING_MEDIA_FILE",405),(0,r.Z)(s,"VAST_UNDEFINED_ERROR",900),(0,r.Z)(s,"VAST_VPAID_ERROR",901),(0,r.Z)(s,"ERROR_BLOCK","video"),(0,r.Z)(s,"VAST_CODE_MAP",{[s.VAST_ERROR_XML_PARSING]:"XML Parsing error.",[s.VAST_ERROR_VAST_SCHEMA]:"VAST schema validation error.",[s.VAST_TRAFFICKING_ERROR]:"Trafficking error. Media player received an Ad type that it was not expecting and/or cannot play",[s.VAST_UNEXPECTED_DURATION_ERROR]:"Media player expecting different duration.",[s.VAST_WRAPPER_ERROR]:"General Wrapper error.",[s.VAST_WRAPPER_TIMEOUT]:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element.",[s.VAST_TOO_MANY_REDIRECTS]:"Wrapper limit reached, as defined by the media player. Too many Wrapper responses have been received with no InLine response.",[s.VAST_NO_ADS_AFTER_WRAPPER]:"No VAST response after one or more Wrappers.",[s.VAST_LINEAR_ERROR]:"General Linear error. Media player is unable to display the Linear Ad.",[s.VAST_MEDIA_NOT_FOUND]:"File not found. Unable to find Linear/MediaFile from URI.",[s.VAST_MEDIA_LOAD_TIMEOUT]:"Timeout of MediaFile URI.",[s.VAST_MEDIA_ASSET_MISMATCH]:"Couldn't find MediaFile that is supported by this media player, based on the attributes of the MediaFile element.",[s.VAST_PROBLEM_DISPLAYING_MEDIA_FILE]:"Problem displaying MediaFile. Media player found a MediaFile with supported type but couldn't display it.",[s.VAST_UNDEFINED_ERROR]:"Undefined error.",[s.VAST_VPAID_ERROR]:"General VPAID error."}),(0,r.Z)(s,"VAST_CODE_LEVELS",null)},336:function(t,e,i){i.d(e,{m:function(){return r}});const r=i(114).ZP.TL_CLASS_PREFIX+"video";e.Z={vpaidZIndex:1e9,nonVpaidZIndex:1,type:{vast:1,vpaid:2}}},283:function(t,e,i){i.r(e),i.d(e,{default:function(){return ut}});var r=i(724),n=i(805),s=i(251),a=i(876);class o{constructor(){this._el=null}set el(t){this._el=t}get el(){return this._el}hide(){a.Z.setStyle(this._el,"display","none")}show(){a.Z.setStyle(this._el,"display","block")}get buttonDimPx(){return 25}get buttonOpacity(){return.75}}var l=i(145);class c extends o{constructor(){super(),this._el=this._createEl()}_setButtonStyle(t){a.Z.setStyle(t,"height","100%"),a.Z.setStyle(t,"width","100%"),a.Z.setStyle(t,"opacity",this.buttonOpacity)}_createEl(){this._el=document.createElement("div"),this.className="tl-mute",a.Z.setStyle(this._el,"position","absolute"),a.Z.setStyle(this._el,"height",this.buttonDimPx+"px"),a.Z.setStyle(this._el,"width",this.buttonDimPx+"px");const t=this._createMuteButton(),e=this._createUnmutedButton();return this._el.appendChild(t),this._el.appendChild(e),this._el}_createMuteButton(){const t=document.createElement("img");return(0,l.CA)(t),t.id="muted",t.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cmVjdCBmaWxsPSIjNEE0QTRBIiBvcGFjaXR5PSIuMTY5IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSI2Ii8+PGcgZmlsbD0iI0ZGRiI+PHBhdGggZD0iTTE2LjI4NiA4Ljg1N0EuODYzLjg2MyAwIDAgMCAxNS40MjkgOGEuODUyLjg1MiAwIDAgMC0uNjAzLjI1NGwtNC40NiA0LjQ2SDYuODU3YS44NjMuODYzIDAgMCAwLS44NTcuODU3djUuMTQzYzAgLjQ2OS4zODguODU3Ljg1Ny44NTdoMy41MWw0LjQ1OSA0LjQ2Yy4xNi4xNjEuMzc1LjI1NS42MDMuMjU1YS44NjMuODYzIDAgMCAwIC44NTctLjg1N1Y4Ljg1N3pNMjUgMTguNjMzYS41NzEuNTcxIDAgMCAwLS4xNjUtLjRMMjMuMTAzIDE2LjVsMS43MzItMS43MzJhLjU3MS41NzEgMCAwIDAgMC0uODAybC0uODAxLS44MDFhLjU3MS41NzEgMCAwIDAtLjgwMiAwTDIxLjUgMTQuODk3bC0xLjczMi0xLjczMmEuNTcxLjU3MSAwIDAgMC0uODAyIDBsLS44MDEuODAxYS41NzEuNTcxIDAgMCAwIDAgLjgwMmwxLjczMiAxLjczMi0xLjczMiAxLjczMmEuNTcxLjU3MSAwIDAgMCAwIC44MDJsLjgwMS44MDFhLjU3MS41NzEgMCAwIDAgLjgwMiAwbDEuNzMyLTEuNzMyIDEuNzMyIDEuNzMyYS41NzEuNTcxIDAgMCAwIC44MDIgMGwuODAxLS44MDFhLjU3MS41NzEgMCAwIDAgLjE2NS0uNDAxeiIvPjwvZz48L2c+PC9zdmc+",t.className="tl-sound-off",a.Z.setStyle(t,"display","none"),this._setButtonStyle(t),t}_createUnmutedButton(){const t=document.createElement("img");return(0,l.CA)(t),t.id="unmuted",t.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cmVjdCBmaWxsPSIjNEE0QTRBIiBvcGFjaXR5PSIuMTY5IiB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHJ4PSI2Ii8+PHBhdGggZD0iTTE2LjI4NiA4Ljg1N0EuODYzLjg2MyAwIDAgMCAxNS40MjkgOGEuODUyLjg1MiAwIDAgMC0uNjAzLjI1NGwtNC40NiA0LjQ2SDYuODU3YS44NjMuODYzIDAgMCAwLS44NTcuODU3djUuMTQzYzAgLjQ2OS4zODguODU3Ljg1Ny44NTdoMy41MWw0LjQ1OSA0LjQ2Yy4xNi4xNjEuMzc1LjI1NS42MDMuMjU1YS44NjMuODYzIDAgMCAwIC44NTctLjg1N1Y4Ljg1N3ptNS4xNDMgNy4yODZjMCAxLjM0LS44MTcgMi42MzgtMi4wNzYgMy4xNDdhLjc1Ljc1IDAgMCAxLS4zMzUuMDY3Ljg1NS44NTUgMCAwIDEtLjg1Ny0uODU3YzAtMS4wMTggMS41NTMtLjczNyAxLjU1My0yLjM1N3MtMS41NTMtMS4zNC0xLjU1My0yLjM1N2MwLS40ODIuMzg4LS44NTcuODU3LS44NTdhLjc1Ljc1IDAgMCAxIC4zMzUuMDY3YzEuMjU5LjQ5NSAyLjA3NiAxLjgwOCAyLjA3NiAzLjE0N3ptMy40MjggMGMwIDIuNzE5LTEuNjM0IDUuMjUtNC4xNTIgNi4zMDhhLjg2Ni44NjYgMCAwIDEtMS4yMDUtLjc5YzAtLjM3NS4yMTQtLjYzLjUyMi0uNzkuMzYyLS4xODguNjk3LS4zNDkgMS4wMTgtLjU5YTUuMTE0IDUuMTE0IDAgMCAwIDIuMTAzLTQuMTM4IDUuMTE0IDUuMTE0IDAgMCAwLTIuMTAzLTQuMTM5Yy0uMzIxLS4yNC0uNjU2LS40MDEtMS4wMTgtLjU4OS0uMzA4LS4xNi0uNTIyLS40MTUtLjUyMi0uNzkgMC0uNDY5LjM4OC0uODU3Ljg1Ny0uODU3LjEyIDAgLjI0MS4wMjcuMzQ4LjA2NyAyLjUxOCAxLjA1OCA0LjE1MiAzLjU5IDQuMTUyIDYuMzA4eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4=",t.className="tl-sound-on",a.Z.setStyle(t,"display","block"),this._setButtonStyle(t),t}mute(){a.Z.setStyle(this._el.querySelector("#muted"),"display","block"),a.Z.setStyle(this._el.querySelector(":nth-child(2)"),"display","none")}unmute(){a.Z.setStyle(this._el.querySelector("#muted"),"display","none"),a.Z.setStyle(this._el.querySelector(":nth-child(2)"),"display","block")}}var d=i(336);const h=d.m+"-play-btn";class u extends o{constructor(t){super(),this._playButtonUrl=t||"data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyMDAgMjAwIj48ZGVmcz48c3R5bGU+LmNscy0ye2ZpbGw6I2ZmZn08L3N0eWxlPjwvZGVmcz48cGF0aCBkPSJNMTAwIDIuNTZBOTcuNDQgOTcuNDQgMCAxIDEgMi41NiAxMDAgOTcuNDQgOTcuNDQgMCAwIDEgMTAwIDIuNTYiIG9wYWNpdHk9Ii41Ii8+PHBhdGggY2xhc3M9ImNscy0yIiBkPSJNMTAwIDIwMEExMDAgMTAwIDAgMCAxIDYxLjA3IDcuODZhMTAwIDEwMCAwIDAgMSA3Ny44NSAxODQuMjhBOTkuMzggOTkuMzggMCAwIDEgMTAwIDIwMHptMC0xOTQuODdhOTQuOSA5NC45IDAgMCAwLTM2LjkzIDE4Mi4yOSA5NC45IDk0LjkgMCAwIDAgNzMuODYtMTc0Ljg0QTk0LjI3IDk0LjI3IDAgMCAwIDEwMCA1LjEzeiIvPjxwYXRoIGNsYXNzPSJjbHMtMiIgZD0iTTg1IDYwLjM5Yy0zLjEzLTEuNDctNi44OS0xLjk0LTYuODkgMi44N3Y3My4yMWMwIDQuNDcgMy40MSA1LjEgNi45MiAzbDQ5LjYtMzUuN2MzLjc0LTIuNzYgMi41My01LjUyLS4zMS03Ljg4eiIvPjwvc3ZnPg==",this._el=this._createEl()}_createEl(){return this._el=this._createPlayButton(),this._el.id=h,this._el.className="tl-play",this._el}_createPlayButton(){const t=document.createElement("IMG");return(0,l.CA)(t),t.src=this._playButtonUrl,a.Z.setStyle(t,"width","100px"),a.Z.setStyle(t,"min-width","0px"),a.Z.setStyle(t,"max-width","50%"),a.Z.setStyle(t,"height","100px"),this._centerButton(t),t}_centerButton(t){a.Z.setStyle(t,"position","absolute"),a.Z.setStyle(t,"margin","auto"),a.Z.setStyle(t,"top","0"),a.Z.setStyle(t,"left","0"),a.Z.setStyle(t,"right","0"),a.Z.setStyle(t,"bottom","0")}}var p=i(745),m=i(277),g=i(114),f={getVideoBgColor:function(t,e){if(e)return g.ZP.COLORS.WHITE;return t?g.ZP.COLORS.BLACK:g.ZP.COLORS.WHITE},isVideoWiderOrEqThanPlacement:function(t,e){if(t.height&&e.height){return e.width/e.height>=t.width/t.height}return!1},getAllVideoEl:function(t){return[].slice.call(t.querySelectorAll("video"))},isVideoInUse:function(t){return t.src||t.currentSrc||t.querySelector("source")},hideAd:function(t){t.classList.add(g.ZP.TL_CLASS_PREFIX+"hidden"),a.Z.setStyle(t,"visibility","hidden")},showAd:function(t){a.Z.setStyle(t,"visibility","visible"),t.classList.remove(g.ZP.TL_CLASS_PREFIX+"hidden")}};const v="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTA2IiBoZWlnaHQ9IjMyIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDEgMSkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PGNpcmNsZSBzdHJva2U9IiNGRkYiIGN4PSIxNSIgY3k9IjE1IiByPSIxNSIvPjxwYXRoIGQ9Ik0xNC45OSA1QzkuNDcgNSA1IDkuNDggNSAxNXM0LjQ3IDEwIDkuOTkgMTBDMjAuNTIgMjUgMjUgMjAuNTIgMjUgMTVTMjAuNTIgNSAxNC45OSA1em02LjkzIDZoLTIuOTVhMTUuNjUgMTUuNjUgMCAwIDAtMS4zOC0zLjU2QTguMDMgOC4wMyAwIDAgMSAyMS45MiAxMXpNMTUgNy4wNGMuODMgMS4yIDEuNDggMi41MyAxLjkxIDMuOTZoLTMuODJjLjQzLTEuNDMgMS4wOC0yLjc2IDEuOTEtMy45NnpNNy4yNiAxN0M3LjEgMTYuMzYgNyAxNS42OSA3IDE1cy4xLTEuMzYuMjYtMmgzLjM4Yy0uMDguNjYtLjE0IDEuMzItLjE0IDIgMCAuNjguMDYgMS4zNC4xNCAySDcuMjZ6bS44MiAyaDIuOTVjLjMyIDEuMjUuNzggMi40NSAxLjM4IDMuNTZBNy45ODcgNy45ODcgMCAwIDEgOC4wOCAxOXptMi45NS04SDguMDhhNy45ODcgNy45ODcgMCAwIDEgNC4zMy0zLjU2QTE1LjY1IDE1LjY1IDAgMCAwIDExLjAzIDExek0xNSAyMi45NmMtLjgzLTEuMi0xLjQ4LTIuNTMtMS45MS0zLjk2aDMuODJjLS40MyAxLjQzLTEuMDggMi43Ni0xLjkxIDMuOTZ6TTE3LjM0IDE3aC00LjY4Yy0uMDktLjY2LS4xNi0xLjMyLS4xNi0yIDAtLjY4LjA3LTEuMzUuMTYtMmg0LjY4Yy4wOS42NS4xNiAxLjMyLjE2IDIgMCAuNjgtLjA3IDEuMzQtLjE2IDJ6bS4yNSA1LjU2Yy42LTEuMTEgMS4wNi0yLjMxIDEuMzgtMy41NmgyLjk1YTguMDMgOC4wMyAwIDAgMS00LjMzIDMuNTZ6TTE5LjM2IDE3Yy4wOC0uNjYuMTQtMS4zMi4xNC0yIDAtLjY4LS4wNi0xLjM0LS4xNC0yaDMuMzhjLjE2LjY0LjI2IDEuMzEuMjYgMnMtLjEgMS4zNi0uMjYgMmgtMy4zOHoiIGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0ibm9uemVybyIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJBdmVuaXItTWVkaXVtLCBBdmVuaXIiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9IiNGRkYiPjx0c3BhbiB4PSI0MiIgeT0iMjAiPkxlYXJuIE1vcmU8L3RzcGFuPjwvdGV4dD48L2c+PC9zdmc+",y="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNzkiIGhlaWdodD0iMzIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMSAxKSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBkPSJNMTQuNjU0IDguNDExVjUuNTJjMC0uNDY3LS41OS0uNjk1LS45MjgtLjM2M0w5LjU4IDkuMDg1YS40OTUuNDk1IDAgMCAwIDAgLjczNmw0LjEzNyAzLjkyOGMuMzQ5LjMyLjkzOC4wOTMuOTM4LS4zNzR2LTIuODkxYzQuMDcyIDAgNy4yOTIgMy41NDQgNi4zOTYgNy41NTUtLjUxMyAyLjM1My0yLjUyIDQuMjUtNC45ODggNC43MzYtMy44OTYuNzc4LTcuMzY3LTEuNzYxLTcuODkxLTUuMTkyLS4wNzctLjQ5Ny0uNTM1LS44OC0xLjA3LS44OC0uNjU1IDAtMS4xNzkuNTQ5LTEuMDkxIDEuMTcuNjc2IDQuNTUgNS4yMzkgNy45MTggMTAuNDAyIDYuOTY1IDMuNDA1LS42MzIgNi4xNDUtMy4yMzQgNi44MS02LjQ2NyAxLjA4MS01LjMxNy0zLjE3Ni05Ljk2LTguNTY4LTkuOTZ6IiBmaWxsPSIjRkZGIi8+PGNpcmNsZSBzdHJva2U9IiNGRkYiIGN4PSIxNSIgY3k9IjE1IiByPSIxNSIvPjx0ZXh0IGZvbnQtZmFtaWx5PSJBdmVuaXItTWVkaXVtLCBBdmVuaXIiIGZvbnQtc2l6ZT0iMTIiIGZvbnQtd2VpZ2h0PSI0MDAiIGZpbGw9IiNGRkYiPjx0c3BhbiB4PSI0MSIgeT0iMTkiPlJlcGxheTwvdHNwYW4+PC90ZXh0PjwvZz48L3N2Zz4=";var _=function({placement:t,creative:e,eventController:i,pageInfo:r,browserInfo:n}){const s=(0,p.K)(e,p.T.VIDEO_CONTROL),o=(0,p.K)(e,p.T.VIDEO_CLICK_BLOCK),h=(0,p.K)(e,p.T.VIDEO_END_FRAME);let g=null,_=null,C=null;return{render:function(t){g=t.domRefs,_=t.state,C=b(),C.muteButton.hide(),g.video=C.video,g.mainImageCsrEl=C.mainImageCsrEl,g.innerWrap=C.innerWrap,g.outerWrap=C.outerWrap,g.muteButton=C.muteButton,g.playButton=C.playButton,g.endFrame=C.endFrame,g.replay=C.replay,g.learnMore=C.learnMore,g.clickBlock=C.clickBlock,g.endCard&&i.on(m.Ku,T);S(),i.on(m.Q2,(()=>C.muteButton.mute())),i.on(m.ot,(()=>C.muteButton.unmute())),i.on(m.Ku,T),i.on(m.E7,M),i.on(m.NH,E),i.on(m.ql,w),i.on(m.fh,(()=>i.publish(m.q3))),i.on(m.r7,S),e.isAutoplay()&&f.hideAd(g.adWrapperWithDims)}};function S(){!function(){if(e.allowVpaidToHandleClicks()||e.isHighImpact())(0,l.l)(g.clickBlock);else{const{clickBlock:t,outerWrap:e}=g;e.insertBefore(t,e.firstChild)}}(),e.hasClickThrough()?a.Z.setStyle(g.learnMore,"display","block"):a.Z.setStyle(g.learnMore,"display","none")}function w(t){const e=t.width,i=t.height;if(!(_.videoWidth!==e||_.videoHeight!==i))return;const r=g.outerWrap;a.Z.setStyle(r,"width",e+"px"),a.Z.setStyle(r,"height",i+"px"),_.videoWidth=e,_.videoHeight=i}function M(){g.muteButton.hide(),C.playButton.show()}function E(){e.isAutoplay()&&f.showAd(g.adWrapperWithDims),g.muteButton.show(),C.playButton.hide(),a.Z.setStyle(C.endFrame,"display","none")}function T(){g.adchoices&&a.Z.setStyle(g.adchoices,"display","none"),g.revealTrigger&&a.Z.setStyle(g.revealTrigger,"display","none"),g.endCard?(a.Z.setStyle(g.endCard,"display","block"),a.Z.setStyle(g.progressBar,"display","none")):a.Z.setStyle(C.endFrame,"display","block"),C.playButton.hide(),C.muteButton.hide(),g.video.pause()}function b(){const i=function(){const t=document.createElement("video");t.className=d.m,a.Z.setStyle(t,"width","100%"),a.Z.setStyle(t,"height","100%"),t.muted=!0,t.setAttribute("muted","true"),t.setAttribute("playsinline","true");!e.isAutoplay()||r.isMraid()||n.isMicrosoftBrowser||(t.setAttribute("autoplay","true"),t.autoplay=!0);return t.oncontextmenu=()=>!1,t}(),p=new c;a.Z.setStyle(p.el,"z-index",s);const m=new u(t.customOptions.playButtonUrl);a.Z.setStyle(m.el,"z-index",s);const f=function(){const t=document.createElement("IMG");return t.src=v,t.className="tl-seemore",L(t),a.Z.setStyle(t,"padding-top","5%"),t}(),_=function(){const t=document.createElement("IMG");return t.className="tl-replay",t.src=y,L(t),t}(),C=function(t,e){const i=document.createElement("DIV");return a.Z.setStyle(i,"width","100%"),a.Z.setStyle(i,"height","100%"),a.Z.setStyle(i,"background-color","#000"),a.Z.setStyle(i,"opacity",I),a.Z.setStyle(i,"display","none"),a.Z.setStyle(i,"position","absolute"),a.Z.setStyle(i,"top","0"),a.Z.setStyle(i,"cursor","pointer"),a.Z.setStyle(i,"z-index",h),i.appendChild(function(t,e){const i=document.createElement("DIV");a.Z.setStyle(i,"text-align","center"),a.Z.setStyle(i,"position","absolute"),a.Z.setStyle(i,"top","50%"),a.Z.setStyle(i,"left","50%"),a.Z.setStyle(i,"transform","translate(-50%,-50%)"),a.Z.setStyle(i,"width","auto"),n.isIpad&&(a.Z.setStyle(i,"-webkit-transform","translate(-50%,-50%)"),a.Z.setStyle(i,"padding","0"),a.Z.setStyle(i,"bottom","initial"),a.Z.setStyle(i,"width",A+"px"),a.Z.setStyle(i,"max-width","90%"));return i.appendChild(e),i.appendChild(t),i}(t,e)),i}(f,_),S=function(){const t=(0,l.CA)(document.createElement("div"));return t.className="tl-click-block",t.style.setProperty("position","absolute","important"),t.style.setProperty("width","100%","important"),t.style.setProperty("height","100%","important"),t.style.setProperty("top","0","important"),t.style.setProperty("right","0","important"),a.Z.setStyle(t,"z-index",o),t}(),w=function(){const t=document.createElement("div");return t.className="tl-inner-wrap",a.Z.setStyle(t,"position","absolute"),a.Z.setStyle(t,"width","100%"),a.Z.setStyle(t,"height","100%"),a.Z.setStyle(t,"text-align","initial"),t}();w.appendChild(i),w.appendChild(p.el),w.appendChild(m.el);const M=function(){const t=document.createElement("div");return t.className="tl-outer-wrap",a.Z.setStyle(t,"position","absolute"),a.Z.setStyle(t,"max-width","100%"),a.Z.setStyle(t,"max-height","100%"),a.Z.setStyle(t,"width","100%"),a.Z.setStyle(t,"height","100%"),t}();M.appendChild(C),M.appendChild(w);const E=function(){const t=g.mainImageCsrEl||document.createElement("div");return t.className="tl-wrap",a.Z.setStyle(t,"background-color","#000"),a.Z.setStyle(t,"max-width","100%"),a.Z.setStyle(t,"max-height","100%"),a.Z.setStyle(t,"width","100%"),a.Z.setStyle(t,"height","100%"),a.Z.setStyle(t,"cursor","pointer"),t}();return E.appendChild(M),{clickBlock:S,mainImageCsrEl:E,outerWrap:M,innerWrap:w,video:i,playButton:m,muteButton:p,endFrame:C,replay:_,learnMore:f}}function L(t){const e=n.isIE?"auto":"15%";(0,l.CA)(t),a.Z.setStyle(t,"display","block"),a.Z.setStyle(t,"width","initial"),a.Z.setStyle(t,"vertical-align","middle"),a.Z.setStyle(t,"max-width","initial"),a.Z.setStyle(t,"max-height","initial"),a.Z.setStyle(t,"position","initial"),a.Z.setStyle(t,"height",e)}};const I=.75,A=300;class C extends o{constructor(t){super(),this._src=t,this._el=this._createEl()}_createEl(){return this._el=document.createElement("img"),(0,l.CA)(this._el),this._el.className="tl-poster",this._el.src=this._src,a.Z.setStyle(this._el,"position","absolute"),a.Z.setStyle(this._el,"width","100%"),a.Z.setStyle(this._el,"height","100%"),a.Z.setStyle(this._el,"top","0"),a.Z.setStyle(this._el,"right","0"),this._el}}var S=function({creative:t,eventController:e}){const i=t.getParams();let r=null,n=null;return{render:function(t){r=t;const o=r.domRefs.mainImageCsrEl;n=new C(i.image_url),r.domRefs.poster=n.el,o.appendChild(n.el),e.on(m.NH,s),e.on(m.Ku,a)}};function s(){n.hide()}function a(){n.show()}};class w extends o{constructor(t,e="ne"){super(),this._src=t,this._corner=e,this._el=this._createEl()}_createEl(){this._el=document.createElement("img"),(0,l.CA)(this._el),this._el.className="tl-logo",this._el.src=this._src,a.Z.setStyle(this._el,"position","absolute"),a.Z.setStyle(this._el,"max-width","30%"),a.Z.setStyle(this._el,"max-height","30%"),a.Z.setStyle(this._el,"padding","5px"),a.Z.setStyle(this._el,"cursor","pointer"),a.Z.setStyle(this._el,"opacity",this.buttonOpacity),a.Z.setStyle(this._el,"width","auto"),a.Z.setStyle(this._el,"height","auto");const t=this._corner.match(/n/i)?"top":"bottom";this._el.style.setProperty(t,"0","important");const e=this._corner.match(/e/i)?"right":"left";return this._el.style.setProperty(e,"0","important"),this._el}}function M(t,{creative:e,eventController:i}){const r=e.getParams(),n=(0,p.K)(e,p.T.VIDEO_LOGO);let s=null,o=null;return{render:function(e){s=e,o=new w(r.logo_image_url,t),a.Z.setStyle(o.el,"z-index",n),s.domRefs.innerWrap.appendChild(o.el),s.domRefs.videoLogo=o.el,l()&&(o.hide(),i.on(m.z7,d),i.on(m.hs,c),i.on(m.E7,c));i.on(m.Ku,c)}};function l(){return!e.isHighImpact()}function c(){o.hide()}function d(){s.state.isPlaying&&o.show()}}var E=i(440),T=function({creative:t,eventController:e,errorHandler:i}){const r={};let n=null,s=null;const o={};let l=null,c=null;return{render:function(o){function l(){t.isAutoplay()&&(e.once(m.eP,v),e.once(m.js,(()=>f.showAd(c))))}function v(){const{position:t}=getComputedStyle(c);""!==t&&"static"!==t||a.Z.setStyle(c,"position","relative");const r=_(y());c.appendChild(r),e.on(m.ql,(()=>{const{width:t,height:e}=y();a.Z.setStyle(r,"width",t+"px"),a.Z.setStyle(r,"height",e+"px")})),i.fireError("VPAID creative blocked, PSA displayed",i.LOG)}function y(){let{width:t,height:e}=c.getBoundingClientRect();return t=Math.floor(t),e=Math.floor(e),{width:t,height:e}}function _({width:e,height:i}){const r=t.createDynamicImageURL({url:g.ZP.DEFAULT_FALLBACK_URL,imgServerParams:"v=0&cv_version=1",tlImgAddr:"img.3lift.com",placementWidth:e,placementHeight:i,noLogo:!0}),n=document.createElement("IMG");return a.Z.setStyle(n,"width",e+"px"),a.Z.setStyle(n,"height",i+"px"),a.Z.setStyle(n,"top","0px"),a.Z.setStyle(n,"left","0px"),a.Z.setStyle(n,"position","absolute"),a.Z.setStyle(n,"visibility","visible"),a.Z.setStyle(n,"z-index",(0,p.K)(t,p.T.PSA)),n.src=r,n.className=P+"psa",n}({video:n,innerWrap:s,adWrapperWithDims:c}=o.domRefs),Object.assign(r,o),e.on(m.ql,h),e.on(m.fh,u),e.on(m.ZY,d),l()},setBgColorBasedOnDims:v};function d(){!function(t){const i=o.width&&o.height,s=t.width&&t.height;if(i&&s){const i=(0,E.yK)(o,t);e.publish(m.Cn,i);const s=(0,E.rl)(o,i);e.publish(m.p0,s),l=o,c=n,a.Z.setStyle(c,"width",l.width+"px"),a.Z.setStyle(c,"height",l.height+"px"),v(o,t,r.domRefs.mainImageCsrEl)}var l,c}(function(){const t={},e=r.domRefs.adWrapper,i=f.getAllVideoEl(e).find(f.isVideoInUse);i?(t.width=i.videoWidth||b,t.height=i.videoHeight||L):(t.width=b,t.height=L);return t}())}function h(t){t.width&&t.height&&(o.width=t.width,o.height=t.height),d()}function u(){a.Z.setStyle(n,"background-color",l),a.Z.setStyle(s,"z-index","initial")}function v(e,i,r){const n=f.isVideoWiderOrEqThanPlacement(e,i),s=t.isWhitePillarBoxingColorWhite(t.getParams());l=f.getVideoBgColor(n,s),a.Z.setStyle(r,"background-color",l)}};const b=16,L=9,{TL_CLASS_PREFIX:P}=g.ZP;const D=.05;function x({creative:t,eventController:e,errorHandler:i}){let r=null;const n={width:0,height:0},s=(0,l.r3)((function(){const e=function(){const t=h();return t.width/t.height}(),r=function(){const e=t.getVastTag().chooseBestMediaFiles()[0];return e.getAttribute("width")/e.getAttribute("height")}(),n=r*(1-D);if(e>r*(1+D)||e<n){const t="Aspect ratio differs from expected value by at least "+(100*D+"%")+".";i.fireError(t,i.WARNING,{actual:e.toFixed(2),reported:r.toFixed(2)})}}));return{render:function(t){r=t,i=r.domRefs.video,a.Z.setStyle(i,"position","absolute"),a.Z.setStyle(i,"top","0"),a.Z.setStyle(i,"left","0"),e.on(m.ql,o);var i}};function o(i){if(n.width=i.width,n.height=i.height,n.width&&n.height){const i=d();if(i.width||i.height){e.publish(m.Cn,i);const o=(0,E.rl)(n,i),{video:l,innerWrap:h}=r.domRefs;c(i,l),c(i,h),function(t,e){a.Z.setStyle(e,"margin-top",t.y+"px"),a.Z.setStyle(e,"margin-left",t.x+"px")}(o,h),function(){const e=f.isVideoWiderOrEqThanPlacement(n,d()),i=t.isWhitePillarBoxingColorWhite(t.getParams()),s=f.getVideoBgColor(e,i);a.Z.setStyle(r.domRefs.mainImageCsrEl,"background-color",s)}(),s()}}}function c(t,e){a.Z.setStyle(e,"width",t.width+"px"),a.Z.setStyle(e,"height",t.height+"px")}function d(){const{video:{videoHeight:t=0}}=r.domRefs;if(t&&n.height){const t=h();return(0,E.yK)(n,t)}return{width:0,height:0}}function h(){const{video:{videoWidth:t,videoHeight:e}}=r.domRefs;return{width:t,height:e}}}var R=function({placement:t}){return{render:function(e){const i=e.domRefs,r=i.adWrapper,n=t.invCode,s={hiveCta:r.querySelector("."+n+"_cta"),endCard:r.querySelector("."+n+"_end_card"),featureImg:r.querySelector("."+n+"_media_Small"),overlay:r.querySelector("."+n+"_bottom_container"),skin:r.querySelector("."+n+"_outer_container")},a=r.querySelector("."+n+"_end_card_cta");a&&(s.endCardCta=a);const o=r.querySelector("."+n+"_end_card_feature_container");o&&(s.endCardFeature=o);Object.entries(s).forEach((([t,e])=>{e&&(i[t]=e)}))}}};var N=function({templateCode:t,creative:e,errorHandler:i}){const r=e.getParams(),n=(new DOMParser).parseFromString(t.templateDetail.string,"text/html"),s=n.body.querySelectorAll(".tl_ut > div");return{render:function(a){!function(){const a=function(){if(r.feature)return r.splash?k.OVERLAY_SPLASH:r.background?k.SKIN:k.OVERLAY;return i.fireError("Could not determine HIVE variation",i.WARNING),k.OVERLAY}();s.forEach((t=>{t.className.includes("end_card")?(e.getParams().end_card||t.parentNode.removeChild(t),e.getParams().end_card_advertiser&&(!function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}(t),r.end_card=r.end_card_advertiser)):t.classList.contains(a)||t.parentNode.removeChild(t)})),t.templateDetail.string=n.head.innerHTML+n.body.innerHTML}()}}};const k={SKIN:"tl-skin",OVERLAY:"tl-overlay",OVERLAY_SPLASH:"tl-overlay_splash"};var O=function({creative:t,eventController:e}){let i=null;return{render:function(s){i=s.domRefs.video,i.setAttribute("crossorigin","anonymous"),i.appendChild(function(t){const e=document.createElement("track");return e.src=t,e.label="English",e.kind="subtitles",e.srclang="en",e.mode="showing",e.default=!0,e}(t.params.cc_url)),e.on(m.Q2,r),e.on(m.ot,n)}};function r(){i.textTracks[0].mode="showing"}function n(){i.textTracks[0].mode="disabled"}};var Z=i(973),j=i(942);const V=(t,e,i,r,n,s=!1)=>[...n,{el:t,eventType:e,useCapture:s,listener:r.listen(t,e,i,s,!0)}],U=t=>(t.forEach((t=>{t.el.removeEventListener(t.eventType,t.listener,t.useCapture)})),[]);var F=i(696);class B{constructor(t){this._dispatchTarget=t.adWrapper,this._video=t.video}dispatchStart(){this._dispatch("start")}dispatchPause(){this._dispatch("pause",!0)}dispatchResume(){this._dispatch("resume",!0)}dispatchComplete(){this._dispatch("complete")}_dispatch(t,e=!1){const i=document.createEvent("CustomEvent"),r={type:t};if(e&&(r.duration=this._video.currentTime||0),!i.initCustomEvent)throw new F.Z("_dispatch could not call initCustomEvent");i.initCustomEvent(t,!1,!1,r);try{this._dispatchTarget.dispatchEvent(i)}catch(t){throw new F.Z("_dispatch could not dispatch an uninitialized event")}}}var W=i(654);class H{constructor({creative:t,asyncUtil:e,eventController:i,errorHandler:r}){this.creative=t,this.asyncUtil=e,this.eventController=i,this.errorHandler=r,this.vastTag=t.getVastTag(),this.creativeParams=t.getParams(),this.shouldPauseOutOfView=t.shouldVideoPauseOutOfView(),this.noClickThroughWarningOnce=(0,l.r3)((()=>this.noClickThroughWarning())),this.clickListeners=[],this.vpaidClickEvents=[],this.context=null,this.forceClickTimeoutId=null,this.videoEventDispatcher=null}init(t){this.context=t,this.asyncUtil.listen(this.context.domRefs.muteButton.el,"click",(()=>this.muteClick()),!1,!0),this.asyncUtil.listen(this.context.domRefs.mainImageCsrEl,"mouseenter",(()=>this.onMouseenter()),!1,!0),this.asyncUtil.listen(this.context.domRefs.mainImageCsrEl,"mouseleave",(()=>this.onMouseleave()),!1,!0),this.asyncUtil.listen(this.context.domRefs.replay,"click",(()=>this.replay()),!1,!0),this.asyncUtil.listen(this.context.domRefs.video,"timeupdate",(()=>this.onTimeUpdate()),!1,!0),this.asyncUtil.listen(this.context.domRefs.video,"playing",this.context.domRefs.video.play,!1,!0),this.vastTag.isVpaid()?(this.eventController.on(m.ZY,(()=>this.onPlaying())),this.eventController.on(m.GZ,(()=>this.onPlaying())),this.eventController.on(m.o_,(()=>this.onComplete()))):(this.asyncUtil.listen(this.context.domRefs.video,"play",(()=>this.onPlaying()),!1,!0),this.asyncUtil.listen(this.context.domRefs.video,"ended",(()=>this.onComplete()),!1,!0)),this.eventController.on(m.Ku,(()=>this.onEnded())),this.eventController.on(m.Nq,(()=>this.onVpaidLog())),this.eventController.on(m.r7,(()=>this.onVpaidFallback())),this.updateEvents(),this.videoEventDispatcher=new B(this.context.domRefs)}onPlaying(){if(this.context.state.isPlaying=!0,this.context.state.isClickPaused=!1,this.context.state.hasStarted)this.videoEventDispatcher.dispatchResume();else{if(!this.context.state.playInitialized){const t=this.vastTag.isVpaid()?"VPAID ad started early.":"VAST ad started early.";this.errorHandler.fireError(t,this.errorHandler.WARNING)}this.context.state.hasStarted=!0,this.eventController.publish(m.S_),this.videoEventDispatcher.dispatchStart()}this.eventController.publish(m.NH)}onVpaidFallback(){this.resetPlayerState(),this.updateEvents()}updateEvents(){this.removeVpaidClickEvents(),this.clickListeners=U(this.clickListeners),this.creative.allowVpaidToHandleClicks()?(this.addClickListener(this.context.domRefs.innerWrap,(()=>{})),this.addClickListener(this.context.domRefs.mainClickTarget,(()=>this.forceVpaidClick())),this.addVpaidClickEvent(m.jT,(t=>this.onVpaidClickThru(t)))):(this.addClickListener(this.context.domRefs.endFrame,(()=>this.onClickThrough())),this.addClickListener(this.context.domRefs.learnMore,(()=>this.onClickThrough())),this.addVpaidClickEvent(m.Wh,(()=>this.onClickThrough())))}addClickListener(t,e){this.clickListeners=V(t,"click",e,this.asyncUtil,this.clickListeners)}addVpaidClickEvent(t,e){this.vpaidClickEvents.push({eventName:t,eventHandler:e}),this.eventController.on(t,e)}removeVpaidClickEvents(){this.vpaidClickEvents.forEach((t=>{this.eventController.off(t.eventName,t.eventHandler)}))}forceVpaidClick(){if(this.context.state.isEnded)return;this.forceClickTimeoutId=setTimeout(this.sendForceClickFailedError,1e3);const t=this.context.domRefs.innerWrap.getBoundingClientRect(),e=t.x+t.width/2,i=t.y+t.height/2;document.elementFromPoint(e,i).click()}sendForceClickFailedError(){this.errorHandler.fireError("Forcing click to vpaid failed.",this.errorHandler.WARNING)}onVpaidClickThru(t){clearTimeout(this.forceClickTimeoutId),this.clickThrough(t),this.eventController.publish(m.cF)}getClickThroughUrl(){const t=this.vastTag.getVastClickThroughUrl();return this.creativeParams.clickthrough_url||t}onClickThrough(){const t=this.getClickThroughUrl();t?this.clickThrough(t):this.noClickThroughWarningOnce(),this.eventController.publish(m.cF)}clickThrough(t){(0,W.l)(t),this.mute(),this.shouldPauseOutOfView&&this.context.state.isPlaying&&this.pause()}noClickThroughWarning(){this.errorHandler.fireError("No clickthrough_url in creative params and no <ClickThrough> in VAST",this.errorHandler.LOG)}onVpaidLog(t="Unknown VPAID AdLog"){this.errorHandler.fireError(t,this.errorHandler.WARNING)}play(){this.context.state.isPlayerReady&&(this.context.state.playInitialized=!0,this.context.player.play())}pause(){this.context.state.isPlaying=!1,this.context.player.pause(),this.eventController.publish(m.E7),this.videoEventDispatcher.dispatchPause()}muteClick(){this.context.player.isMuted()?(this.unmute(),this.context.state.unmutedByUser=!0):(this.mute(),this.context.state.unmutedByUser=!1)}mute(){this.context.player.mute(),this.eventController.publish(m.Q2)}unmute(){this.context.player.unmute(),this.eventController.publish(m.ot)}onEnded(){this.context.state.isEnded=!0,this.resetPlayerState()}onComplete(){this.videoEventDispatcher.dispatchComplete()}onTimeUpdate(){const{video:t,progressBar:e}=this.context.domRefs,i=t.currentTime/t.duration*100;e&&e.style.setProperty("width",i+"%")}resetPlayerState(){this.context.state.isPlayerReady=!1,this.context.state.hasStarted=!1,this.context.state.isPlaying=!1,this.context.state.unmutedByUser=!1,this.context.state.playInitialized=!1}replay(){this.context.state.isEnded=!1,this.context.state.isReplay=!0,this.context.player.reset()}onMouseenter(){this.eventController.publish(m.z7)}onMouseleave(){this.eventController.publish(m.hs)}unmuteOnReplay(){this.context.state.isReplay&&this.unmute()}}class z extends H{constructor({analytics:t,browserInfo:e,placement:i,creative:r,pageInfo:n,positionService:s,eventController:a,asyncUtil:o,viewabilityController:l}){super(...arguments),(0,j.Z)(this,"eventController",void 0),(0,j.Z)(this,"creative",void 0),(0,j.Z)(this,"context",{}),(0,j.Z)(this,"autoplayEl",void 0),(0,j.Z)(this,"autoplayState",{audioChangedByScroll:!1,fireAudioPixel:!1,hasStarted:!1,isClickPaused:!1,isEnded:!1,isPlaying:!1,unmutedByUser:!1}),(0,j.Z)(this,"twoSecondTimeout",null),(0,j.Z)(this,"isSafeFrame",void 0),(0,j.Z)(this,"placement",void 0),(0,j.Z)(this,"positionService",void 0),(0,j.Z)(this,"asyncUtil",void 0),(0,j.Z)(this,"clickListeners",[]),(0,j.Z)(this,"prevInView",!1),(0,j.Z)(this,"vpaidBlocked",!1),(0,j.Z)(this,"fallbackTimeoutId",null),(0,j.Z)(this,"hasPlayed",!1),this.analytics=t,this.browserInfo=e,this.placement=i,this.creative=r,this.positionService=s,this.eventController=a,this.asyncUtil=o,this.viewabilityController=l,this.isSafeFrame=n.isSafeFrame()}init(t){super.init(t),this.context=t,this.autoplayState=t.state,this.autoplayEl=t.domRefs.mainImageCsrEl,this.context.domRefs.playButton.hide(),this.eventController.on(m.fh,this.onPlayerReady.bind(this)),this.eventController.on(m.r7,this.updateClickListeners.bind(this)),this.eventController.on(m.NH,this.onPlay.bind(this)),this.eventController.on(m.eP,this.setVpaidblocked.bind(this)),this.eventController.on(m.r7,this.cancelFallback),this.updateClickListeners(),this.setShouldPlayListener(),this.asyncUtil.listen(this.context.domRefs.video,"pause",(()=>this.onPause()),!1,!0),this.setVisibilityChangeListener(),this.setFallbackTimeout.bind(this),this.setFallbackTimeout()}setFallbackTimeout(){this.viewabilityController.listenForOnePxAdViewability((()=>{let t=3500;this.browserInfo.isMobile&&(t=6e3),this.hasPlayed||this.fallbackTimeoutId||(this.fallbackTimeoutId=this.asyncUtil.timeoutWrap((()=>{this.eventController.publish(m.P7)}),t))}))}onPlay(){this.initTwoSecondViewable(),this.cancelFallback()}cancelFallback(){this.hasPlayed=!0,clearTimeout(this.fallbackTimeoutId)}onPause(){this.autoplayState.isPlaying=!1}setShouldPlayListener(){this.viewabilityController.setListener({condition:()=>this._isInView(),handler:()=>this.analytics.playAttempt()})}setVisibilityChangeListener(){this.browserInfo.isIos&&this.asyncUtil.listen(document,"visibilitychange",this.onVisibilityChange.bind(this),!1,!0)}onVisibilityChange(){if("visible"===document.visibilityState){const t=1e3;this.asyncUtil.timeoutWrap((()=>{this.autoplayScrollListener()}),t)}else this.prevInView=!1}updateClickListeners(){this.clickListeners=U(this.clickListeners),this.creative.allowVpaidToHandleClicks()||this.addClickListeners()}addClickListeners(){const{adWrapper:t,mainImageCsrEl:e}=this.context.domRefs,i=this.videoClick.bind(this);this.addClickListener(e,i),this.creative.isHighImpact()||this.addClickListener(t,i)}addClickListener(t,e){this.clickListeners=V(t,"click",e,this.asyncUtil,this.clickListeners)}onPlayerReady(){this.autoplayState.isReplay||this.initState(),this.playIfInViewOrReplay(),this.eventController.on(m.nP,this.positionUpdateHandler.bind(this))}positionUpdateHandler(){return(0,l.P2)((()=>this.autoplayScrollListener()),150)()}setVpaidblocked(){this.vpaidBlocked=!0}playIfInViewOrReplay(){(this._isInView()||this.autoplayState.isReplay)&&(super.play(),this.hasPlayed=!0)}initTwoSecondViewable(){this._isInView()&&this.autoplayState.isPlaying&&null===this.twoSecondTimeout&&this.setTwoSecondViewable()}setTwoSecondViewable(){this.twoSecondTimeout=this.asyncUtil.timeoutWrap((()=>{this.eventController.publish(m.mA),this.clearTwoSecondViewable()}),2e3)}clearTwoSecondViewable(){clearTimeout(this.twoSecondTimeout),this.twoSecondTimeout=null}autoplayScrollListener(){if(this.autoplayState.isEnded)return;const t=this._isInView();t&&!this.prevInView?this._onEnterView():!t&&this.prevInView&&this._onExitView(),this.prevInView=t}initState(){this.context.domRefs.muteButton.mute(),this.context.player.mute()}videoClick(){this.autoplayState.isPlaying||this.autoplayState.isEnded?this.eventController.publish(m.Wh):(this.eventController.publish(m.Mz),super.play(),super.unmute())}_isInView(){return this.getPctInView()>=.5}getPctInView(){const{postBidIpvAutoplay:t}=this.placement.customOptions;return!this.isSafeFrame||t?this.positionService.getElPctInView(this.autoplayEl):this.positionService.getAdPctInView()}_onEnterView(){this.initTwoSecondViewable(),this.autoplayState.unmutedByUser&&super.unmute(),this.autoplayState.isPlaying||this.vpaidBlocked||super.play()}_onExitView(){this.clearTwoSecondViewable(),this.creative.shouldVideoPauseOutOfView()&&super.pause(),this.context.player.isMuted()||super.mute()}}class G extends H{constructor(...t){super(...t),(0,j.Z)(this,"context",{})}init(t){super.init(t),this.context=t;const e=this.context.domRefs;this.asyncUtil.listen(e.adWrapper,"click",(()=>{this.eventController.publish(m.Wh)}),!1,!0),this.asyncUtil.listen(e.mainImageCsrEl,"click",(()=>this.videoClick()),!1,!0),this.eventController.on(m.fh,(()=>this.onPlayerReady()))}onPlayerReady(){this.initState(),this.playIfReplay()}videoClick(){this.context.state.isPlaying?(this.eventController.publish(m.Lc),super.pause()):(this.eventController.publish(m.Mz),super.play())}initState(){super.unmute()}playIfReplay(){this.context.state.isReplay&&super.play()}}class Y{constructor({eventController:t,asyncUtil:e}){(0,j.Z)(this,"context",null),this.eventController=t,this.asyncUtil=e}init(t){this.context=t,this.asyncUtil.listen(t.domRefs.videoLogo,"click",(()=>this.onLogoClick()),!1,!0)}onLogoClick(){this.eventController.publish(m.Wh)}}class Q extends H{constructor({eventController:t}){super(...arguments),(0,j.Z)(this,"context",null),this.eventController=t}init(t){this.context=t,this.eventController.on(m.oU,(()=>super.unmuteOnReplay()))}}class q extends H{constructor({eventController:t}){super(...arguments),(0,j.Z)(this,"context",null),this.eventController=t}init(t){this.context=t,this.eventController.on(m.S_,(()=>super.unmuteOnReplay()))}}class J{constructor({analytics:t,asyncUtil:e,creative:i}){this.context=null,this.analytics=t,this.asyncUtil=e,this.creative=i}init(t){const e=t.domRefs;Object.entries(g.Wg).forEach((([t,i])=>{const r=e[t],n=()=>{const t=this.creative.params.clickthrough_url||this.creative.getVastTag().getVastClickThroughUrl();(0,W.l)(t),this.analytics.click({assetTypeId:i})};r&&(this.asyncUtil.listen(r,"click",n,"videoLogo"===t,!0),a.Z.setStyle(r,"cursor","pointer"))}))}}var X=i(601),K=i(849);const $=["impPix"],tt=["start","creativeView","firstQuartile","midpoint","thirdQuartile","complete","videoClick"];class et{constructor(t){this.analytics=t.analytics,this.creative=t.creative,this.eventController=t.eventController,this.firePix=t.firePix,this.placement=t.placement,this.asyncUtil=t.asyncUtil,this.vastTag=t.vastTag,this.viewability=this.creative.params.viewability||{},this.context=null,this.moatAnalytics=null,this.pctInView=0,this.hasFired=this._createHasFired()}init(t){this.context=t,this.eventController.on(m.Q2,this._ifStarted((()=>this.fireMute()))),this.eventController.on(m.ot,this._ifStarted((()=>this.fireUnmute()))),this.eventController.on(m.Lc,(()=>this.firePause())),this.eventController.on(m.Mz,(()=>this._ifStarted((()=>this._onClickPlay())))),this.eventController.on(m.cF,(()=>this._fireVastClickTracking())),this.eventController.on(m.r7,(()=>this._clearHasFiredCreative())),this.eventController.once(m.mA,(()=>this.analytics.twoSecondViewable())),this._fireVideoType(),this.viewability.moat&&this._setMoatAnalytics()}_createHasFired(){const t={};et.setFieldsFalse($,t);const e={};return et.setFieldsFalse(tt,e),{...t,...e}}_clearHasFiredCreative(){et.setFieldsFalse(tt,this.hasFired)}static setFieldsFalse(t,e){t.forEach((t=>{e[t]=!1}))}_fireVideoType(){const t=this.vastTag.isVpaid()?d.Z.type.vpaid:d.Z.type.vast;this.analytics.fireEB(K.T4,{vt:t})}_setMoatAnalytics(){this.moatAnalytics=new X.Z({auctionID:this.firePix.getAuctionId(),creative:this.creative,placement:this.placement,context:this.context,asyncUtil:this.asyncUtil}),this.eventController.on(m.RU,(()=>{this.moatAnalytics.init(this.context.domRefs.outerWrap,this.vastTag.getDurationMS())}))}firePause(){this.fireVastTrackingEvent("pause")(),this.analytics.fireEEE("click_paused")}videoStart(){this.eventController.publish(m.Om),this.fireVastImpPix(),this.fireVastTrackingEvent("start")(),this.fireVastTrackingEvent("creativeView")(),this.videoStartTL()}videoStartTL(){this.analytics.play(),this.analytics.duration(1,this.context.player.getDurationMS(),this.vastTag.getDurationMS())}fireUnmute(){this.fireVastTrackingEvent("unmute")(),this.analytics.fireEEE("unmute")}fireMute(){this.fireVastTrackingEvent("mute")(),this.analytics.fireEEE("mute")}_ifStarted(t){return(...e)=>{this.context.state.hasStarted&&t(...e)}}fireComplete(){this.eventController.publish(m.rp);const t=this.context.player.getDurationMS(),e=this.vastTag.getDurationMS(),i=t&&e?Math.max(t,e):t||e;this.analytics.duration(i,t,e,this.pctInView),this.fireVastTrackingEvent("complete")()}fireFirstQuartile(){this.eventController.publish(m.VQ),this.fireVastTrackingEvent("firstQuartile")(),this.fireQuartile(1/4)}fireMidpoint(){this.eventController.publish(m.ck),this.fireVastTrackingEvent("midpoint")(),this.fireQuartile(.5)}fireThirdQuartile(){this.eventController.publish(m.sk),this.fireVastTrackingEvent("thirdQuartile")(),this.fireQuartile(3/4)}fireQuartile(t){const e=this.context.player.getDurationMS(),i=this.vastTag.getDurationMS(),r=e||i,n=Math.ceil(r*t);this.analytics.duration(n,e,i)}fireDurationMS(t){const e=this.context.player.getDurationMS(),i=this.vastTag.getDurationMS();this.pctInView=this.context.state.pctInView,this.analytics.duration(t,e,i,this.pctInView)}fireVastImpPix(){this.hasFired.impPix||(this.hasFired.impPix=!0,this.vastTag.getImpressionTrackers().forEach((t=>{this.firePix.fire(this.replaceMacros(t.textContent))})))}_fireVastClickTracking(){this.hasFired.videoClick||(this.hasFired.videoClick=!0,this.vastTag.getVideoClickTrackers().forEach((t=>{this.firePix.fire(t.textContent)})),this.analytics.click())}_onClickPlay(){this.fireVastTrackingEvent("resume")()}fireVastTrackingEvent(t){const e=this.firePix.fire.bind(this.firePix),i=et.eventMatch.bind(null,t),r=this.vastTag.getAssortedTrackers().filter(i).map((function(t){return t.textContent})).map(this.replaceMacros.bind(this));return()=>{this.hasFired[t]||(!1===this.hasFired[t]&&(this.hasFired[t]=!0),this.viewability.moat&&this.moatAnalytics.track(t),r.forEach(e))}}static eventMatch(t,e){return e.getAttribute("event")===t}replaceMacros(t){const e=this.context.player.getCurrentSrc(),i=this.context.player.getCurrentTime(),r=(0,l.Ej)(Math.round(1e3*i));let n=t.replace("[CONTENTPLAYHEAD]",encodeURIComponent(r));return n=n.replace("[CACHEBUSTING]",(0,l.Qt)(8)),n=n.replace("[ASSETURI]",encodeURIComponent(e)),n=n.replace("[TL_AUCTION_ID]",this.firePix.getAuctionId()),n}}class it{constructor({asyncUtil:t,track:e}){this.asyncUtil=t,this.track=e,this.eventCount=0,this.started=!1}start(){this.started=!0,this.eventCount++,this.scheduleUpdate(this.eventCount),this.track()}stop(){this.eventCount++,this.update(),this.started=!1}scheduleUpdate(t){this.asyncUtil.timeoutWrap((()=>{t===this.eventCount&&(this.update(),this.scheduleUpdate(t))}),1e3)}update(){this.started&&this.track()}}class rt extends et{constructor(t){super(t),this.context=null,this.durationController=null,this.progressTrackers=null}init(t){super.init(t),this.durationController=new it({asyncUtil:this.asyncUtil,track:()=>{super.fireDurationMS(this.context.player.getCurrentTimeMS())}});const e=this.context.domRefs.video;this.asyncUtil.listen(e,"timeupdate",(0,l.P2)((()=>this._checkQuartiles()),500)),this.asyncUtil.listen(e,"timeupdate",(0,l.P2)((()=>this._checkProgress()),500)),this.eventController.onWithOffEvent(m.NH,m.RB,(()=>this._onPlay())),this.eventController.onWithOffEvent(m.S_,m.RB,(()=>this._onFirstPlay())),this.eventController.onWithOffEvent(m.E7,m.RB,(()=>this._onPause())),this.eventController.onWithOffEvent(m.Ku,m.RB,(()=>this._onEnded()))}_onFirstPlay(){super.videoStart()}_onPlay(){this.durationController.start()}_onPause(){this.durationController.stop()}_onEnded(){this.durationController.stop(),super.fireComplete()}_checkQuartiles(){const t=this.context.player.getDurationMS(),e=this.context.player.getCurrentTimeMS();t&&e&&(e>t*(1/4)&&!this.hasFired.firstQuartile&&super.fireVastTrackingEvent("firstQuartile")(),e>.5*t&&!this.hasFired.midpoint&&super.fireVastTrackingEvent("midpoint")(),e>t*(3/4)&&!this.hasFired.thirdQuartile&&super.fireVastTrackingEvent("thirdQuartile")())}_checkProgress(){this.progressTrackers=this.progressTrackers||this._getProgressTrackers();const t=1e3*this.context.player.getCurrentTime();this.progressTrackers.forEach((e=>this._fireProgress(t,e)))}_fireProgress(t,e){e.hasFired||t>e.offset&&(this.firePix.fire(super.replaceMacros(e.src)),e.hasFired=!0)}_getProgressTrackers(){return this.vastTag.getAssortedTrackers().filter(et.eventMatch.bind(null,"progress")).map((t=>this._transformProgressTrackers(t)))}_transformProgressTrackers(t){const e=t&&t.textContent,i=t.getAttribute("offset");if(!e||!i)return{};return{src:e,offset:i.indexOf("%")>-1?rt._pctToMS(i,this.context.player.getDurationMS()):(0,l.LB)(i)}}static _pctToMS(t,e){return parseInt(t,10)/100*e}}class nt extends et{constructor(t){super(t),this.errorHandler=t.errorHandler,this.context=null,this.receivedAdVideoStart=!1}init(t){super.init(t),this.eventController.on(m.ZY,(()=>this.onAdStarted())),this.eventController.on(m.h7,(()=>this.onAdImpression())),this.eventController.on(m.oU,(()=>this.onAdVideoStart())),this.eventController.on(m.wK,(()=>this.onAdVideoFirstQuartile())),this.eventController.on(m.re,(()=>this.onAdVideoMidpoint())),this.eventController.on(m.yK,(()=>this.onAdVideoThirdQuartile())),this.eventController.on(m.o_,(()=>this.onAdVideoComplete()))}onAdStarted(){super.fireVastTrackingEvent("creativeView")()}checkRender(){const t=this.context.domRefs.mainImageCsrEl;try{const e=f.getAllVideoEl(t),i=e.find(f.isVideoInUse);if(e.length>0&&!i)return void this.errorHandler.fireError("Video elements found but none are being used (likely playing in an iframe)",this.errorHandler.WARNING);const[r,n]=nt.getElementRects(i,t);i.classList.contains(d.m)||this.errorHandler.fireError("Video element is not our "+d.m+" element (likely playing in a VPAID-generated player)",this.errorHandler.WARNING),nt.isRectOutside(r,n)&&this.errorHandler.fireError("Video outside of CSR div",this.errorHandler.WARNING,{videoElementDims:r,csrDivDims:n}),nt.isRectBigger(r,n)&&this.errorHandler.fireError("Video larger than CSR div",this.errorHandler.WARNING,{videoElementDims:r,csrDivDims:n})}catch(t){this.errorHandler.fireError("Failed checking video warnings",this.errorHandler.ERROR,{message:t.message,stack:t.stack})}}static isRectOutside(t,e){return t.left+3<e.left||t.right>e.right+3||t.top+3<e.top||t.bottom>e.bottom+3}static isRectBigger(t,e){return t.width>e.width+3||t.height>e.height+3}static getElementRects(...t){return[].slice.call(t).map((t=>t.getBoundingClientRect()))}onAdImpression(){super.fireVastImpPix()}onAdVideoStart(){this.receivedAdVideoStart=!0,super.fireVastTrackingEvent("start")(),super.videoStartTL(),this.checkRender()}onAdVideoFirstQuartile(){this.receivedAdVideoStart||this.errorHandler.fireError("AdVideoFirstQuartile emitted before AdVideoStart",this.errorHandler.WARNING),super.fireFirstQuartile()}onAdVideoMidpoint(){super.fireMidpoint()}onAdVideoThirdQuartile(){super.fireThirdQuartile()}onAdVideoComplete(){super.fireComplete()}}class st{constructor({vastTag:t},{firePix:e,asyncUtil:i,eventController:r}){(0,j.Z)(this,"video",null),(0,j.Z)(this,"firePix",null),(0,j.Z)(this,"vastTag",null),(0,j.Z)(this,"eventController",null),(0,j.Z)(this,"context",{}),(0,j.Z)(this,"asyncUtil",null),(0,j.Z)(this,"RESOURCE_TIMEOUT_MS",8e3),this.firePix=e,this.vastTag=t,this.eventController=r,this.asyncUtil=i}init(t={state:{}}){this.context=t,this.setIsPlayerReady(!1),this.video=this.context.domRefs.video}getIsPlayerReady(){return this.context.state.isPlayerReady}setIsPlayerReady(t){this.context.state.isPlayerReady=t,t&&this.eventController.publish(m.fh)}getHasStarted(){return this.context.state.hasStarted}getVideoWidth(){return this.context.state.videoWidth}getVideoHeight(){return this.context.state.videoHeight}setNativeVideoWidth(t){this.context.state.nativeVideoWidth=t}setNativeVideoHeight(t){this.context.state.nativeVideoHeight=t}isMuted(){return!this.video||!!this.video.muted}}var at=i(906);const ot=1e3;class lt extends st{init(t){super.init(t),this.asyncUtil.listen(this.video,"ended",(()=>this.onEnded())),this.mediaFiles=this.vastTag.chooseBestMediaFiles(),this.loadVideo(),this.listenForVideoErrors(this.mediaFiles)}compareDuration(){Math.abs(this.vastTag.getDurationMS()-this.getDurationMS())>ot&&this.eventController.publish(m.TZ,at.Z.VAST_UNEXPECTED_DURATION_ERROR),this.video.removeEventListener("loadedmetadata",this.durationMetadataListener)}loadVideo(){this.asyncUtil.listen(this.video,"loadedmetadata",(()=>{this.setIsPlayerReady(!0)})),this.mediaFiles.forEach((t=>{this.video.appendChild(lt.createSource(t))}))}static createSource(t){const e=document.createElement("source");return e.src=t.textContent,e.type=t.getAttribute("type"),e}listenForVideoErrors(t){this.durationMetadataListener=this.asyncUtil.listen(this.video,"loadedmetadata",(()=>this.compareDuration()));if(!this.checkCanPlayType(t))return;let e;const i=(t,i=at.Z.VAST_LINEAR_ERROR)=>{t.target.getAttribute("src")&&"error"===t.type&&(this.eventController.publish(m.TZ,i),clearTimeout(e))};this.asyncUtil.listen(this.video,"loadstart",(()=>{e||(e=setTimeout((()=>{this.eventController.publish(m.TZ,at.Z.VAST_MEDIA_LOAD_TIMEOUT)}),this.RESOURCE_TIMEOUT_MS))}));[].slice.call(this.video.querySelectorAll("source")).forEach((t=>{this.asyncUtil.listen(t,"error",(t=>{i(t,at.Z.VAST_MEDIA_NOT_FOUND)}))})),this.metadataListener=this.asyncUtil.listen(this.video,"loadedmetadata",(()=>this.clearTimeOutListener(e))),this.video.addEventListener("error",i),this.asyncUtil.listen(this.video,"canplay",(()=>{this.video.removeEventListener("error",i)}))}clearTimeOutListener(t){clearTimeout(t),this.video.removeEventListener("loadedmetadata",this.metadataListener)}checkCanPlayType(t=[]){if(!this.video)return!1;const e=t.find((t=>""!==this.video.canPlayType(t.getAttribute("type"))));return e||this.eventController.publish(m.TZ,at.Z.VAST_MEDIA_ASSET_MISMATCH),!!e}mute(){this.getIsPlayerReady()&&(this.video.muted=!0)}unmute(){this.getIsPlayerReady()&&(this.video.muted=!1)}play(){this.getIsPlayerReady()&&this.video.play()}pause(){this.getIsPlayerReady()&&this.video.pause()}onEnded(){this.eventController.publish(m.Ku),this.eventController.publish(m.ly)}reset(){this.video.currentTime=0,this.setIsPlayerReady(!0)}getCurrentTime(){return this.video.currentTime}getCurrentTimeMS(){return Math.round(this.video.currentTime*ot)}getCurrentSrc(){return this.video.currentSrc}getDurationMS(){return Math.round(this.video.duration*ot)}}var ct=i(85);class dt extends ct.ZP{constructor(t){super(t),this.priority=ct.jT.FIRST}}class ht extends st{constructor(...t){super(...t),(0,j.Z)(this,"innerWrap",null),(0,j.Z)(this,"vpaidUrl",null),(0,j.Z)(this,"vpaidFrame",null),(0,j.Z)(this,"vpaidApi",null),(0,j.Z)(this,"hasAttemptedFallback",!1),(0,j.Z)(this,"context",{}),(0,j.Z)(this,"mediaFile",null),(0,j.Z)(this,"vpaidOnLoadErrorHandler",null),(0,j.Z)(this,"vpaidOnLoadHandler",null)}init(t={}){try{super.init(t),this.innerWrap=this.context.domRefs.innerWrap,this.setState(),this.eventController.on(m.ql,this.resizeVideo.bind(this)),this.eventController.once(m.a8,this.loadVpaid.bind(this)),this.eventController.on(m.RB,(()=>{this.hasAttemptedFallback=!0}));const e=new dt(this.eventController);e.setCallback((()=>this.attemptFallback(e))),t.fallbackManager.addManager(e)}catch(t){this.onAdError(t)}}setState(){this.mediaFile=this.vastTag.chooseBestMediaFiles()[0],this.vpaidUrl=this.mediaFile.textContent}loadVpaid(t){this.vpaidFrame=function(){const t=document.createElement("iframe");return t.src="about:blank",t.style.display="none",document.body.appendChild(t),t}(),this.loadVpaidScript(this.vpaidUrl,t),this.checkCanPlayType([this.mediaFile])}checkCanPlayType(t=[]){if(!this.video)return!1;const e={"application/javascript":!0,"application/x-javascript":!0},i=t.find((t=>{var i;return"vpaid"===(null===(i=t.getAttribute("apiFramework"))||void 0===i?void 0:i.toLowerCase())&&e[t.getAttribute("type")]}));return i||this.eventController.publish(m.TZ,at.Z.VAST_MEDIA_ASSET_MISMATCH),!!i}unmute(){this.getIsPlayerReady()&&(this.vpaidApi.setAdVolume(1),this.video.muted=!1)}mute(){this.getIsPlayerReady()&&(this.vpaidApi.setAdVolume(0),this.video.muted=!0)}isMuted(){return this.vpaidApi&&this.vpaidApi.getAdVolume?0===this.vpaidApi.getAdVolume():super.isMuted()}play(){this.getIsPlayerReady()&&(this.getHasStarted()||this.vpaidApi.startAd(),this.vpaidApi.resumeAd())}pause(){this.getIsPlayerReady()&&this.vpaidApi.pauseAd()}loadVpaidScript(t,e){Math.floor(1e9*Math.random());this.vpaidOnLoadHandler=this.getHandleMessage(e),this.vpaidOnLoadErrorHandler=this.getHandleErrorMessage(t);const i='<!DOCTYPE html><html lang="en><head><meta charset="UTF-8"></head><body><script onerror="this.vpaidOnLoadErrorHandler" type="text/javascript" src="'+t+'"><\/script><div class="ad-element"></div></body></html>';try{this.vpaidFrame.contentWindow.document.open(),this.vpaidFrame.contentWindow.document.write(i),this.vpaidFrame.contentWindow.document.close(),"complete"===this.vpaidFrame.contentDocument.readyState||"loaded"===this.vpaidFrame.contentDocument.readyState?this.vpaidOnLoadHandler():this.vpaidFrame.contentWindow.addEventListener("DOMContentLoaded",this.vpaidOnLoadHandler)}catch(t){this.eventController.publish(m.TZ,at.Z.VAST_VPAID_ERROR,{message:"loadVpaidScript function threw "+t.message})}}getHandleErrorMessage(){return()=>{this.eventController.publish(m.TZ,at.Z.VAST_MEDIA_NOT_FOUND)}}getHandleMessage(t){const e=setTimeout((()=>{this.eventController.publish(m.TZ,at.Z.VAST_MEDIA_LOAD_TIMEOUT)}),this.RESOURCE_TIMEOUT_MS);return()=>{clearTimeout(e),this.vpaidFrame.contentWindow.removeEventListener("DOMContentLoaded",this.vpaidOnLoadHandler),this.getApiAndInitAd(t)}}getApiAndInitAd(t){let e=this.getVpaidApi();if(e)this.initVpaidAd(e,t);else{const i=2e3;this.asyncUtil.timeoutWrap((()=>{e=this.getVpaidApi(),e?this.initVpaidAd(e,t):this.eventController.publish(m.TZ,at.Z.VAST_VPAID_ERROR,{message:"getVPAIDAd function could not be found on vpaidFrame window"})}),i)}}getVpaidApi(){const{getVPAIDAd:t}=this.vpaidFrame.contentWindow;return"function"==typeof t?t():null}setVpaidApi(t){this.vpaidApi=t}initVpaidAd(t,e={}){this.setVpaidApi(t),this.vpaidApi.handshakeVersion("2.0"),this.subscribeToAll(this.vpaidApi),this.vpaidApi.initAd(e.width||this.getVideoWidth(),e.height||this.getVideoHeight(),"normal",400,this.getCreativeData(),this.getEnvironmentVars())}getCreativeData(){const t=this.vastTag.getAdParameters();return t?{AdParameters:t}:{}}getEnvironmentVars(){return{slot:this.innerWrap,videoSlot:this.video}}subscribeToAll(t){this.vpaidApi=t;const e={AdStarted:this.onAdStarted,AdStopped:this.onAdStopped,AdSkipped:void 0,AdLoaded:this.onAdLoaded,AdLinearChange:void 0,AdSizeChange:void 0,AdExpandedChange:void 0,AdSkippableStateChange:void 0,AdDurationChange:void 0,AdRemainingTimeChange:void 0,AdVolumeChange:void 0,AdImpression:this.onAdImpression,AdClickThru:this.onAdClickThru,AdInteraction:void 0,AdVideoStart:this.onAdVideoStart,AdVideoFirstQuartile:this.onAdVideoFirstQuartile,AdVideoMidpoint:this.onAdVideoMidpoint,AdVideoThirdQuartile:this.onAdVideoThirdQuartile,AdVideoComplete:this.onAdVideoComplete,AdUserAcceptInvitation:void 0,AdUserMinimize:void 0,AdUserClose:void 0,AdPaused:void 0,AdPlaying:this.onAdPlaying,AdError:this.onAdError,AdLog:this.onAdLog};Object.keys(e).forEach((t=>{if(e[t]){const i=e[t].bind(this);this.vpaidApi.subscribe(i,t,this.vpaidApi)}}))}resizeVideo(t){this.getIsPlayerReady()&&(t.width===this.vpaidApi.getAdWidth()&&t.height===this.vpaidApi.getAdHeight()||this.vpaidApi.resizeAd(t.width,t.height,"normal"))}onAdLoaded(){this.setIsPlayerReady(!0)}onAdStopped(){this.eventController.publish(m.Ku)}onAdStarted(){this.context.analytics.videoStart(),this.eventController.publish(m.ZY)}onAdPlaying(){this.eventController.publish(m.GZ)}onAdImpression(){this.eventController.publish(m.h7)}onAdClickThru(t,e,i){this.mute(),this.eventController.publish(m.jT,t&&i?t:void 0)}onAdVideoStart(){this.eventController.publish(m.oU)}onAdVideoFirstQuartile(){this.eventController.publish(m.wK)}onAdVideoMidpoint(){this.eventController.publish(m.re)}onAdVideoThirdQuartile(){this.eventController.publish(m.yK)}onAdVideoComplete(){this.eventController.publish(m.o_)}static getActualMessage(t){let e=t;return t.message?e=t.message:"string"!=typeof t&&(e=JSON.stringify(t)),e}static getTruncatedMessage(t){let e=t.split(/\n/g)[0],i=e.split("AdError")[1]?e.split("AdError")[1].substring(0,4):null;return e=e.split("Error"),e=e[e.length-1],e.length>1?(e.substring(0,4)===i&&(i=""),e=i?"VPAID Error"+i+e:"VPAID Error:"+e,e):t}onAdError(t=""){const e=this.vastTag.getAdSystem(),i={vpaidUrl:this.vpaidUrl,vendor:e},r=ht.getActualMessage(t),n={message:ht.getTruncatedMessage(r),diagnosticContext:i};this.eventController.publish(m.TZ,at.Z.VAST_VPAID_ERROR,n),this.handleBlockingErrors(r),this.eventController.publish(m.P7)}handleBlockingErrors(t){["ad blocked","adblocked","initad"].some((e=>t.toLowerCase().includes(e)))?this.eventController.publish(m.eP):this.eventController.publish(m.js)}onAdLog(t){this.eventController.publish(m.Nq,t)}reset(){this.loadVpaid({width:this.getVideoWidth(),height:this.getVideoHeight()})}getCurrentTime(){return 0}getCurrentTimeMS(){return 0}getCurrentSrc(){return 0}getDurationMS(){return 0}attemptFallback(t){if(this.hasAttemptedFallback)return;this.hasAttemptedFallback=!0;this.vastTag.useNextVpaidCreative()&&(this.eventController.publish(m.r7),this.setState(),this.reset(),t.verifySuccess())}cancelFallback(){this.hasAttemptedFallback=!0}}var ut={create:function(t,e=[],i=[]){const{creative:a,placement:o,analytics:l,firePix:c,errorHandler:d,browserInfo:h,eventController:u,asyncUtil:p,fallbackManager:m}=t,g=a.getVastTag(),f=a.isAutoplay(),v=h.isMobile,y=g.isVpaid()?new ht({vastTag:g},{firePix:c,eventController:u,asyncUtil:p}):new lt({vastTag:g},{firePix:c,eventController:u,asyncUtil:p}),I=function(){const t={analytics:l,creative:a,errorHandler:d,eventController:u,firePix:c,placement:o,asyncUtil:p,vastTag:g};if(g.isVpaid())return new nt(t);return new rt(t)}(),A=new r.Z({renderers:function(){let t;t=a.isHighImpact()?[N,n.Z,R,_,s.Z]:[n.Z,_,s.Z];g.isVpaid()?t.push(T):t.push(x);f||t.push(S);w()&&t.push(M.bind(null,C()));a.params.cc_url&&t.push(O);return t.concat(e)}(),eventManagers:function(){const t=[Z.Z,f?z:G,g.isVpaid()?Q:q];w()&&t.push(Y);a.isHighImpact()&&t.push(J);return t.concat(i)}(),initState:["isEnded","hasStarted","isClickPaused","unmutedByUser","playInitialized","isPlayerReady","isPlaying","isReplay","videoHeight","videoWidth","isAutoCentering","isAutoSpinning","xRot","yRot","pctInView","nativeVideoWidth","nativeVideoHeight"],supportedDomRefs:["endFrame","clickBlock","innerWrap","learnMore","videoLogo","muteButton","outerWrap","playButton","poster","replay","video","endCard","progressBar","hiveCta","endCard","endCardCta","endCardFeature","overlay","featureImg","skin"]},t);return{render:function(){const{context:t}=A,e=A.render();return t.player=y,t.analytics=I,t.fallbackManager=m,y.init(t),I.init(t),e}};function C(){return f?"ne":"nw"}function w(){const t=a.params.logo_image_url,e=o.logoBlackList||"",i=C(),r=-1===e.toLowerCase().indexOf(i);return t&&r&&!v}}}},745:function(t,e,i){i.d(e,{K:function(){return n},T:function(){return r}});const r={VIDEO_CONTROL:0,VIDEO_CLICK_BLOCK:0,VIDEO_LOGO:0,CAROUSEL_CIRCLE:1,NON_VIDEO_LOGO:1,CAROUSEL_ARROW:2,ADCHOICES:3,CTA_OVERLAY:3,REVEAL_TRIGGER:3,REVEAL_WRAPPER:4,REVEAL_CLOSE:5,VIDEO_PROGRESS_BAR:6,VIDEO_END_FRAME:7,PSA:8},n=(t,e)=>t.getBaseZIndex()+e},942:function(t,e,i){function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}i.d(e,{Z:function(){return r}})}},r={};function n(t){var e=r[t];if(void 0!==e)return e.exports;var s=r[t]={exports:{}};return i[t](s,s.exports,n),s.exports}n.m=i,n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.f={},n.e=function(t){return Promise.all(Object.keys(n.f).reduce((function(e,i){return n.f[i](t,e),e}),[]))},n.u=function(t){return t+".js"},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},t={},e="ib7414:",n.l=function(i,r,s,a){if(t[i])t[i].push(r);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var h=c[d];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==e+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",e+s),o.src=i),t[i]=[r];var u=function(e,r){o.onerror=o.onload=null,clearTimeout(p);var n=t[i];if(delete t[i],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((function(t){return t(r)})),e)return e(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),l&&document.head.appendChild(o)}},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.p="",function(){var t={286:0,359:0};n.f.j=function(e,i){var r=n.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise((function(i,n){r=t[e]=[i,n]}));i.push(r[2]=s);var a=n.p+n.u(e),o=new Error;n.l(a,(function(i){if(n.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+e,e)}};var e=function(e,i){var r,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(e&&e(i);c<a.length;c++)s=a[c],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0},i=self.tlJsonp7414=self.tlJsonp7414||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}(),function(){var t=n(849),e=n(145),i=n(277);const r={click_cta:1,page_flip_left:2,page_flip_right:3,scroll:4,mute:5,unmute:6,expand:7,collapse:8,click_paused:9,transition_up:10,transition_down:11,direction_change:12,reveal_trigger:13},s=2,a=3;class o{constructor({environment:t,pageInfo:e,placement:i,dco:r},{creative:n,lifecycleManager:s,thirdPartyAnalytics:a,payableEventEmitter:o,firePix:l,errorHandler:c,asyncUtil:d,eventController:h}){this.pageInfo=e,this.environment=t,this.asyncUtil=d,this.creative=n,this.priceMacroValue=n.params.additional_data.pr,this.lifecycleManager=s,this.thirdPartyAnalytics=a,this.payableEventEmitter=o,this.firePix=l,this.fireEB=l.fireEB.bind(l),this.errorHandler=c,this.viewedCreativeElements={},this.hasFired={render:!1,play:!1,playAttempt:!1,onePxViewable:!1,viewable:!1},this.eventController=h,this.placement=i,this.dco=r,this.loadCreativeParams()}loadCreativeParams(){var t;this.thirdPartyAnalytics.billOrWait(),this.creativeParams=this.creative.params.additional_data||{},this.creativeParams.caid=this.creative.params.asset_id,this.creativeParams.unid=0,this.rParams={...this.creativeParams,...(0,e.Up)(this.pageInfo.get()),rr:null!==(t=this.dco)&&void 0!==t&&t.isFallback?"creative_dco_fallback":"creative",fid:this.creative.params.format_id||0,rb:this.creative.params.render_options_bm||0,g:this.creative.params.ghost?1:0,tmplid:this.placement.templateId};const i=this.environment.formats;this.creative.params.format_id===i.video&&(this.videoLengthMS=1e3*this.creative.params.length_seconds),this.disclosure=this.creative.params.disclosure}render(){if(this.hasFired.render)return;this.fireEB(t.kq,this.rParams,(()=>{this.errorHandler.fireError("render tracker error",this.errorHandler.LOG)})),this.thirdParty(),this.payableEventEmitter.render(),this.hasFired.render=!0,this.lifecycleManager.setPhaseAfterRender(this.creative.isAutoplay())}viewable(){this.hasFired.viewable||(this.hasFired.viewable=!0,this.fireEB(t.ML,this.getEngagementParams()),this.thirdPartyAnalytics.fireViewable(),this.payableEventEmitter.viewable())}adOnPage(){this.fireEB(t.RU,this.rParams)}onePxViewable(){this.hasFired.onePxViewable||(this.hasFired.onePxViewable=!0,this.fireEB(t.Pw,this.getEngagementParams()),this.thirdPartyAnalytics.fireOnePxViewable(),this.payableEventEmitter.onePxViewable())}elementViewable(e,i){this.viewedCreativeElements[e]||(this.fireEB(t.qH,this.getEngagementParams({creativeElementId:e,imagePosition:i})),this.viewedCreativeElements[e]=!0)}twoSecondViewable(){this.fireEB(t.$m)}playAttempt(){this.hasFired.playAttempt||(this.hasFired.playAttempt=!0,this.fireEB(t.fz,{format_id:this.creative.params.format_id||0,tactic_id:this.creative.params.additional_data.tid||0}))}getEngagementParams({creativeElementId:t,imagePosition:e=0,assetTypeId:i}={}){const r=t||this.creative.params.image_id||0,n={...this.creativeParams,cepos:e,ceid:r};return i&&(n.atid=i),n}mouseover(e,i){this.fireEB(t.al,this.getEngagementParams({creativeElementId:e,imagePosition:i}))}click({creativeElementId:e,imagePosition:i,assetTypeId:r}={}){"AUDIT"!==this.priceMacroValue&&(this.fireEB(t.ot,this.getEngagementParams({creativeElementId:e,imagePosition:i,assetTypeId:r})),this.thirdPartyAnalytics.fireClick(i),this.fireEB(t.FU,{add:3006}))}getRedirectClickUrl(e,i){const r=this.getEngagementParams({creativeElementId:e,imagePosition:i});return this.firePix.getEBUrl(t.ot,r)+"&rdir="}appendThirdPartyJs(t){this.creative.params.ghost||this.thirdPartyAnalytics.appendJsOnPassthru(t)}duration(r,n,s,a){const l=o.getVideoLength(n,s);if(isNaN(r)||!l.value)return;const c={...this.creativeParams,duration:r,video_length:l.value,vlt:l.type};r>0&&!this.hasFired.play&&(this.thirdPartyAnalytics.firePlay(),this.payableEventEmitter.videoStart(),this.hasFired.play=!0,this.eventController.publish(i.Sn),c.start=1,this.hasFired.playAttempt||this.playAttempt(),this.lifecycleManager.setPhaseAfterVideoStart()),(0,e.Id)(a)&&a>=.5&&(c.iv=1),this.fireEB(t.co,c)}static getVideoLength(t,e){let i,r;return t&&t>0?(i=t,r=s):(i=e,r=a),{value:i,type:r}}play(){this.fireEB(t.FU,{add:3007})}ctaRenderResult(e){this.fireEB(t.xg,e)}disclosureRenderResult(){if(this.disclosure){const e={disclosure_render_method:this.disclosure.render_method,disclosure_render_text:this.disclosure.text};this.fireEB(t.qp,e)}}thirdParty(){this.creative.params.ghost||(this.creative.isCarousel()?this.thirdPartyAnalytics.fireCarouselImpression():this.thirdPartyAnalytics.fireImpression())}fireEEE(e,i=1){this.fireEB(t.Oe,{eid:r[e],unid:this.creativeParams.unid||0,ev:i})}static sendAdReadySignal(){if(function(){const t=document.getElementById("tl-app");return t&&t.classList.contains("ad-ready-signal")}()){const t=document.createElement("IFRAME");t.setAttribute("src","js-3lift:ad_ready"),document.documentElement.appendChild(t),t.parentNode.removeChild(t)}}get disclosure(){return this._disclosure}set disclosure(t){this._disclosure=t}}class l{constructor({placement:t,environment:e,specifiedTacticId:i,isAdServing:r,rev:n,gdpr:s,docInfo:a,isFallback:o,fallbackBannerSize:l},{pageInfo:c,asyncUtil:d,urlParams:h,firePix:u,errorHandler:p}){this.placement=t,this.environment=e,this.urlParams=h,this.pageInfo=c,this.docInfo=a,this.asyncUtil=d,this.isAdServing=r,this.rev=n,this.specifiedTacticId=i,this.gdpr=s,this.isFallback=o,this.fallbackBannerSize=l,this.firePix=u,this.errorHandler=p}async buildAuctionPath(){const t=this.getAuctionHostName(this.isAdServing&&this.specifiedTacticId);return this.buildDefaultAuctionPath(t)}getAuctionHostName(t=!1){const{placement:{customOptions:{uniqueCreatives:i,uniqueBrands:r}},environment:{tlxStagingRate:n,tlxHost:s}}=this;let a=s;return n&&Math.random()<n&&(a="staging-"+a),this.urlParams.forceBidUrl?(0,e.Rz)("//"+this.environment.qaHost+"/qa"):this.urlParams.tlBidUrl?(0,e.Rz)("//"+this.urlParams.tlBidUrl):t?(0,e.Rz)("//"+a+"/web/adserving"):r||i?(0,e.Rz)("//"+a+"/vbas/auction"):(0,e.Rz)("//"+a+"/web/auction")}async buildDefaultAuctionPath(t){const{customOptions:{numCreatives:i=1}}=this.placement,r=["inv_code="+encodeURIComponent(this.placement.invCode),"referrer="+encodeURIComponent(this.pageInfo.get().ref),"rev="+encodeURIComponent(this.rev),"fe="+encodeURIComponent((0,e.I$)()?"1":"0"),"ft="+encodeURIComponent(this.pageInfo.getFrameType()),"cb="+(0,e.Qt)(10)];if(this.isAdServing&&this.specifiedTacticId&&(r.push("tid="+encodeURIComponent(this.specifiedTacticId)),r.push("n="+encodeURIComponent(i.toString()))),this.placement.demandEnabled||this.urlParams.debugFlag||r.push("dd=1"),this.isFallback){this.firePix.auctionId&&r.push("original_auction_id="+encodeURIComponent(this.firePix.auctionId));const{width:t,height:e}=this.fallbackBannerSize,i=t+"x"+e;l.hasValidSize(t,e)?r.push("size="+i):this.errorHandler.fireError("Invalid size for fallback auction",this.errorHandler.WARNING,{size:i})}return this.needsAqp()&&r.push(l.getAqpParam()),this.gdpr&&(await this.gdpr.getCMPData(),this.gdpr.cmpData&&(r.push("gdpr="+encodeURIComponent(this.gdpr.cmpData.gdprApplies)),this.gdpr.cmpData.consentString&&r.push("cmp_cs="+encodeURIComponent(this.gdpr.cmpData.consentString)),this.gdpr.cmpData.gppString&&r.push("gpp="+encodeURIComponent(this.gdpr.cmpData.gppString)),this.gdpr.cmpData.gppApplicableSections&&r.push("gpp_sid="+encodeURIComponent(this.gdpr.cmpData.gppApplicableSections)))),this.urlParams.tlPreviewId&&r.push("tl_preview_id="+this.urlParams.tlPreviewId),this.urlParams.tpPreviewId&&r.push("tp_preview_id="+this.urlParams.tpPreviewId),t+"?"+r.join("&")}needsAqp(){return this.placement.invCode.indexOf("msn_infeed_")>-1&&0===this.docInfo.document.getElementsByClassName("xnetvidplayer").length}static getAqpParam(){return"aqp="+encodeURIComponent(JSON.stringify({_id:{$oid:"0"},format_target:{action:"include",items:[{id:8}]}}))}static hasValidSize(t,e){return t&&e}}class c{constructor({placement:t,docInfo:e,browserInfo:i,isAdServing:r,auctionIframe:n},{serveDefault:s,errorHandler:a,eventController:o,asyncUtil:l}){this.placement=t,this.docInfo=e,this.browserInfo=i,this.isAdServing=r,this.auctionIframe=n,this.serveDefault=s,this.errorHandler=a,this.eventController=o,this.asyncUtil=l}onError(t,e){this.errorHandler&&this.errorHandler.fireError(t,e)}fireAuction(t){const e=this.auctionIframe;try{const i=e.contentWindow.document.createElement("SCRIPT");i.referrerPolicy="no-referrer-when-downgrade",i.src=t,e.contentWindow.document.body.appendChild(i)}catch(t){this.onError(t,this.errorHandler.ERROR)}const r=this.placement.timeoutDuration,n=this.asyncUtil.timeoutWrap((()=>{this.serveDefault.serve("auction_timeout")}),r);this.eventController.once(i.PZ,(()=>{clearTimeout(n)}))}run(t){this.criteoGuard=!1;const e=e=>{if(this.criteoGuard)return;this.criteoGuard=!0;const i=this.rtusTimeout;if(i&&(this.docInfo.window.clearTimeout(i),this.rtusTimeout=!1),e&&"OK"===e.status){const i=encodeURIComponent(e.userid);this.fireAuction(t+"&criteo_id="+i)}else this.fireAuction(t)},i=()=>{this.criteoGuard||(this.criteoGuard=!0,this.fireAuction(t))};if(this.browserInfo.isSafari&&!this.isAdServing){const t=this.auctionIframe.contentWindow,r=t.document,n="tl_criteo_rtus";t[n]=e;const s=r.createElement("SCRIPT");r.body.appendChild(s),s.onerror=i,s.src="//gum.criteo.com/sync?c=157&r=2&j="+n,this.rtusTimeout=setTimeout(i,150)}else this.fireAuction(t)}}class d{constructor(t,e){const i=e.hookFinder.getDtjTacticId();t.isAdServing=!!i,t.specifiedTacticId=e.urlParams.tlDynId||i,this.config=t,this.dependencies=e,this.placement=t.placement,this.serveDefault=e.serveDefault,this.asyncUtil=e.asyncUtil,this.eventController=e.eventController}async getCreative(){const t=1.5*this.placement.timeoutDuration,e=this.asyncUtil.timeoutWrap((()=>{this.serveDefault.serve("global_timeout")}),t),r=new Promise((t=>{this.eventController.once(i.i2,(i=>{t(i),clearTimeout(e)}))})),n=this.initAuctionRunner(),s=this.initAuctionPathBuilder(),a=await s.buildAuctionPath();return n.run(a),r}initAuctionRunner(){return new c(this.config,this.dependencies)}initAuctionPathBuilder(){return new l(this.config,this.dependencies)}}class h{constructor(t){this.userAgent=t}isMobile(){return this.userAgent.match(/blackberry|ipod|iphone|ipad|android/i)}isIos(){return/ipod|iphone|ipad/i.test(this.userAgent)}isSafari(){return/safari/i.test(this.userAgent)&&!/chrome|chromium|crios/i.test(this.userAgent)}isIpad(){return this.userAgent.match(/ipad/i)}isIE(){return/msie|trident\//i.test(this.userAgent)}isEdge(){return/Edg/.test(this.userAgent)}checkIsMicrosoftBrowser(){return this.isIE()||this.isEdge()}checkIsFacebook(){return this.userAgent.indexOf("FBAV/")>-1}getBrowserInfo(){const t=this.isMobile(),e=this.isIpad();return{isMobile:t,isSafari:!!this.isSafari(),isIpad:e,isIos:!!this.isIos(),isMicrosoftBrowser:this.checkIsMicrosoftBrowser(),isIE:this.isIE(),isSmallScreen:t||e,isFacebook:this.checkIsFacebook()}}}var u=n(114),p=n(942);class m{constructor(){(0,p.Z)(this,"_auctionIframe",null)}static get(){return this._auctionIframe}static create(t){const i=t.document;this._auctionIframe=(0,e.E_)(i.createElement("IFRAME")),i.body||i.documentElement.appendChild(i.createElement("body"));const r=new Promise(((t,e)=>{const i=r=>{try{r.target.removeEventListener("load",i);const e=r.target.contentWindow.document;e.open(),e.write("<html><head></head><body></body></html>"),e.close(),t(r.target)}catch(t){e(t)}};this._auctionIframe.addEventListener("load",i)}));return i.body.appendChild(this._auctionIframe),r}}var g=n(696);const f=1,v=2,y=6,_=10,I=12,A=500,C=501,S=503,w=504,M=505,E=502,T=506,b=507,L=508,P=531,D=532,x=533,R=534,N=535,k=1,O=3,Z=500,j=501,V=502,U=503,F=504,B=507,W=508,H=509,z=1,G=2,Y=2,Q=3,q=501,J=555,X=555,K=2,$=["heading","privacy_url","caption","cta","logo_image_url","image_url","image_width","image_height","clickthrough_url","advertiser_name","vast_xml","strikeout_price","deal_text","event_text","deal_badge_url","event_badge_url","template_component_url"];class tt{constructor(t){t.forEach((t=>{this.processAsset(t)}))}processAsset(t){if(t.title&&t.title.text)this.heading=t.title.text;else if(t.data&&t.data.privacy)this.privacy_url=t.data.privacy;else if(t.data&&this.isAdvertiser(t.data))this.advertiser_name=t.data.value;else if(t.data&&this.isCaption(t.data))this.caption=t.data.value;else if(t.data&&this.isCTA(t.data))this.cta=t.data.value;else if(t.data&&t.data.link)this.clickthrough_url=t.data.link;else if(t.data&&this.isStrikeoutPrice(t.data))this.strikeout_price=t.data.value;else if(t.data&&this.isDealText(t.data))this.deal_text=t.data.value;else if(t.data&&this.isEventText(t.data))this.event_text=t.data.value;else{if(!t.img||!this.isLogo(t.img))return t.img&&this.isMainImage(t.img)?(this.image_url=t.img.url,this.image_width=t.img.w,void(this.image_height=t.img.h)):void(t.img&&this.isDealBadges(t.img)?this.deal_badge_url=t.img.url:t.img&&this.isEventBadges(t.img)?this.event_badge_url=t.img.url:t.link&&t.link.url?this.clickthrough_url=t.link.url:t.video&&t.video.vasttag&&(this.vast_xml=t.video.vasttag));this.logo_image_url=t.img.url}}isAdvertiser(t){return t.type&&1===t.type}isCaption(t){return t.type&&2===t.type}isCTA(t){return t.type&&12===t.type}isStrikeoutPrice(t){return t.type&&t.type===T}isDealText(t){return t.type&&t.type===b}isEventText(t){return t.type&&t.type===L}isLogo(t){return t.type&&1===t.type}isMainImage(t){return t.type&&3===t.type}isDealBadges(t){return t.type&&t.type===W}isEventBadges(t){return t.type&&t.type===H}build(){const t={};return $.forEach((e=>{null!=this[e]&&(t[e]=this[e])})),t}}const et={DCO_PARSE:"DCO_PARSE",DCO_FETCH:"DCO_FETCH",DCO_VALIDATION:"DCO_VALIDATION"};class it extends g.Z{constructor(t,e,i=[]){super(e+": "+t),(0,p.Z)(this,"_failedValidations",[]),(0,p.Z)(this,"errorBlock","dco"),this._failedValidations=i}get failedValidations(){return this._failedValidations}}var rt={parsePayload:function(t){const e=function(t){try{const e={};return function(t,e){const i=function(t){const e={impPixels:[],viewPixels:[],jsTrackers:[]};if(!t.eventtrackers||!Array.isArray(t.eventtrackers))return e;return t.eventtrackers.forEach((t=>{2!==t.method?1!==t.method||1!==t.event?1===t.method&&[2,3,4].includes(t.event)&&e.viewPixels.push(t):e.impPixels.push(t):e.jsTrackers.push(t)})),e}(e);t.impression_pixels=i.impPixels.map((t=>t.url)),t.viewability_pixels=i.viewPixels.map((t=>t.url)),t.js_trackers=i.jsTrackers.map((t=>t.url)),t.clickthrough_pixels=[]}(e,t),function(t,e){e.link&&e.link.url&&(t.clickthrough_url=e.link.url)}(e,t),function(t,e){e.privacy&&(t.privacy_url=e.privacy)}(e,t),e}catch(t){throw new g.Z("error parsing top level fields for DCO assets")}}(t),i=new tt(t.assets);Object.assign(e,i.build());let r=[e];if(t.ext&&t.ext.carousel){const i=function(t){const e=t.map((t=>function(t){const e={};if(null==t.position)throw new it("missing position for carousel asset",et.DCO_PARSE);if(e.position=t.position,null==t.image_url)throw new it("missing image url for carousel asset",et.DCO_PARSE);e.image_url=t.image_url,null!=t.heading&&(e.heading=t.heading);null!=t.caption&&(e.caption=t.caption);null!=t.clickthrough_url&&(e.clickthrough_url=t.clickthrough_url);return e}(t)));return e.sort(((t,e)=>t.position<e.position?-1:1)),e.map((t=>delete t.position)),e}(t.ext.carousel),n=t=>({...e,...t}),s=i.map(n);r=r.concat(s)}return r}};var nt=function(t,e){if(u.ZP.DCO_PROTOCOLS.NATIVE_ADS!==e)throw new it("invalid dco_protocol",et.DCO_PARSE);try{return rt.parsePayload(t)}catch(t){throw new it("error parsing DCO payload: "+t.message,et.DCO_PARSE)}};function st(t,e){return e.reduce(((e,i)=>(typeof t[i.field]===i.type&&t[i.field].length>=i.minLength||(e.isValid=!1,e.failedFields.push(i.field)),e)),{isValid:!0,failedFields:[]})}var at={validate:function(t){if("object"!=typeof t)return{isValid:!1,failedFields:[]};return st(t,ot)}};const ot=[{field:"heading",type:"string",minLength:1},{field:"caption",type:"string",minLength:1},{field:"image_url",type:"string",minLength:1},{field:"clickthrough_url",type:"string",minLength:1}];var lt={validate:function(t){if("object"!=typeof t)return{isValid:!1,failedFields:[]};const e=st(t,ct);if(!e.isValid)return e;return function(t,e){t.startsWith("<")&&t.endsWith(">")||(e.isValid=!1,e.failedFields.push("vast_xml"));return e}(t.vast_xml,e)}};const ct=[{field:"advertiser_name",type:"string",minLength:1},{field:"clickthrough_url",type:"string",minLength:1},{field:"heading",type:"string",minLength:1},{field:"vast_xml",type:"string",minLength:1}];var dt={validate:function(t){if("object"!=typeof t)return{isValid:!1,failedFields:[]};return st(t,ht)}};const ht=ot.concat([{field:"strikeout_price",type:"string",minLength:1},{field:"deal_text",type:"string",minLength:1},{field:"deal_badge_url",type:"string",minLength:1},{field:"event_text",type:"string",minLength:1},{field:"event_badge_url",type:"string",minLength:1},{field:"template_component_url",type:"string",minLength:1}]);var ut={getValidator:function(t,e,i){if(i.some((t=>t.template_component_url)))return dt;if(t===e.image)return at;if(t===e.carousel)return at;if(t===e.autoplay)return lt;return at}};var pt=function(t,e,i,r){let n=nt(t,e);n=n.map((t=>function(t){return t.image_id=-1,t.asset_id=-1,t.img_server_params="",t}(t)));const s=ut.getValidator(i,r,n),a=n.map((t=>s.validate(t)));if(a.some((t=>!t.isValid))){const t=a.filter((t=>!t.isValid)).map((t=>t.failedFields.join(", ")));throw new it("dco asset invalid",et.DCO_VALIDATION,t)}return n};const mt="doDco",gt=0,ft=1,vt=["impression_pixels","clickthrough_pixels","viewability_pixels","js_trackers"];class yt{constructor({assets:t,settings:e,frame:i,env:r},{errorHandler:n}){(0,p.Z)(this,"mapPayloadToAssetAndMergeTrackers",(t=>pt(t,this.settings.dco_protocol,this.settings.format_id,this.env.formats))),(0,p.Z)(this,"errAndFallBackOrDefault",(t=>{this._isFallback=ft;const e=t.toString(),i=t.errorBlock,r={dco_tag_url:this.settings.dco_tag_url,failed_validations:t.failedValidations};if(!this._useFallbackAssets())throw this.errorHandler.fireError(e,this.errorHandler.ERROR,r,i),new g.Z("invalid DCO payload and no fallback creative");return this.errorHandler.fireError(e,this.errorHandler.WARNING,r,i),{assets:this.assets}})),this.assets=t,this.frame=i,this.settings=e,this.errorHandler=n,this.env=r,this._isFallback=gt}getOptimizedAsset(){return this.fetchDcoPayload().then((t=>this.mapPayloadToAssetAndMergeTrackers(t))).then((t=>this._mergeOrRemoveTrackerFieldsAllAssets(t))).catch((t=>this.errAndFallBackOrDefault(t)))}getTagUrl(){return this.settings.dco_tag_url.replace("${dcomacro}",mt)}fetchDcoPayload(){const t=this.frame.contentWindow,e=t.document,i=e.createElement("script"),r=this.getTagUrl();return new Promise(((n,s)=>{t[mt]=n,t.onerror=t=>s(new it("dco jsonp error: "+t,et.DCO_PARSE)),i.onerror=()=>s(new it("dco script failed to load",et.DCO_PARSE)),setTimeout((()=>{s(new it("dco jsonp timeout",et.DCO_PARSE))}),1e4),i.src=r,e.body.appendChild(i)}))}_mergeOrRemoveTrackerFieldsAllAssets(t){return{assets:t.map((t=>this._mergeOrRemoveTrackerFields(t)))}}_mergeOrRemoveTrackerFields(t){const e={...t};return vt.forEach((t=>{var i;Array.isArray(this.assets)&&this.assets[0]&&Array.isArray(this.assets[0][t])&&(e[t]=null===(i=e[t])||void 0===i?void 0:i.concat(this.assets[0][t]));const r=Array.isArray(e[t]),n=Array.isArray(this.settings[t]);r&&n?(e[t]=e[t].concat(this.settings[t]),delete this.settings[t]):n&&delete e[t],e[t]&&(e[t]=Array.from(new Set(e[t])))})),e}_useFallbackAssets(){return this.assets&&this.assets.length>0}get isFallback(){return this._isFallback}}var _t=n(493);class It{constructor({scriptWindow:t}){this.window=t,this._document=t.document;try{this.topDocument=top.document,this._topWindow=top,this.canAccessTop=!0}catch(t){this.topDocument=window.document,this._topWindow=window,this.canAccessTop=!1}try{this._topWindow.navigator?this.navigator=this._topWindow.navigator:this.navigator=navigator}catch(t){this.navigator=navigator}}get document(){return this._document||this.topDocument}get topWindow(){return this._topWindow||window}get canAccessElementsFromPoint(){return!(!this.topDocument.elementsFromPoint&&!this.topDocument.msElementsFromPoint)}getElementsFromPoint(t,i){let r=null;if(this.topDocument.elementsFromPoint)r=this.topDocument.elementsFromPoint(t,i);else if(this.topDocument.msElementsFromPoint){const n=this.topDocument.msElementsFromPoint(t,i);r=n?(0,e.ZM)(n):[]}return r||[]}}class At{constructor({adserverHostName:t,bundleRoot:e,cookieDomain:i,dynamicPath:r,ebPath:n,formats:s,numUserSyncPixels:a,qaHost:o,renderOptionsMap:l,tlImageAddr:c,tlxHost:d,ttjHostName:h}){this._adserverHostName=t,this._bundleRoot=e,this._cookieDomain=i,this._dynamicPath=r,this._ebPath=n,this._formats=s,this._numUserSyncPixels=a,this._qaHost=o,this._renderOptionsMap=l,this._tlImageAddr=c,this._tlxHost=d,this._ttjHostName=h}get adserverHostName(){return this._adserverHostName}get bundleRoot(){return this._bundleRoot}get cookieDomain(){return this._cookieDomain}get dynamicPath(){return this._dynamicPath}get ebPath(){return this._ebPath}get formats(){return this._formats}get numUserSyncPixels(){return this._numUserSyncPixels}get qaHost(){return this._qaHost}get renderOptionsMap(){return this._renderOptionsMap}get tlImageAddr(){return this._tlImageAddr}get tlxHost(){return this._tlxHost}get ttjHostName(){return this._ttjHostName}}var Ct=n(498);class St{constructor(){(0,p.Z)(this,"events",{})}on(t,e){return this._subscribe(t,e,!1)}once(t,e){return this._subscribe(t,e,!0)}off(t,e){if(!this.events[t]||0===this.events[t].length)return;const i=this.events[t].filter((t=>t.eventHandler!==e));this.events[t]=[...i],0===this.events[t].length&&(this.events={...this.events,eventName:[]})}destroy(){this.events={}}publish(t,...e){this._publishEvent(t,...e),this._publishLog(t,...e)}_subscribe(t,e,i){return Object.prototype.hasOwnProperty.call(this.events,t)||(this.events[t]=[]),this.events[t]=[...this.events[t],{eventHandler:e,once:i}],()=>this.off(t,e)}_publishEvent(t,...e){this.events[t]&&this.events[t].length>0&&this.events[t].forEach((i=>{i.eventHandler(...e),i.once&&this.off(t,i.eventHandler)}))}_publishLog(t,...e){this._publishEvent(i.sY,t,...e)}onWithOffEvent(t,e,i){const r=this.on(t,i);this.on(e,r)}}class wt{constructor({docInfo:t,rev:e,placement:i,debugFlag:r,ebPath:n,auctionId:s=null},{eventController:a}){this.docInfo=t,this.rev=e,this.placement=i,this.debugFlag=r,this.ebPath=n,this.eventController=a,this.auctionId=s,this._setupListeners()}fire(t,e){if(!t)return;const i=this.docInfo.topDocument.createElement("IMG");"function"==typeof e&&i.addEventListener("error",(()=>e())),i.src=t}fireEB(t,e={},i){const r=this.getEBUrl(t,e);this.fire(r,i)}getEBUrl(t,i){const r={inv_code:this.placement.invCode,aid:this.auctionId,rev:this.rev};return(0,e.uC)(this.ebPath,t,{...r,...i})}fireDyn(t){const i={...{long1:null,long2:null,long3:null,string1:this.auctionId,string2:null,string3:null},...t},r=(0,e.uC)(this.ebPath,"dyn",i);this.fire(r)}firePerf(t){const i={rev:this.rev,type:t.type,time_since_start:t.timeSinceStart,time_since_last:t.timeSinceLast,client_side_auction:+t.clientSideAuction,fid:t.formatId},r=(0,e.uC)(this.ebPath,"perf",i);this.fire(r)}setAuctionId(t){return this.auctionId=t,this}getAuctionId(){return this.auctionId}_setupListeners(){this.eventController.on(i.i2,(t=>{var e,i,r,n,s;this.setAuctionId((null===(e=t.ad)||void 0===e||null===(i=e.ext)||void 0===i||null===(r=i.tlAdditionalData)||void 0===r?void 0:r.aid)||(null===(n=t.settings)||void 0===n||null===(s=n.additional_data)||void 0===s?void 0:s.aid))}))}}class Mt{constructor({auctionFrameWindow:t,errorDecorator:e}){this.auctionFrameWindow=t,this.decorator=e,this.thirdPartyMessage=!1}handleRocketfuel(t){const i=this.auctionFrameWindow.document.createElement("iframe");(0,e.E_)(i),i.src="about:blank",this.auctionFrameWindow.document.body.appendChild(i);const r=i.contentWindow.document;return r.open(),r.write(t),r.close(),i}newWriter(t){let i,r,n,s,a,o,l,c,d,h;const u=()=>{for(r=o.contentWindow.document,r.open(),r.write('<script>window.addEventListener("message",function(msg){window.parent.postMessage(msg.data,"*");});<\/script>'),d=0;d<h;d++){const t=c[d];t.text.length?r.write("<script>"+t.text+"<\/script>"):t.getAttribute&&t.getAttribute("data-dv3-creative-fetch")?r.write(t.outerHTML):(i=(0,e.EC)(t.src),n=i.queryKey,s=i.host,"ad.turn.com"===s&&n.cid&&(a=n.cid,o.setAttribute("data-ext-creative-id",a)),r.write('<script type="text/javascript" src="'+t.src+'"><\/script>'))}r.close(),o.removeEventListener("load",u)};try{if(t.indexOf("rfitag")>0)return void this.handleRocketfuel(t);if(l=this.auctionFrameWindow.document.createElement("div"),l.style.display="none",this.auctionFrameWindow.document.body.appendChild(l),l.innerHTML=t,c=l.getElementsByTagName("script"),h=c.length,0===h)return;o=this.auctionFrameWindow.document.createElement("iframe"),(0,e.E_)(o),o.className="tl_ext_iframe",o.addEventListener("load",u),this.auctionFrameWindow.document.body.appendChild(o)}catch(t){throw new g.Z("newWriter failed: "+t.message)}}setListeners(){this.auctionFrameWindow.addEventListener("message",this.decorator(this._onmessage.bind(this))),this.auctionFrameWindow.document.write=()=>{}}_onmessage(t){if(!t||!t.data||!t.data.match)return;if(t.data.match("get_3p")||t.data.match("get_ext")||t.data.match("get_unit_2")){if(this.thirdPartyMessage)return;this.thirdPartyMessage=!0;const e=this.auctionFrameWindow.document.createElement("SCRIPT");e.textContent=t.data,this.auctionFrameWindow.document.body.appendChild(e)}}}class Et{constructor(){this.allRenderedAssets=Et.allRenderedAssets}dispatchIfUnique(t,e,i,r){this.allRenderedAssets[i]=this.allRenderedAssets[i]||[],this._areAssetsUnique(i,r)?(e(),this._trackAssets(i,r)):t.serve("redundant_asset")}_areAssetsUnique(t,e){return e.every((e=>this._isAssetUnique(t,e)))}_isAssetUnique(t,e){return!this.allRenderedAssets[t][e]}_trackAssets(t,e){e.forEach((e=>this._trackAsset(t,e)))}_trackAsset(t,e){this.allRenderedAssets[t][e]=!0}}(0,p.Z)(Et,"allRenderedAssets",{});class Tt{constructor({placement:t,auctionIframe:e},{eventController:i,serveDefault:r,firePix:n,errorDecorator:s,errorHandler:a}){this.placement=t,this.auctionIFrameWindow=e.contentWindow,this.eventController=i,this.defaultServer=r,this.firePix=n,this.errorDecorator=s,this.errorHandler=a,this.isUnitGenerated=!1}getCreativeJSON2(t,e){this.passthru(t.pixel,e)}get3PUnit(t,e,i,r,n,s){this.passthru(e,s)}getExtUnit(t,e){this.passthru(e)}passthru(t,e){this.eventController.publish(i.tn,t,e)}dynamicCreativeRender(t){var e,r,n,s,a;if(!t)throw new g.Z("Missing auction response payload");if(this.isUnitGenerated)return;this.isUnitGenerated=!0;const o=(null===(e=t.ad)||void 0===e||null===(r=e.ext)||void 0===r||null===(n=r.tlAdditionalData)||void 0===n?void 0:n.aid)||(null===(s=t.settings)||void 0===s||null===(a=s.additional_data)||void 0===a?void 0:a.aid);this._verboseCreativeResponseLog(o,"dynamicCreativeRender",t),this.eventController.publish(i.i2,t)}serveConditional(t,e){if(this.placement.customOptions.uniqueBrands||this.placement.customOptions.uniqueCreatives){const i=new Et,r=Object.keys(e)[0],n=e[r];i.dispatchIfUnique(this.defaultServer,t,r,n)}else{const t="serveConditional response received with no uniqueness constraints";this.errorHandler.fireError(t,this.errorHandler.ERROR),this.defaultServer.adRendered=!0}}serveDefault(t,e){const{defaultCode:i}=this.placement;this._verboseCreativeResponseLog(e,"serveDefault",i),this.defaultServer.serve(t,e)}registerAuctionListeners(){const t={get_unit_2:this.wrap(this.getCreativeJSON2),get_3p_unit:this.wrap(this.get3PUnit),get_ext_unit:this.wrap(this.getExtUnit),dynamicCreativeRender:this.wrap(this.dynamicCreativeRender),serveViewable:this.wrap(this.serveConditional),serveConditional:this.wrap(this.serveConditional),serveDefault:this.wrap(this.serveDefault)};Object.assign(this.auctionIFrameWindow,t)}wrap(t){const e=this,r=this.errorDecorator(t);return(...t)=>(e.eventController.publish(i.PZ),r.apply(e,t))}_verboseCreativeResponseLog(t,e,i){const r=this.placement.customOptions.verboseCreativeResponseToggle;if(void 0!==r&&Math.random()<r){const r={[e]:i},n=JSON.stringify(r),s={string1:t,string2:"verboseCreativeResponseToggle",string3:n};n.length<=1024&&this.firePix.fireDyn(s)}}}var bt=n(876);const Lt="tl_id";class Pt{constructor({placement:t,environment:e,docInfo:i,settings:r,currentScript:n},{errorHandler:s}){this.placement=t,this.docInfo=i,this.environment=e,this.errorHandler=s,this.settings=r,this.currentScript=n||this._getTLScript(),this.cachedHook=null}getHook(){return null===this.cachedHook&&(this.cachedHook=this._findHook()),this.cachedHook}_findHook(){let t=this.currentScript;try{const e=this.docInfo.window;e!==top&&e.frameElement&&!this.placement.customOptions.friendlyIframeRender&&(t=this.isInActiveViewElement()?Pt.getTopFrame(e,"data-google-container-id"):Pt.getTopFrame(e))}catch(t){}let e=+this.placement.replaceParent;for(;e;)t=t.parentNode,e--;if(!t)throw new g.Z("could not find hook");return t.tagName||(t=this.tlScript),t}_getTLScript(){const t=[].slice.call(this.docInfo.document.getElementsByTagName("script")).find((t=>this._isValidTLScript(t)));return t?(t.setAttribute(Lt,Math.round(1e5*Math.random())),t):null}_isValidTLScript(t){const e=t.getAttribute(Lt);return Pt.scriptSrcContains(t,this.environment.ttjHostName)&&Pt.scriptSrcContains(t,this.placement.invCode)&&!e}getAuctionResponsePseudoId(){return!!this.currentScript&&this.currentScript.getAttribute("data-auction-response-id")}getHeaderBiddingAuctionResponse(){const t=this.getAuctionResponsePseudoId();return this.docInfo.window["tl_auction_response_"+t]||null}getTagTemplateId(){return!!this.currentScript&&this.currentScript.getAttribute("data-template-id")}_getScriptPath(){const t=this.getScriptSrc();return(0,e.EC)(t).path}getDtjTacticId(){const t=this._getScriptPath().split("/");return"dtj"===t[1]?t[3]:void 0}getScriptSrc(){return this.currentScript?this.currentScript.getAttribute("data-src")||this.currentScript.src:""}styleHook(){var t;const e=this.getHook(),i="iframe"===(null==e||null===(t=e.tagName)||void 0===t?void 0:t.toLowerCase()),r=!this.placement.customOptions.friendlyIframeRender,n=this.placement.customOptions.activeView,s=this.isInActiveViewElement(),a=i&&r&&(n||s&&this.canAbsolutelyPositionFrame(e));a&&Math.random()<this.settings.activeviewLogRate&&this.errorHandler.fireError("activeView",this.errorHandler.LOG),a?(this.allowAbsolutePositioning(e),this.positionFrameBehindAd(e)):this.hideHook(e)}canAbsolutelyPositionFrame(t){const e=t.parentElement,i=this.hasDefaultPosition(e)&&this.hasOffset(e);if(!e||i){const t="Cannot absolutely position ActiveView iframe. Parent is undefined, or has static position and offsets";return this.errorHandler.fireError(t,this.errorHandler.WARNING),!1}return!0}hasDefaultPosition(t){const e=bt.Z.getPropertyValue(t,"position");return["static",""].indexOf(e)>-1}hasOffset(t){return!!["top","bottom","left","right"].find((e=>{const i=bt.Z.getPropertyValue(t,e);return parseFloat(i)>0}))}positionFrameBehindAd(t){bt.Z.setStyle(t,"position","absolute"),bt.Z.setStyle(t,"visibility","hidden"),bt.Z.setStyle(t,"top","0px"),bt.Z.setStyle(t,"left","0px"),bt.Z.setStyle(t,"pointer-events","none")}allowAbsolutePositioning(t){const e=t.parentElement;this.hasDefaultPosition(e)&&bt.Z.setStyle(e,"position","relative")}isInActiveViewElement(){return!!(this.currentScript&&this.currentScript.parentElement&&this.currentScript.parentElement.classList.contains("GoogleActiveViewElement"))}hideHook(t){bt.Z.setStyle(t,"display","none"),bt.Z.setStyle(t,"visibility","hidden"),bt.Z.setStyle(t,"width","0px"),bt.Z.setStyle(t,"height","0px")}getSupplySourceId(){return this.currentScript?this.currentScript.getAttribute("data-ss-id"):null}static getTopFrame(t,e){let i,r=t,n=!1;for(;r!==top&&!n;)try{r.frameElement&&(i=r.frameElement),r=r.parent,e&&i.getAttribute(e)&&(n=!0)}catch(t){break}return i}static scriptSrcContains(t,e){if(!e)return!1;const{src:i}=t,r=t.getAttribute("data-src"),n=i&&i.indexOf(e)>-1,s=r&&r.indexOf(e)>-1;return!(!n&&!s)}}class Dt{static needsBusting(t,e){return!!t.iframeBuster&&!function(t){let e;try{e=t&&t==top}catch(t){e=!1}return e}(e)}static bust(t,i){const r=(0,e.EC)(t.referrer),n=encodeURIComponent(t.URL),s=t.createElement("iframe");if(s.src=(0,e.Rz)("//"+r.host+"/doubleclick/TLIframe.html?docsrc="+n+"&script_src="+encodeURIComponent(i)),s.width=0,s.height=0,s.style.display="none",!Dt._hasBody(t)){const e=t.createElement("body");t.firstElementChild.appendChild(e)}t.body.appendChild(s)}static _hasBody(t){return!!t.body}}class xt{constructor(){try{jQuery(),this.jQueryPresent=!0}catch(t){this.jQueryPresent=!1}}layout(t){this.jQueryPresent&&(this._layoutMasonry(),this._layoutIsotope(t))}_layoutMasonry(){let t=jQuery(".masonry");t.length||(t=null),t&&t.length>1&&(t=jQuery(t[0])),t||jQuery.each(jQuery("*"),((e,i)=>{jQuery.data(i,"masonry")&&(t=jQuery(i))})),t&&t.data("masonry")&&(t.masonry("reloadItems"),t.masonry())}_layoutIsotope(t){if(jQuery.fn.isotope){let e=jQuery(".isotope");if(1!==e.length){let i=t;for(;i.parentNode;)jQuery.data(jQuery(i.parentNode),"isotope")?e=jQuery(i.parentNode):i=i.parentNode}e.data("isotope")||(e=!1),e&&e.isotope("reloadItems").isotope({sortBy:"original-order"})}}}var Rt=n(993);const Nt=1,kt=2,Ot=3,Zt=4;class jt{constructor({creativePayload:t,firePix:e}){this._payableEvent=t.settings.payable_event,this._formatId=t.settings.format_id,this._tacticId=t.settings.additional_data.tid||0,this._firePix=e}render(){this._payableEvent===Nt&&this._fire()}viewable(){this._payableEvent===kt&&this._fire()}onePxViewable(){this._payableEvent===Ot&&this._fire()}videoStart(){this._payableEvent===Zt&&this._fire()}_fire(){this._firePix.fireEB(t.bc,{peid:this._payableEvent,fid:this._formatId,tid:this._tacticId})}}class Vt{constructor({activeView:t=!1,defaultCaptionOverride:e="",defaultHeadingOverride:i="",disableOutstreamVideoBehavior:r=!1,disclosureOverride:n,dontWaitForImageLoad:s=!1,friendlyIframeRender:a=!1,is3pAdPreview:o=!1,isAmp:l=!1,maxUserSyncs:c=10,numCreatives:d=1,playButtonUrl:h="",postBidIpvAutoplay:u=!1,referrerOverride:p=[],uniqueBrands:m=!1,uniqueCreatives:g=!1,unwrappedUnit:f=!1,userSyncsDisabled:v=!1,verboseCreativeResponseToggle:y,videoZIndexOverride:_=null,videoErrorFallbackOptOut:I=!1,programmaticGuaranteedJsonRender:A=!1}){this._activeView=t,this._defaultCaptionOverride=e,this._defaultHeadingOverride=i,this._disableOutstreamVideoBehavior=r,this._disclosureOverride=n,this._dontWaitForImageLoad=s,this._friendlyIframeRender=a,this._is3pAdPreview=o,this._isAmp=l,this._maxUserSyncs=c,this._numCreatives=d,this._playButtonUrl=h,this._postBidIpvAutoplay=u,this._referrerOverride=p,this._uniqueBrands=m,this._uniqueCreatives=g,this._unwrappedUnit=f,this._userSyncsDisabled=v,this._verboseCreativeResponseToggle=y,this._videoZIndexOverride=_,this._videoErrorFallbackOptOut=I,this._programmaticGuaranteedJsonRender=A}get activeView(){return this._activeView}get defaultHeadingOverride(){return this._defaultHeadingOverride}get defaultCaptionOverride(){return this._defaultCaptionOverride}get disableOutstreamVideoBehavior(){return this._disableOutstreamVideoBehavior}get disclosureOverride(){return this._disclosureOverride}get dontWaitForImageLoad(){return this._dontWaitForImageLoad}get friendlyIframeRender(){return this._friendlyIframeRender}set friendlyIframeRender(t){this._friendlyIframeRender=t}get is3pAdPreview(){return this._is3pAdPreview}set is3pAdPreview(t){this._is3pAdPreview=t}get isAmp(){return this._isAmp}get maxUserSyncs(){return this._maxUserSyncs}get numCreatives(){return this._numCreatives}get playButtonUrl(){return this._playButtonUrl}get postBidIpvAutoplay(){return this._postBidIpvAutoplay}get referrerOverride(){return this._referrerOverride}get uniqueBrands(){return this._uniqueBrands}get uniqueCreatives(){return this._uniqueCreatives}get unwrappedUnit(){return this._unwrappedUnit}set unwrappedUnit(t){this._unwrappedUnit=t}get userSyncsDisabled(){return this._userSyncsDisabled}get verboseCreativeResponseToggle(){return this._verboseCreativeResponseToggle}get videoZIndexOverride(){return this._videoZIndexOverride}get videoErrorFallbackOptOut(){return this._videoErrorFallbackOptOut}get programmaticGuaranteedJsonRender(){return this._programmaticGuaranteedJsonRender}}class Ut{constructor({async:t,captionCharacterLimit:e,headingCharacterLimit:i,cta:r,customOptions:n={},defaultCode:s,demandEnabled:a,dvPlacementId:o,disclosure:l,id:c=0,iframeBuster:d,iframeWrap:h,imageHeight:u,imageWidth:p,invCode:m,logoBlackList:g,provenTemplate:f,publisherId:v=0,replaceParent:y,sharingEnabled:_,staging:I,templateCode:A,templates:C,timeoutDuration:S,viewabilityTestingInfo:w={},templateId:M=0}){this._async=t,this._captionCharacterLimit=e,this._headingCharacterLimit=i,this._cta=r,this._customOptions=new Vt({...n}),this._defaultCode=s,this._demandEnabled=a,this._disclosure=l||Ut.DEFAULT_DISCLOSURE,this._dvPlacementId=o,this._id=c,this._iframeBuster=d,this._iframeWrap=h,this._imageHeight=u,this._imageWidth=p,this._invCode=m,this._logoBlackList=g,this._provenTemplate=f,this._publisherId=v,this._replaceParent=y,this._sharingEnabled=_,this._staging=I,this._templateCode=A,this._templates=C,this._timeoutDuration=S||1e4,this._viewabilityTestingInfo=w,this._templateId=M}get async(){return this._async}get captionCharacterLimit(){return this._captionCharacterLimit}get headingCharacterLimit(){return this._headingCharacterLimit}get customOptions(){return this._customOptions}get cta(){return this._cta}get defaultCode(){return this._defaultCode}get demandEnabled(){return this._demandEnabled}get disclosure(){return this._disclosure}set disclosure(t){this._disclosure=t}get dvPlacementId(){return this._dvPlacementId}get id(){return this._id}get iframeBuster(){return this._iframeBuster}get iframeWrap(){return this._iframeWrap}get imageHeight(){return this._imageHeight}set imageHeight(t){this._imageHeight=t}get imageWidth(){return this._imageWidth}set imageWidth(t){this._imageWidth=t}get invCode(){return this._invCode}get logoBlackList(){return this._logoBlackList}get provenTemplate(){return this._provenTemplate}set provenTemplate(t){this._provenTemplate=t}get publisherId(){return this._publisherId}set replaceParent(t){this._replaceParent=t}get replaceParent(){return this._replaceParent}get sharingEnabled(){return this._sharingEnabled}get staging(){return this._staging}get templateCode(){return this._templateCode}set templateCode(t){this._templateCode=t}get templates(){return this._templates}get timeoutDuration(){return this._timeoutDuration}get viewabilityTestingInfo(){return this._viewabilityTestingInfo}get templateId(){return this._templateId}set templateId(t){this._templateId=t}}(0,p.Z)(Ut,"DEFAULT_CTA","See more"),(0,p.Z)(Ut,"DEFAULT_DISCLOSURE","Sponsored by");const Ft=t=>{if("SCRIPT"===t.tagName&&"tl-third-party"!==t.className)t.parentNode.replaceChild((t=>{const e=document.createElement("SCRIPT");e.text=t.innerHTML;let i=t.attributes.length-1;for(;i>=0;i--)e.setAttribute(t.attributes[i].name,t.attributes[i].value);return e})(t),t);else{let e=0;const i=t.childNodes;for(;e<i.length;)Ft(i[e++])}return t};class Bt{constructor(t){this.document=t.document,this.window=t.window}wrapAd(t){const e=this.document.createElement("DIV");return e.style.display="inline",e.className="tlod",e.innerHTML=t,e}static insertAd(t,e,i){if(!e||!e.parentNode)throw new g.Z("insertAd failed: hook element not on dom");const r=e.parentNode;!i||e.ownerDocument!==r&&"head"!==r.tagName.toLowerCase()?e.parentNode.insertBefore(t,e):e.ownerDocument.body.appendChild(t),Ft(t)}static serveDefaultFrame(t,e){if(!e)throw new g.Z("serveDefaultFrame: tried to write default code but doc is unavailable");"complete"!==e.readyState&&e.open(),e.write(t),e.close()}}const Wt=-1;function Ht({adWrapperWithDims:i,mainContent:r,positionService:n,pageInfo:s,bundleStartTime:a,firePix:o,errorHandler:l}){const c=n.getElDims(i),d=n.getElDims(r),h={ad_w:c.width,ad_h:c.height,img_w:d.width,img_h:d.height,render_time:Date.now()-a,ft:s.getFrameType(),plid:s.placement.id};if(s.isClientAware()){const t=n.getClientDims();h.client_w=t.width,h.client_h=t.height}else h.client_w=Wt,h.client_h=Wt;if(s.isPositionAware()){const t=function(t,e,i,r){let n,s;try{const r=t.ownerDocument.defaultView.top.document.body,a=i.getBoundingRect(r);n=e.top-a.top,s=e.left-a.left}catch(t){r.fireError("could not access top when getting ad position",r.WARNING),n=Wt,s=Wt}return{top:n,left:s}}(i,n.getBoundingRect(i),n,l);h.pos_left=t.left,h.pos_top=t.top}else h.pos_left=Wt,h.pos_top=Wt;o.fireEB(t.cM,(0,e.p5)(h))}class zt{constructor({hookFinder:t,docInfo:e,defaultCode:i,pageInfo:r,isFallback:n},{firePix:s,asyncUtil:a,errorHandler:o}){this.hookFinder=t,this.docInfo=e,this.defaultCode=i,this.pageInfo=r,this.isFallback=n,this.firePix=s,this.asyncUtil=a,this.userSync=null,this.hasDefaulted=!1,this.adRendered=!1,this.errorHandler=o}serve(i,r){if(this.hasDefaulted||this.adRendered)return;this.hasDefaulted=!0,zt.renderDefault(this.defaultCode,this.hookFinder,this.docInfo);const n={...(0,e.Up)(this.pageInfo.get()),rr:i};r&&this.firePix.setAuctionId(r),this.firePix.fireEB(t.kq,n),this.isFallback&&this.errorHandler.fireError("Fallback auction failed to return creative",this.errorHandler.LOG),this.userSync&&this.userSync.doSyncIfAllDone()}setUserSync(t){this.userSync=t}setIsFallback(t){this.isFallback=t}setDefaulted(){this.hasDefaulted=!0}static renderDefault(t,e,i){if(t)if(i.window!==top)Bt.serveDefaultFrame(t,i.window.document);else{const r=new Bt(i).wrapAd(t);Bt.insertAd(r,e.getHook())}}}class Gt{constructor(t={}){this._settings=t}get placementCategorizationRate(){return this._settings.placement_categorization_rate||0}get prvSampleRate(){return this._settings.prv_sample_rate||0}get pmdLogRate(){return this._settings.pmd_log_rate||0}get benchmarkLogRate(){return this._settings.benchmark_log_rate||0}get activeviewLogRate(){return this._settings.activeview_log_rate||0}get ignoreSafeframeErrors(){return this._settings.ignore_safeframe_errors||0}get getCta(){return this._settings.cta||"Learn More"}}var Yt=n(465);class Qt{constructor({docInfo:t,domRefs:e,errorHandler:i,eventController:r,pageInfo:n,vastTag:s}){this.docInfo=t,this.domRefs=e,this.errorHandler=i,this.eventController=r,this.pageInfo=n,this.vastTag=s}run(){try{var t;const e=null===(t=this.pageInfo.getOmidSessionClient())||void 0===t?void 0:t.default,r=this.vastTag.getAdVerifications(),n=this.domRefs.video||this.domRefs.adWrapperWithDims,s=this.vastTag.getLinear();if(e&&r.length>0){const t=e.AdEvents,a=e.AdSession,o=e.Partner,l=e.Context,c=e.VerificationScriptResource,d=e.VastProperties,h=e.MediaEvents,u=this.docInfo.topWindow.location.href,p=new o("TripleLift","1.0.0"),m=new l(p,r.map((t=>new c(t.javascriptResource,t.vendor,t.verificationParameters))),u);m.setVideoElement(n),m.setServiceWindow(this.docInfo.topWindow);const g=new a(m),f=new t(g);if(g.setCreativeType("video"),g.setImpressionType("beginToRender"),!g.isSupported())return!1;g.start(),g.registerSessionObserver((t=>{if("sessionStart"===t.type){var e;const t=null===(e=s.getAttribute("skipoffset"))||void 0===e?void 0:e.trim(),i=new d(!!t,t,!0,"standalone");f.loaded(i),f.impressionOccurred()}else"sessionError"===t.type||t.type}));const v=new h(g);return this.eventController.on(i.Om,(()=>{v.start(s.getAttribute("duration"),n.volume)})),this.eventController.on(i.VQ,(()=>{v.firstQuartile()})),this.eventController.on(i.ck,(()=>{v.midpoint()})),this.eventController.on(i.sk,(()=>{v.thirdQuartile()})),this.eventController.on(i.rp,(()=>{v.complete(),g.finish()})),n.addEventListener("volumechange",(()=>{v.volumeChange(n.volume)})),n.addEventListener("click",(()=>{v.adUserInteraction("click")})),["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach((t=>{n.addEventListener(t,(()=>{const t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullScreen?"fullscreen":"normal";v.playerStateChange(t)}))})),!0}return!1}catch(t){return this.errorHandler.fireError(t,this.errorHandler.WARNING),!1}}}var qt=n(601);const Jt={moat:1,ias:2,dv:3,fk:4,apx:5,pix:6,adl:7,pix2:8,adel:9,lan:11};class Xt{constructor({docInfo:t,placement:e,mainImage:i,adDIV:r,tacticDetails:n={},formatId:s},{creative:a,firePix:o}){this.docInfo=t,this.placement=e,this.mainImage=i,this.adDIV=r,this.viewabilityElement=r,this.creative=a,this.tacticDetails=n,this.formatId=s,this.firePix=o}appendTags(t){const e=this.addViewabilityTestJS(t,window),i=this.getIntegrations();for(let t=0;t<e.length;t++){const r=e[t];let n=!1;for(let t=0;t<i.length;t++)if(r&&r.match&&r.match(i[t].regex)){i[t].action(r),n=!0;break}n||this.defaultAction(r)}}getViewabilityID(){return this.viewabilityID||(this.viewabilityElement.id?this.viewabilityID=this.viewabilityElement.id:(this.viewabilityID="tltpvid_"+Math.round(1e5*Math.random()),this.viewabilityElement.id=this.viewabilityID)),this.viewabilityID}getViewabilityClass(){if(!this.viewabilityClass){if(this.viewabilityClass="tltpvclass_"+Math.round(1e5*Math.random()),!this.viewabilityElement||!this.viewabilityElement.classList)throw new g.Z("getViewabilityClass failed: invalid viewabilityElement",this.errorHandler.WARNING);this.viewabilityElement.classList.add(this.viewabilityClass)}return this.viewabilityClass}appendScriptVE(t){const e=this.create3pScript(),i=this.mainImage;if(i.nextSibling)i.parentNode.insertBefore(e,i.nextSibling);else{const t=this.docInfo.document.createElement("IMG");t.style.display="none",i.parentNode.insertBefore(t,i),t.parentNode.insertBefore(i,t),t.parentNode.insertBefore(e,i.nextSibling),t.parentNode.removeChild(t)}e.src=t}appendScriptAd(t){const e=this.create3pScript();this.adDIV.appendChild(e),e.src=t}defaultAction(t){const e=this.create3pScript();this.viewabilityElement.appendChild(e),e.src=t}create3pScript(){const t=this.docInfo.document.createElement("SCRIPT");return t.className="tl-third-party",t}interpolateDimensions(t){const e=this.mainImage.getBoundingClientRect();return t.replace("[WIDTH]",e.width).replace("[HEIGHT]",e.height).replace("[CONTAINER_ID]",this.getViewabilityID())}getIntegrations(){const t=this;return[{regex:/cdn\.adnxs/,action(e){t.appendScriptAd(e.replace("%native_dom_id%",t.getViewabilityID()))}},{regex:/cdn\.doubleverify/,action(e){const i=(e.match("findclass")?e:e+"&findclass=1").replace(/INSERT_SUPPLIER_ID/,"TripleLift").replace("[PLACEMENT_ID]",t.placement.id).replace("[DV_PLACEMENT_ID]",t.placement.dvPlacementId).replace(/INSERT_BTREG/,t.getViewabilityClass()).replace(/INSERT_BTADSRV/,t.getViewabilityClass()).replace("[TLVIEW_ID]",t.getViewabilityID());t.appendScriptAd(i)}},{regex:/adsafeprotected/,action(e){const{tacticDetails:i}=t,r=void 0!==t.tacticDetails.advid;t.appendScriptVE(e.replace("$!{AD_ID}",t.placement.id).replace("$!{ADVERTISER_ID}",r?i.advid:"0").replace("$!{INSERTION_ORDER_ID}",r?i.ioid:i.bmid).replace("[TLVIEW_ID]",t.getViewabilityID()))}},{regex:/licdn/,action(e){t.appendScriptVE(e)}},{regex:/voicefive/,action(e){const i=e.replace("[PLACEMENT_ID]",t.placement.placementID).replace("[TLVIEW_ID]",t.getViewabilityID());t.appendScriptVE(i)}},{regex:/(js|z)\.moatads/,action(e){let i=e.replace("_PUBLISHER_",t.placement.publisherId).replace("_PLACEMENT_ID_",t.placement.id).replace("_CREATIVE_",t.tacticDetails.clid).replace("_FORMAT_",t.formatId).replace("[TACTIC]",t.tacticDetails.tid).replace("[DSP]",t.tacticDetails.bmid).replace("[BRAND]",t.tacticDetails.brid).replace("[MOAT_Z_PARAMS]",qt.Z.makeZParamsString(t.creative,t.tacticDetails));i=i.match(/\[TLVIEW_ID]/)?i.replace("[TLVIEW_ID]",t.getViewabilityID()):i.concat("&tlview_id=",t.getViewabilityID()),t.appendScriptAd(i)}},{regex:/c\.betrad/,action(e){t.appendScriptAd(t.interpolateDimensions(e))}},{regex:/choices\.truste/,action(e){t.appendScriptAd(t.interpolateDimensions(e))}},{regex:/ybp\.yahoo/,action(e){t.appendScriptAd(e.replace("TLVIEW_ID",t.getViewabilityID()))}},{regex:/h6\.msn/,action(e){t.appendScriptAd(e.replace("TLVIEW_ID",t.getViewabilityID()))}},{regex:/fk\.unicornengine/,action(e){t.appendScriptAd(e.replace("TLVIEW_ID",t.getViewabilityID()).replace("PLACEMENT_ID",t.placement.id).replace("TIMESTAMP",Date.now()))}},{regex:/q\.adrta/,action(e){const i="[DIV_ID]",r=t.getViewabilityID(),n=e.includes(i)?e.replace(i,r):e+";divid="+r;t.appendScriptAd(n)}},{regex:/[a-z]+.adlooxtracking/,action(e){t.appendScriptAd(e.replace("[TLVIEW_ID]",t.getViewabilityID()))}},{regex:/aam\.a47b/,action(e){t.appendScriptAd(e.replace("[TLVIEW_ID]",t.getViewabilityID()))}}]}addViewabilityTestJS(e,i){const r=this.creative.getParams(),n=r.viewability||{},s={pid:this.placement.id,unid:r.additional_data.unid||0};if(this.creative.isAutoplay())return Object.keys(n).forEach((e=>{n[e]&&(s.vid=Jt[e],s.sr=n[e],this.firePix.fireEB(t.Jt,s))})),e;const a="https:"===i.location.protocol;if(n.moat){const i=a?"https://z.":"http://js.",r=qt.Z.makeZParamsString(this.creative,this.tacticDetails);e.push(i+"moatads.com/triplelift879988051105/moatad.js#moatClientLevel1=_PUBLISHER_&moatClientLevel2=_PLACEMENT_ID_&moatClientLevel3=_CREATIVE_&moatClientLevel4=_FORMAT_&moatClientSlicer1=[DSP]&moatClientSlicer2=[BRAND]&tlview_id=[TLVIEW_ID]&zMoatTactic=[TACTIC]&zMoatPixelParams="+r),s.vid=Jt.moat,s.sr=n.moat,this.firePix.fireEB(t.Jt,s)}if(n.ias){const i=a?"https:":"http:";e.push(i+"//pixel.adsafeprotected.com/jload?anId=8617&advId=$!{ADVERTISER_ID}&campId=$!{INSERTION_ORDER_ID}&pubId=$!{INVENTORY_SOURCE_ID}&chanId=$!{PACKAGE_ID}&placementId=$!{AD_ID}&adsafe_url=$!{SITE_URL}&adsafe_type=v&tlview_id=[TLVIEW_ID]"),s.vid=Jt.ias,s.sr=n.ias,this.firePix.fireEB(t.Jt,s)}if(n.lan){const i=a?"https:":"http:";e.push(i+"//static-exp1.licdn.com/sc/h/ahy9615wy6g4nnhnt1jiud49l?clientLevel1=c9dd61c7-6923-4101-a392-1b3ea79cb200&amp;clientLevel2=3&amp;clientLevel3=165008826&amp;clientLevel4=NATIVE"),s.vid=Jt.lan,s.sr=n.lan,this.firePix.fireEB(t.Jt,s)}if(n.fk){const i=a?"https:":"http:";e.push(i+"//fk.unicornengine.net/ada/117/205667136/viewid=TLVIEW_ID;pid=PLACEMENT_ID/TIMESTAMP/"),s.vid=Jt.fk,s.sr=n.fk,this.firePix.fireEB(t.Jt,s)}if(n.apx){const i=a?"https:":"http:";e.push(i+"//cdn.adnxs.com/v/s/112/trk.js#v;tv=native-test;native=1;dom_id=%native_dom_id%;st=0;d=1x1;vc=iab;vid_ccr=1;an_sdk=1;tag_id=12350495;cb=http%3A%2F%2Ffra1-ib.adnxs.com%2Fvevent%3Fe%3DwqT_3QL5BqB5AwAAAwDWAAUBCJmth9MFEOG_loLBiueEIxiamLHqnKPMylkqNgkAAAECCAhAEQEHEAAACEAZCQkI8D8hCQkICEApEQkAMQkJsAAAMJ_o8QU4zhJAzhJIAlC994knWNSeH2AAaN7dGHjtyASAAQGKAQNVU0SSAQEG8FCYAQGgAQGoAQGwAQC4AQDAAQTIAQLQAQDYAQDgAQDwAQCKAjp1ZignYScsIDM5MzgwMSwgMTUxNjM2MTM2OSk7dWYoJ3InLCA4MTk1MTY3NywyHgDwnJIC-QEhNHpYcWVBaUVnTmtDRUwzM2lTY1lBQ0RVbmg4d0FEZ0FRQVJJemhKUW4tanhCVmdBWU1vSGFBQndDbmo0bVFHQUFiSURpQUZva0FFQm1BRUJvQUVCcUFFRHNBRUF1UUctMEV6RkFBQUlRTUVCdnRCTXhRQUFDRURKQVFSTHpPUll5OVFfMlFFQUFBQUFBQUR3UC1BQkFQVUIFDyhKZ0NBS0FDQUxVQwUQBEwwCQjwTE1BQ0FNZ0NBT0FDQU9nQ0FQZ0NBSUFEQVpBREFKZ0RBYWdEaElEWkFyb0RFV1JsWm1GMWJIUWpSbEpCTVRvek56QTSaAjkhdWdzcTl3NvwA9FQBMUo0ZklBUW9BRG9SWkdWbVlYVnNkQ05HVWtFeE9qTTNNRGcu2AKfCeACjKYO6gIzaHR0cDovL3Rlc3RwYWdlcy5tY2FyLW1hYy5hbGVudHkuZnIvMDFfYmFzaWNfc2luZ2xlgAMAiAMBkAMAmAMXoAMBqgMAwAOQHMgDANIDLAgCEigwMjhkZjRlMzY0MzdlOThmOWU5M2MzYWUwZjlmOTllNTEyYTI4Y2Vl0gMkCAQSIDg3NDdhOTk1OTQzODIyZjc4NzU0ZDIwNTg3ZjdiNGY32AMA4AMA6AMA-AMCgAQAkgQGL3V0L3YzmAQAogQKMTAuMi4xMi4xMagEvZNwsgQQCAAQARisAiD6ASgAMAA4ArgEAMAEAMgEANIEEWRlZmF1bHQjRlJBMTozNzA42gQCCAHgBADwBL33iSeIBQGYBQCgBf___________wHABQDJBQBF_xTwP9IFCQkFC1QAAADYBQHgBQHwBQH6BQQIABAAkAYA%26s%3D4604caf2bd786775fa256dca81881be0f0bb9312%26referrer%3D;ts=1516361369;cet=0;cecb="),s.vid=Jt.apx,s.sr=n.apx,this.firePix.fireEB(t.Jt,s)}if(n.pix){const i=a?"https:":"http:";e.push(i+"//q.adrta.com/s/tpl/aa.js?cb=[CACHEBUSTER]#tpl;paid=ss;avid=[ADVERTISER_ID];caid=[CAMPAIGN_ID];publisherId=[PUBLISHER_ID];kv24=[SUPPLY_TYPE];divid=[DIV_ID]"),s.vid=Jt.pix,s.sr=n.pix,this.firePix.fireEB(t.Jt,s)}if(n.adl){const t=a?"https:":"http:";e.push(t+"//j.adlooxtracking.com/ads/js/tfav_adl_321.js#platform=159&scriptname=adl_321&tagid=874&typejs=tvaf&fwtype=2&creatype=2&targetelt=tlview_id=[TLVIEW_ID]&custom2area=0&custom2sec=0&id1=tlview_id=[TLVIEW_ID]&id2=&id3=&id4=&id5="),s.vid=Jt.adl,s.sr=n.adl,this.firePix.fireEB("tpvpx",s)}if(n.adel){const i=a?"https:":"http:";e.push(i+"//aam.a47b.com/aam?asid=757a4107&ad=${CREATIVE_ID}&adv=${ADV_ID}&ca=${CP_ID}&cty=${USER_CITY}&ctr=${USER_COUNTRY}&did=${DEAL_ID}&df=${DEVICE_MAKE_ID}&dt=${DEVICE_MODEL_ID}&iid=${AUCTION_ID}&io=${IO_ID}&li=${CPG_ID}&ptnr=${PUBLISHER_ID}&pl=${TAG_ID}&ra=${CACHEBUSTER}&rg=${USER_STATE}&st=${SITE_ID}&sv=${SELLER_MEMBER_ID}&usr=${USER_ID}&zc=${POSTAL_CODE}&pelc=[TLVIEW_ID]"),s.vid=Jt.adel,s.sr=n.adel,this.firePix.fireEB(t.Jt,s)}return e}}var Kt=n(314);const $t=0,te=1,ee=2,ie=3,re=4,ne=6;class se{constructor({docInfo:t,pageInfo:e,placement:r},{creative:n,auctionIframeWriterOverride:s,firePix:a,errorHandler:o,eventController:l}){(0,p.Z)(this,"firePix",void 0),(0,p.Z)(this,"auctionIframeWriterOverride",void 0),(0,p.Z)(this,"macros",void 0),(0,p.Z)(this,"docInfo",void 0),(0,p.Z)(this,"placement",void 0),(0,p.Z)(this,"errorHandler",void 0),(0,p.Z)(this,"creative",void 0),(0,p.Z)(this,"creativeParams",void 0),(0,p.Z)(this,"shouldWaitForPassthru",!0),(0,p.Z)(this,"passthruClickTracker",null),(0,p.Z)(this,"passthruTimer",null),(0,p.Z)(this,"thirdPartyJS",null),(0,p.Z)(this,"hasBilled",!1),(0,p.Z)(this,"isCachedAppendJsEvent",!1),(0,p.Z)(this,"numClicks",0),(0,p.Z)(this,"cachedTrackers",[]),(0,p.Z)(this,"cachedCarouselIndexes",[]),this.docInfo=t,this.pageInfo=e,this.placement=r,this.creative=n,this.creativeParams=n.getParams(),this.firePix=a,this.auctionIframeWriterOverride=s,this.errorHandler=o,this.eventController=l,this.domRefs=null,l.on(i.tn,((...t)=>this.passthru(...t))),l.on(i.RU,(t=>{this.domRefs=t}))}passthru(t,i){if(!this.shouldWaitForPassthru)return;this.shouldWaitForPassthru=!1,clearTimeout(this.passthruTimer),this.passthruClickTracker=(0,e.ws)(t),this.macros="string"==typeof i?JSON.parse(i):i,this.macros=this.replaceAllDisplayClickMacros(this.macros),this.fireAllCachedTrackers(),this.expandAllClickThroughMacros();this.creativeParams.nob_passthru&&this.creative.getVastTag()&&this.macros&&this.expandVastTrackers()}expandTracker(t){t.textContent=se._expandMacros(this.macros,t.textContent)}expandVastTrackers(){const t=this.creative.getVastTag();try{const e={impressions:t.getImpressionTrackers(),mediaFiles:t.getMediaFiles(),clickTrackers:t.getVideoClickTrackers(),clickthrough:t.getVastClickThrough(),assortedTrackers:t.getAssortedTrackers()};Object.keys(e).forEach((t=>{Array.isArray(e[t])?e[t].forEach((t=>this.expandTracker(t))):e[t]&&this.expandTracker(e[t])}))}catch(t){this.errorHandler.fireError(t,this.errorHandler.ERROR)}}fireAllCachedTrackers(){this.firePreviousClicks(),this.fireCachedTrackers(),this.fireCachedJs()}expandAllClickThroughMacros(){const t="clickthrough_url";this.creativeParams={...this.creativeParams,[t]:this.expandClickThroughMacro(this.creativeParams),allImages:this.creativeParams.allImages.map((e=>({...e,[t]:this.expandClickThroughMacro(e)})))}}expandClickThroughMacro(t){const e=se._expandMacros(this.macros,t.origClickThroughUrl);return this.creative.expandAndRedirectClickThrough(t,e)}replaceAllDisplayClickMacros(t){const i=t;if(null!=i){Object.keys(i).forEach((t=>{const r=i[t],n=(0,e.ws)(r);i[t]=n}))}return i}fireCachedTrackers(){this.cachedTrackers.map((t=>se._expandMacros(this.macros,t))).forEach((t=>this.firePix.fire(t)))}fireCachedJs(){this.isCachedAppendJsEvent&&this._appendJs()}firePreviousClicks(){const t=se._expandMacros(this.macros,this.passthruClickTracker);for(let e=0;e<this.numClicks;e++)this.firePix.fire(t)}billOrWait(){const t=this.creativeParams.billable_event;t&&t!==$t&&t!==te||this.bill()}bill(){this.hasBilled||(this.hasBilled=!0,this.creativeParams.billable_pixel&&this.firePix.fire(this.creativeParams.billable_pixel),this.creativeParams.nob_passthru?this._startPassthruTimer():(this.shouldWaitForPassthru=!1,this.fireAllCachedTrackers()),this.creativeParams.ad_markup&&this.auctionIframeWriterOverride.newWriter(this.creativeParams.ad_markup))}fire3pTracker(t){this.shouldWaitForPassthru?this.cacheTracker(t):this.firePix.fire(se._expandMacros(this.macros,t))}cacheTracker(t){this.cachedTrackers.push(t)}fireImpression(){this.creativeParams.thirdPartyTrackers.impressionPixels.forEach((t=>this.fire3pTracker(t)))}fireCarouselImpression(t=0){if(!this.cachedCarouselIndexes.includes(t)){this.cachedCarouselIndexes.push(t);(this.creative.getAllImages()[t].thirdPartyTrackers.impressionPixels||[]).forEach((t=>{this.fire3pTracker(t)}))}}fireClick(t){let e;this.numClicks++,e=t?this.creativeParams.allImages[t]:this.creativeParams;let i=e.thirdPartyTrackers.clickPixels;this.passthruClickTracker&&(i=i.concat([this.passthruClickTracker])),this.creativeParams.billable_event===re&&this.bill(),i.forEach(this.fire3pTracker.bind(this))}fireViewable(){this.creativeParams.billable_event===ee&&this.bill();this.creativeParams.thirdPartyTrackers.viewabilityPixels.forEach(this.fire3pTracker.bind(this))}fireOnePxViewable(){this.creativeParams.billable_event===ne&&this.bill()}firePlay(){this.creativeParams.billable_event===ie&&this.bill()}appendJsOnPassthru(t){this.thirdPartyJS=new Xt({docInfo:this.docInfo,placement:this.placement,mainImage:t,adDIV:this.domRefs.adWrapperWithDims,tacticDetails:this.creativeParams.additional_data,formatId:this.creativeParams.format_id},{creative:this.creative,firePix:this.firePix}),this.shouldWaitForPassthru?this.isCachedAppendJsEvent=!0:this._appendJs()}_appendJs(){var t;const i=this.creativeParams.thirdPartyTrackers.jsTrackers||[],r=null===(t=this.creative.getVastTag())||void 0===t?void 0:t.getAdVerifications();if((null==r?void 0:r.length)>0){const t=new Qt({docInfo:this.docInfo,domRefs:this.domRefs,errorHandler:this.errorHandler,eventController:this.eventController,pageInfo:this.pageInfo,vastTag:this.creative.getVastTag()}).run();t||r.forEach((t=>{i.push(t.url)})),(0,e.UP)(.01,(()=>{this.firePix.fireDyn({long1:Kt.Z2,long2:t?1:0,string2:JSON.stringify(r.map((t=>t.url))),string3:this.docInfo.topWindow.location.href})}))}this.thirdPartyJS.appendTags(i.map((t=>se._expandMacros(this.macros,t))))}static _expandMacros(t,i){if(!t||!i)return i;let r=i;return(0,e.yu)(t,((t,i)=>{let n=t;if("%"===t[0]&&"{"===t[1])n="$"+t.slice(1);else if("%"===t[0]&&"["===t[1])n="{"+t.slice(2,t.length-1)+"}";else if("$"===t[0]&&"{"===t[1])n=t[0]+t.slice(1,t.length);else if("$"===t[0]&&"!TL"===t.slice(1,4)&&"{"===t[4]){const e="!";n=t[0]+e+t.slice(4,t.length)}else n=t[0]+t.slice(3,t.length);n=new RegExp((0,e.hr)(n),"g"),r=r.replace(n,i)})),r}_startPassthruTimer(){this.passthruTimer=setTimeout((()=>{this.errorHandler.fireError("Passthru invocation timed out",this.errorHandler.ERROR)}),8e3)}}class ae{constructor({placement:t,environment:e,topWindow:i,debugFlag:r,gdpr:n}){this.placement=t,this.environment=e,this.window=i,this.debugFlag=r,this.gdpr=n,this.tlSyncDone=!1,this.window._tlTagsPending=(this.window._tlTagsPending||0)+1,this.placement.customOptions.userSyncsDisabled&&(this.tlSyncDone=!0)}async doSync(){if(!this.tlSyncDone){this.tlSyncDone=!0;const t={},{maxUserSyncs:i}=this.placement.customOptions;if(i&&(t.max=i),this.debugFlag&&(t.debug=1),this.gdpr&&(await this.gdpr.getCMPData(),this.gdpr.cmpData)){if(this.gdpr.cmpData.gdprApplies&&!this.gdpr.cmpData.tripleliftConsent)return;t.gdpr=!!this.gdpr.cmpData.gdprApplies,this.gdpr.cmpData.consentString&&(t.cmp_cs=this.gdpr.cmpData.consentString),this.gdpr.cmpData.gppString&&(t.gpp=this.gdpr.cmpData.gppString),this.gdpr.cmpData.gppApplicableSections&&this.gdpr.cmpData.gppApplicableSections.length>0&&(t.gpp_sid=this.gdpr.cmpData.gppApplicableSections.join(","))}const r=document.createElement("iframe");r.addEventListener("load",e.l.bind(null,r)),r.src=(0,e.uC)(this.environment.ebPath,"sync",t),(0,e.E_)(r),document.body.appendChild(r)}}doSyncIfAllDone(){if(0==--this.window._tlTagsPending)if("complete"===this.window.document.readyState)this.doSync();else{const t=this;this.window.addEventListener("load",(()=>{t.doSync()}),!1)}}}class oe{constructor(t,e){this.errorDecorator=t,this.topWindow=e}isFunction(t){return"function"==typeof t}addScrollListener(t=window,e){let i=e;return this.isFunction(this.errorDecorator)&&(i=this.errorDecorator(i)),t.addEventListener("DOMContentLoaded",i,!1),t.addEventListener("load",i,!1),t.addEventListener("scroll",i,!1),t.addEventListener("resize",i,!1),i}addResizeListener(t){let e=t;return this.isFunction(this.errorDecorator)&&(e=this.errorDecorator(e)),this.topWindow.addEventListener("DOMContentLoaded",e,!1),this.topWindow.addEventListener("load",e,!1),this.topWindow.addEventListener("resize",e,!1),e}listen(t,e,i,r,n){let s=i;return this.isFunction(this.errorDecorator)&&(s=this.errorDecorator(s)),n&&(s=this.decorateStopAndPrevent(s)),t.addEventListener(e,s,r),s}decorateStopAndPrevent(t){return function(e,...i){e.stopPropagation(),e.preventDefault(),t.apply(this,i)}}timeoutWrap(t,e){const i=this.isFunction(this.errorDecorator)?this.errorDecorator(t):t;return setTimeout(i,e)}}class le{constructor({placement:t,docInfo:e},{positionService:i,errorHandler:r,eventController:n,asyncUtil:s}){this.placement=t,this.document=e.document,this.window=e.window,this.positionService=i,this.errorHandler=r,this.eventController=n,this.asyncUtil=s,this.listeners=[],this.listenerTimeoutId=0}listenForPercentageAdViewability(t,e){const i=le.getRequiredPct(t);let r=0;this.setListener({handler:e,condition:()=>{const t=0!==r;if(t&&performance.now()-r>=1e3)return!0;const e=this.positionService.getAdPctInView()>=i;return e&&!t?r=performance.now():!e&&r&&(r=0),!1}})}listenForOnePxAdViewability(t){const e=()=>this.positionService.getAdPctInView()>0;this.setListener({handler:t,condition:e});const r=()=>{e()&&(this.eventController.off(i.nP,r),t())};this.eventController.on(i.nP,r)}static getRequiredPct(t){return t.clientWidth*t.clientHeight>=242500?.3:.5}setListener(t){this.listeners.push(t),this.listen()}listen(){if(this.listenerTimeoutId>0)return;const t=()=>{this.listeners=this.listeners.filter((t=>!t.condition()||(t.handler(),!1))),this.listeners.length>0?this.listenerTimeoutId=this.asyncUtil.timeoutWrap(t,100):this.listenerTimeoutId=0};this.listenerTimeoutId=this.asyncUtil.timeoutWrap(t,100)}}class ce{constructor(t,e){Object.assign(this,t),this.formatId=null,e.on(i.i2,(t=>{var e;this.formatId=(null==t||null===(e=t.settings)||void 0===e?void 0:e.format_id)||t.ad.ext.tlFormatId}))}setFormat(t){this.formatId=t}getFormat(){return this.formatId}isBanner(){return this.formatId===this.header_direct_banner}isCarousel(){return this.formatId===this.carousel}isImage(){return[this.image,this.native_lite].indexOf(this.formatId)>-1}isCinemagraph(){return this.formatId===this.cinemagraph}isScroll(){return this.formatId===this.scroll}isWindow(){return this.formatId===this.skylight}isPharma(){return this.formatId===this.pharma}isHdx(){return this.formatId===this.header_direct_banner}isNativeLite(){return this.formatId===this.native_lite}}class de{constructor({settings:t,ttjStartTime:e=0,revision:i,isTestEnv:r},{eventController:n,firePix:s}){this.ttjStartTime=e,this.revision=i,this.eventController=n,this.firePix=s,this.formatId=null,this.isHeaderBidding=!1,this.lastMetricTime=0,this.shouldLog=e>0&&!r&&Math.random()<=t.benchmarkLogRate,this._setupListeners()}log(t,e=performance.now()){if(this.shouldLog){const i=e-this.ttjStartTime,r=this.lastMetricTime?e-this.lastMetricTime:0;this.lastMetricTime=e,this._logPerformanceDyn(t,i,r),this._logPerformanceEB(t,i,r)}}setFormatId(t){this.formatId=t}setIsHeaderBidding(t){this.isHeaderBidding=t}_logPerformanceDyn(t,e,i){const r={string2:this.revision,string3:this.isHeaderBidding?"header"+t.replace(/^./,(t=>t.toUpperCase())):t,long1:Kt.vJ,long2:e,long3:i};this.firePix.fireDyn(r)}_logPerformanceEB(t,e,i){e<=15e3&&this.firePix.firePerf({type:t,timeSinceStart:e,timeSinceLast:i,clientSideAuction:!this.isHeaderBidding,formatId:this.formatId})}_setupListeners(){this.eventController.on(i.i2,(t=>{var e,i;const r=(null===(e=t.ad)||void 0===e||null===(i=e.ext)||void 0===i?void 0:i.tlFormatId)||t.settings.format_id;this.setFormatId(r)}))}}(0,p.Z)(de,"BUNDLE_LOAD_TIME","bundleLoadTime"),(0,p.Z)(de,"AUCTION_START","auctionStart"),(0,p.Z)(de,"AUCTION_RESPONSE","auctionResponse"),(0,p.Z)(de,"RENDER","render"),(0,p.Z)(de,"AD_ON_PAGE","adOnPage");class he{constructor(t){this.benchmark=t,this.laps=[],this.lastMetricTimeBeforeFirstLap=0,this.justEnteredALap=!1}log(t,e=performance.now()){if(this.benchmark.shouldLog){this._updateBenchmarkLastMetricTime();const i=this._transposeToFirstLap(e);this.benchmark.log(t,i)}}_transposeToFirstLap(t){if(this.laps.length){const e=this.laps[0];return t-this.laps[this.laps.length-1]+e}return t}_updateBenchmarkLastMetricTime(){this.justEnteredALap&&(this.benchmark.lastMetricTime=this.lastMetricTimeBeforeFirstLap,this.justEnteredALap=!1)}startLap(t=performance.now()){this.laps.length||(this.lastMetricTimeBeforeFirstLap=this.benchmark.lastMetricTime),this.laps.push(t),this.justEnteredALap=!0}}const ue=(t,e)=>{let i=parseInt(e,10),r=t;for(isNaN(i)&&(i=1);i--;)r=encodeURIComponent(r);return r},pe=(t,e,i)=>{const{focalBox:r}=t,n={};if(!r)return null;const s=(t,e,i)=>Math.round(t/e*i);return n.x1=s(r.x1,t.image_width,e),n.x2=s(r.x2,t.image_width,e),n.y1=s(r.y1,t.image_height,i),n.y2=s(r.y2,t.image_height,i),n},me=(t,e)=>{const i=parseInt(e,10);let r=t;if(!t||!i||i<3)return t;const n=t.match(/(.*)(<a.*>)(.*)(<\/a>)(.*)/);return n?((t,e)=>{let i=t[1],r=t[2],n=t[3],s=t[4],a=t[5],o=i.length+n.length+a.length-e+3;return o<=3||(o<=a.length?a=a.substr(0,a.length-o)+"...":o<=a.length+n.length?(o-=a.length,n=n.substr(0,n.length-o)+"...",a=""):(o-=a.length+n.length,i=i.substr(0,i.length-o)+"...",r="",n="",s="",a="")),i+r+n+s+a})(n,i):(i<t.length&&(r=t.substr(0,i-3)+"..."),r)},ge=(t,e,i)=>i&&t&&t.toLowerCase()===e?i:t||"";class fe{constructor({creativePayload:t,environment:e,placement:i,pageInfo:r,isSmallScreen:n,clickTrackerDTJ:s,debug:a,templateDetail:o,tlImageId:l,errorHandler:c,formatManager:d}){(0,p.Z)(this,"firePix",void 0),(0,p.Z)(this,"params",null),(0,p.Z)(this,"creativePayload",null),(0,p.Z)(this,"formatManager",null),(0,p.Z)(this,"environment",null),(0,p.Z)(this,"placement",null),(0,p.Z)(this,"isSmallScreen",null),(0,p.Z)(this,"clickTrackerDTJ",null),(0,p.Z)(this,"pageInfo",null),(0,p.Z)(this,"debug",!1),this.creativePayload=t,this.environment=e,this.placement=i,this.isSmallScreen=n,this.clickTrackerDTJ=s,this.pageInfo=r,this.debug=a,this.templateDetail=o,this.tlImageId=l,this.params=null,this.errorHandler=c,this.insertedLogoCorner=null,this.formatManager=d,this.initParams()}initParams(){let t=this.creativePayload.assets;t=t.map((t=>this.processClickThroughUrl(t))),t=t.map((t=>this._appendThirdPartyTrackers(t))),t=t.map((t=>((t,e,i=100)=>{const r={caption:me(t.caption,e),heading:me(t.heading,i)};return{...t,...r}})(t,this.placement.captionCharacterLimit,this.placement.headingCharacterLimit))),this.params=this.makeParams(t)}makeParams(t){var i,r;const n=((t,e)=>{const i=[...t];if(e){const t=i.find((t=>parseInt(e,10)===t.image_id));if(t)return t}return i.find((t=>t.impression_pixels))||t[0]})(t,this.tlImageId),s={...this.creativePayload.settings,...n};var a,o;return s.allImages=t,s.heading=this._getHeading(s),s.caption=this._getCaption(s),s.advertiser_name=this._getAdvertiserName(s),s.isCSR=(a=s.client_side_render,o=s.image_id,a||+o<0),s.adchoices_url=(({adchoices_url:t})=>{const{DEFAULT_ADCHOICES_URL:i}=u.ZP;return(0,e.Zx)(t)||i})(s),s.logo_image_url=(t=>{const i=t.logo_image_url||t.light_logo_url;return(0,e.Zx)(i)})(s),s.render_options_bm=s.render_options_bm||0,s.orig_image_url=s.image_url,s.banner_height=s.banner_height||(null===(i=this.creativePayload.settings)||void 0===i?void 0:i.banner_height),s.banner_width=s.banner_width||(null===(r=this.creativePayload.settings)||void 0===r?void 0:r.banner_width),s.imageServerParams=(0,e.DM)(s.img_server_params),delete s.image_render_params,n&&n.template_component_url&&(s.isTemplateComponentRender=!0,s.isPillarBoxingColorWhite=this.isWhitePillarBoxingColorWhite(s)),s}setImageUrlAndSrcSet(){const{processedImageUrl:t,srcSet:e}=this._getProcessedImageUrlAndSrcSet();this.params.image_url=t,this.params.image_srcset_2x=e}_getAdvertiserName(t){const{disclosureOverride:e}=this.placement.customOptions;return"Advertising Partner"===t.advertiser_name&&"string"==typeof e?(this.placement.disclosure=e,""):t.advertiser_name}_getHeading(t){const{defaultHeadingOverride:e}=this.placement.customOptions;return ge(t.heading,"sponsored video",e)}_getCaption(t){const{defaultCaptionOverride:e}=this.placement.customOptions;return ge(t.caption,"watch to learn more",e)}doesFormatUseTemplateImgTag(){return[this.environment.formats.image,this.environment.formats.native_lite,this.environment.formats.video].indexOf(this.formatManager.getFormat())>-1}_getProcessedImageUrlAndSrcSet(){let t=null,e=null;if(this.formatManager.isCinemagraph())t=this._determineAnimatedUrl(this.params);else if(this.params.image_url&&this.doesFormatUseTemplateImgTag())if(this.params.isCSR)t=this.params.image_url;else{const{width:i,height:r}=this._getDimensions(this.params.image_width,this.params.image_height),n={url:this.params.orig_image_url,imgServerParams:this.params.img_server_params,tlImgAddr:this.environment.tlImageAddr,placementWidth:i,placementHeight:r,logoBlackList:this.placement.logoBlackList,noLogo:!this.insertedLogoCorner,templateDetail:this.templateDetail};t=this.createDynamicImageURL(n),e=this._createImageSrcset({...n,placementWidth:2*this.placement.imageWidth,placementHeight:2*this.placement.imageHeight})}else t=u.ZP.TINY_IMG_DATA;return{processedImageUrl:t,srcSet:e}}_getDimensions(t,e){let i=this.placement.imageWidth,r=this.placement.imageHeight;return(i<t||r<e)&&(i*=2,r*=2),{width:i,height:r}}expandAndRedirectClickThrough(t,i=null){if(!t.origClickThroughUrl)return;const r=this.creativePayload.settings.additional_data,n=t.asset_id||this.creativePayload.settings.asset_id,s=r.tid,a=this.expandFirstPartyMacros(s,n,this.clickTrackerDTJ);let o=null===i?t.origClickThroughUrl:i;o=this.expandFirstPartyMacros(s,n,o),o=((t,e)=>{if(t)return decodeURIComponent(t)+encodeURIComponent(e);return e})(a,o),o=((t={},i,r)=>{const n={tl_clickthrough:!0,redir:r,tluid:t.uid,...t};return(0,e.uC)(i,"pass",n)})(r,this.environment.ebPath,o);return t.clickthrough_url=o,o}processClickThroughUrl(t){const e=t,i=e.clickthrough_url||this.creativePayload.settings.clickthrough_url;return e.origClickThroughUrl=i,i&&(e.clickthrough_url=this.expandAndRedirectClickThrough(e)),e}expandFirstPartyMacros(t,i,r){if(!r)return null;let n=r;const s=this.pageInfo.get().ref,a=(0,e.EC)(s).host;n=n.replace(/\[domain]/gi,a),n=n.replace(/\[placement_id]/gi,this.placement.id),n=n.replace(/\[campaign]/gi,t),n=n.replace(/\[ad]/gi,i),n=n.replace(/\[timestamp]/gi,(new Date).getTime()),n=n.replace(/%time%/gi,(new Date).getTime()),n=(0,e.ws)(n);const o=1e10;return n=n.replace(/\[cachebuster]/gi,(0,e.rO)(o)),n=n.replace(/\[random_number]/gi,(0,e.rO)(o)),n=n.replace(/\${cachebuster}/gi,(0,e.rO)(o)),n=n.replace(/{isfallback}/gi,this.creativePayload.settings.isFallbackAssets),n}createDynamicImageURL(t){const{url:i,tlImgAddr:r,placementWidth:n,placementHeight:s}=t;let a=t.imgServerParams||"",o=t.logoBlackList||"";t.noLogo&&(a=(0,e.sf)(a,"lp"),o="NW,NE,SE,SW"),this.isPharma()&&(o="");const l=[],c=this.templateDetail.width||("0"===n?NaN:n),d=this.templateDetail.height||("0"===s?NaN:s);var h;(l.push("width="+c),l.push("height="+d),l.push("url="+encodeURIComponent(i)),l.push("logo_exclude="+o),this.insertedLogoCorner&&l.push("lp="+this.insertedLogoCorner),this.isPharma())&&l.push("lp="+(null===(h=this.params.imageServerParams)||void 0===h?void 0:h.lp));return(0,e.Rz)("//"+r+"/?"+l.join("&")+"&"+a)}getAllDynamicImageURLS(){const t=this.placement.imageWidth,e=this.placement.imageHeight;return this.params.allImages.map((i=>{if(+i.image_id<0)return{src:i.image_url};return{src:this.createDynamicImageURL({url:i.image_url,imgServerParams:i.img_server_params,noLogo:!this.insertedLogoCorner,tlImgAddr:this.environment.tlImageAddr,placementHeight:e,placementWidth:t}),srcset:this._createImageSrcset({url:i.image_url,imgServerParams:i.img_server_params,noLogo:!this.insertedLogoCorner,tlImgAddr:this.environment.tlImageAddr,placementWidth:2*this.placement.imageWidth,placementHeight:2*this.placement.imageHeight})}}))}isBanner(){return this.formatManager.isBanner()}isCarousel(){return this.formatManager.isCarousel()}isImage(){return this.formatManager.isImage()}isCinemagraph(){return this.formatManager.isCinemagraph()}isScroll(){return this.formatManager.isScroll()}isWindow(){return this.formatManager.isWindow()}isPharma(){return this.formatManager.isPharma()}isHdx(){return this.formatManager.isHdx()}isNativeLite(){return this.formatManager.isNativeLite()}isVast(){return!1}isAutoplay(){return!1}isHighImpact(){return!1}isAutoplayingVideo(){return this.isAutoplay()||this.isHighImpact()}isAdChoicesOptOut(){const t=this.params.render_options_bm,i=this.environment.renderOptionsMap;return!!(0,e.hU)(t,i.adchoices_opt_out)}isDemandSideCtaTextOptIn(){const t=this.params.render_options_bm,i=this.environment.renderOptionsMap;return!!(0,e.hU)(t,i.cta_overlay)}shouldVideoPauseOutOfView(){const t=this.params.render_options_bm,i=this.environment.renderOptionsMap,r=this.placement.customOptions.disableOutstreamVideoBehavior,n=(0,e.hU)(t,i.video_pause_out_view);return r||n}isWhitePillarBoxingColorWhite(t){const i=t.render_options_bm,r=this.environment.renderOptionsMap;return(0,e.hU)(i,r.pillar_boxing_color_white)}getParams(){return this.params}getBaseZIndex(){return u.ZP.BASE_Z_INDEX}getVastTag(){return null}needsViewabilityAwareness(){return this.isScroll()||this.isWindow()}hasClickThrough(){return!!this.params.clickthrough_url}isCommerceMedia(){const t={...this.params,...this.params.allImages[1]};return["secondaryLogo","location","productName","price","customerReview"].every((e=>t[e]))}isTemplateComponent(){return!!this.params.template_component_url}_appendThirdPartyTrackers(t){const e=this.creativePayload.settings,i=t.clickthrough_pixels||e.clickthrough_pixels||[],r=t.viewability_pixels||e.viewability_pixels||[],n=t.js_trackers||e.js_trackers||[];let s=t.impression_pixels||e.impression_pixels||[];const a=this._getClickTracker(t);a&&i.push(a);const o=t.third_party_duplicate_rate||e.third_party_duplicate_rate;o&&Math.random()<o&&(s=(t=>{if(!t)return[];const e=t.slice();for(let t=0;t<e.length;t++)e[t].indexOf("?")>-1?e[t]+="&tlcb=${CACHEBUSTER}":e[t]+="?tlcb=${CACHEBUSTER}";return t.concat(e)})(s));const l=e.additional_data.tid,c=t.asset_id||e.asset_id,d=this.expandFirstPartyMacros.bind(this,l,c),h={impressionPixels:s.map(d),clickPixels:i.map(d),viewabilityPixels:r.map(d),jsTrackers:n.map(d)};return Object.assign(t,{thirdPartyTrackers:h})}_determineAnimatedUrl(t){if(!t.animation_variants||!t.animation_variants.length||this.debug)return t.image_url;const e=t.animation_variants;let i,r=100*Math.round((this.placement.imageWidth+100)/100),n=r&&e.indexOf(r)>-1;if(!n&&this.isSmallScreen&&(r=Math.max.apply(null,e),n=!0),n){const e=Math.round(t.image_height/t.image_width*r);Object.assign(t,{focal_box:pe(t,r,e)},{image_width:r,image_height:e}),i=t.image_url.replace(".gif","_a"+r+".gif")}else i=t.image_url;return i}_createImageSrcset(t){return this.createDynamicImageURL(t)+" 2x"}_getClickTracker(t){let e,i;return t.click_tracker_url?(e=t.click_tracker_encoding_level,i=t.click_tracker_url):(e=this.creativePayload.settings.click_tracker_encoding_level,i=this.creativePayload.settings.click_tracker_url),i&&e>0?ue(i,e):i}}class ve extends fe{initParams(){var t;super.initParams(),(null===(t=this._getCarouselWeights())||void 0===t?void 0:t.length)>0?this._setAllImagesWeighted():this._setAllImages()}getAllImages(){return this.allImages}_setAllImages(){this.allImages=(0,e.lX)(this.params.allImages,10)}_setAllImagesWeighted(){this._validateImageIds(),this._validateWeight(),this._validateWeightsSum();const t=this._chooseFirstImage();this._swapFirstImage(t),this.allImages=this.params.allImages.slice(0,10)}_chooseFirstImage(){const t=this._getCarouselWeights(),e=this._getWeightsSum(),i=Math.random()*e;let r=0;return t.find(((e,n)=>(r+=t[n].weight,i<r)))}_getWeightsSum(){return this._getCarouselWeights().reduce(((t,e)=>t+e.weight),0)}_getCarouselWeights(){var t,e;return null===(t=this.params)||void 0===t||null===(e=t.customization)||void 0===e?void 0:e.carousel_weights}_validateImageIds(){const t=this._getCarouselWeights().map((t=>t.image_id)),e=this.params.allImages.map((t=>t.image_id));t.every((t=>e.includes(t)))||this.errorHandler.fireError("There are image_ids in carousel_weights that do not map to an image in the creative.",this.errorHandler.WARNING)}_validateWeightsSum(){const t=this._getWeightsSum();(t<.99||t>1.01)&&this.errorHandler.fireError("Carousel_weights do not sum to 1 within a tolerance of 1%",this.errorHandler.WARNING)}_validateWeight(){this._getCarouselWeights().forEach((t=>{t.weight||(t.weight=0,this.errorHandler.fireError("Image id: "+t.image_id+" does not have an associated weight, defaulted to 0.",this.errorHandler.WARNING))}))}_swapFirstImage(t){const e=this.params.allImages.findIndex((e=>e.image_id===t.image_id)),i=this.params.allImages[e];this.params.allImages[e]=this.params.allImages[0],this.params.allImages[0]=i}}var ye=n(336);class _e extends fe{constructor(t){super(t),this.vastTag=null}getVastTag(){return this.vastTag}setVastTag(t){this.vastTag=t}isVast(){return!0}isAutoplay(){const t=this.environment.formats,e=this.formatManager.getFormat();return+e==+t.autoplay||+e==+t.outstream_video||+e==+t.high_impact_video}isHighImpact(){const t=this.environment.formats;return+this.formatManager.getFormat()==+t.high_impact_video}getBaseZIndex(){return this.vastTag&&this.vastTag.isVpaid()?this.placement.customOptions.videoZIndexOverride||ye.Z.vpaidZIndex:ye.Z.nonVpaidZIndex}needsViewabilityAwareness(){return this.isAutoplay()}allowVpaidToHandleClicks(){return!(!this.vastTag.isVpaid()||!this.isAutoplay()||this.hasClickThrough())}hasClickThrough(){return!(!super.hasClickThrough()&&!this.vastTag.getVastClickThroughUrl())}}class Ie{static create(t){const{creativePayload:e,environment:i}=t,r=e.settings.format_id,n=i.formats,s=[n.video,n.autoplay,n.outstream_video,n.high_impact_video];return r===n.carousel?new ve(t):s.includes(r)?new _e(t):new fe(t)}}var Ae={assets:[{asset_id:0,image_id:0,image_url:u.ZP.DEFAULT_FALLBACK_URL,image_w_over_h:1.7778,clickthrough_url:"http://www.doubleverify.com",heading:"",caption:"",cv_version:1,img_server_params:"v=0&cv_version=1"}],settings:{format_id:1,tactic_id:0,line_item_id:0,insertion_order_id:0,creative_library_id:0,advertiser_name:"Sponsor",additional_data:{clid:0,ioid:0,liid:0,tid:0,advid:0,bmid:0,aid:1}}};const Ce="allowCreative",Se="blockCreative";class we{constructor(t,{errorHandler:e}){this.creativePayload=t,this.iframe=we.makeIframe(),this.errorHandler=e}callDV(){const t=this._makeScriptsString();return this.iframe.contentWindow.document.open(),this.iframe.contentWindow.document.write(t),this.iframe.contentWindow.document.close(),this._handler().catch((t=>(this._onError(t),this._overwriteCreativePayloadWithPSA())))}_handler(){return new Promise(((t,e)=>{this.iframe.contentWindow.onerror=t=>{e(t)},setTimeout((()=>{e(new g.Z("DoubleVerify timeout"))}),1e4),this.iframe.contentWindow[Se]=()=>{this.errorHandler.fireError("DoubleVerify blocked creative, PSA displayed",this.errorHandler.LOG),this._overwriteCreativePayloadWithPSA(),t()},this.iframe.contentWindow[Ce]=t}))}_onError(t){this.errorHandler.fireError(t,this.errorHandler.ERROR)}_overwriteCreativePayloadWithPSA(){this.creativePayload.settings=Ae.settings,this.creativePayload.assets=Ae.assets}static makeIframe(){const t=document.createElement("iframe");return t.style.display="none",document.body.appendChild(t),t}_makeScriptsString(){const{dco_tag_url:t}=this.creativePayload.settings;return'\n      <script type="text/adtag"><script type="text/javascript">'+Ce+'();</scr+ipt><\/script>\n      <script type="text/passback"><script type="text/javascript">'+Se+'();</scr+ipt><\/script>\n      <script onerror="(function(el){el.onerror=\'this._onerror})(this)" type="text/javascript" src="'+t+'"><\/script>\n    '}}const Me="__cmp",Ee="__gpp",Te="__tcfapi",be="tl: CMP timeout";class Le{constructor({win:t,isProxyNeeded:e,errorHandler:i}){(0,p.Z)(this,"cmpTimeout",void 0),this.win=t,this._isProxyNeeded=e,this._errorHandler=i,this._gdprCmpData={tripleliftConsent:!1}}get cmpData(){return this._gdprCmpData}async getCMPData(){if("boolean"!=typeof this._gdprCmpData.gdprApplies)try{await this.checkGdprCompliance()}catch(t){this._errorHandler.fireError("Error getting gdpr CMPData: "+t.message,Ct.Z.LOG)}}async checkGdprCompliance(){try{let n,s;if("function"==typeof this.win[Ee])n=await this.callCmp(Ee,"getGPPData",null);else if("function"==typeof this.win[Me]){var t;n=await this.callCmp(Me,"getConsentData",null),s=null===(t=await this.callCmp(Me,"getVendorConsents",null))||void 0===t?void 0:t.vendorConsents}else if("function"==typeof this.win[Te]){var i,r;this._isProxyNeeded&&this.createParentProxy();const t=(0,e.Z0)()?"getInAppTCData":"getTCData";n=await this.callCmp(Te,t,2),s=null===(i=n)||void 0===i||null===(r=i.vendor)||void 0===r?void 0:r.consents}n&&(this._gdprCmpData=Object.assign(this._gdprCmpData,{gdprApplies:!!n.gdprApplies,consentString:n.consentData||n.tcString,gppString:n.gppString,gppApplicableSections:n.applicableSections}),s&&"boolean"==typeof s[28]&&(this._gdprCmpData.tripleliftConsent=s[28]))}catch(t){throw new g.Z("There was an error in the publisher CMP API: "+(t.message?t.message:t),Ct.Z.LOG)}finally{clearTimeout(this.cmpTimeout)}}async callCmp(t,e,i){return new Promise(((r,n)=>{if(this.cmpTimeout=setTimeout((()=>n(be)),1e3),t===Ee){r(this.win[t](e))}else this.win[t](e,i,r)})).then((i=>Le.isCmpDataValid(i,t)?i:(this._errorHandler.fireError("CMP "+e+" command did not return a valid consent object",Ct.Z.LOG,{data:JSON.stringify(i)}),null))).catch((t=>{const i=t.message||("string"==typeof t?t:e+" command error"),r="object"==typeof t?{data:JSON.stringify(t)}:{};i!==be&&this._errorHandler.fireError(i,Ct.Z.LOG,r)}))}static isCmpDataValid(t,e){return Ee===e?"object"==typeof t:"object"==typeof t&&"boolean"==typeof t.gdprApplies}createParentProxy(){const t={};var e;e=this.win,window[Te]=function(i,r,n,s){const a=""+Math.random(),o={__tcfapiCall:{command:i,parameter:s,version:r,callId:a}};t[a]=n,e.postMessage(o,"*")},window.addEventListener("message",(function(e){let i={};try{i="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){throw new g.Z("Invalid data from CMP API",Ct.Z.LOG)}const r=i.__tcfapiReturn;r&&"function"==typeof t[r.callId]&&(t[r.callId](r.returnValue,r.success),t[r.callId]=null)}),!1)}static getTcfapiWindow(t,i){let r=t;try{for(;r;){var n,s;if(null!==(n=r)&&void 0!==n&&null!==(s=n.frames)&&void 0!==s&&s.__tcfapiLocator)return r;if(r===window.top)break;r=r.parent}}catch(t){(0,e.UP)(.001,(()=>{i.fireError("Error getting _tcfapiLocator: "+t,Ct.Z.LOG)}))}return null}static getCmpApiWindow(t,e){return"function"==typeof t[Me]||"function"==typeof t[Te]||"function"==typeof t[Ee]?t:Le.getTcfapiWindow(t,e)}}const Pe=0,De=1,xe=2,Re=3,Ne=4,ke=5,Oe=6,Ze=7,je=[Pe,Ze,De,Ne,Oe,Re],Ve=[Pe,De,Ze],Ue=[Pe,Ze,De,Ne,Oe,ke,Re],Fe=[ke,xe,Ne,Oe,Re];class Be{constructor({docInfo:t,placement:e}){this.docInfo=t,this.placement=e,this.cachedApis={},this.cachedPageInfo=null,this.cachedFrameType=null}get(){if(this.cachedPageInfo)return this.cachedPageInfo;let t,i,r;return this.docInfo.canAccessTop?(i=(0,e.EC)(this.docInfo.topDocument.referrer).host,i="undefined"===i?"":i,t=this.docInfo.topDocument.URL):(i="can't access top document",this.placement.customOptions.isAmp?t=this.getAmpReferrer():(t=this.docInfo.document.referrer,r=this.placement.customOptions.referrerOverride,r&&r.indexOf((0,e.EC)(t).host)>=0&&(t=document.URL))),t=(0,e.hL)(t,600),this.cachedPageInfo={domain:this.docInfo.document.domain,ref:t,pr:i||"un"},this.cachedPageInfo}getAmpReferrer(){let t;const i=(0,e.EC)(this.docInfo.document.URL);let r;try{r=JSON.parse(i.anchor)}catch(t){r={}}const n=(0,e.EC)(this.docInfo.document.referrer),s={...i.queryKey,...n.queryKey,...r};return t=s.url?decodeURIComponent(s.url):s._context&&s._context.canonicalUrl?s._context.canonicalUrl:s.top?decodeURIComponent(s.top):s.loc?decodeURIComponent(s.loc):s.iu?decodeURIComponent(s.iu):this.docInfo.document.referrer,t}getFrameType(){return null!==this.cachedFrameType||(this.cachedFrameType=this._determineFrameType()),this.cachedFrameType}_determineFrameType(){return this.getAmpApi()?Ne:this.getMraidApi()?Oe:this.getSafeFrameApi()?ke:(0,e.Z0)()?Re:this.docInfo.canAccessTop?this.docInfo.document===this.docInfo.topWindow.document?Pe:this.placement.customOptions.friendlyIframeRender?Ze:De:xe}isNoFrame(){return this.getFrameType()===Pe}isUnfriendlyFrame(){return this.getFrameType()===xe}isFriendlyFrame(){return this.getFrameType()===De}isFriendlyFrameRender(){return this.getFrameType()===Ze}isClientAware(){return je.indexOf(this.getFrameType())>-1}isPositionAware(){return Ve.indexOf(this.getFrameType())>-1}isViewabilityAware(){return Ue.indexOf(this.getFrameType())>-1}isSandboxed(){return Fe.indexOf(this.getFrameType())>-1}isAmp(){return this.getFrameType()===Ne}isWebview(){return this.getFrameType()===Re}isMraid(){return this.getFrameType()===Oe}isSafeFrame(){return this.getFrameType()===ke}getSafeFrameApi(){const t=this._getApi("$sf");return t&&t.ext?t:null}getAmpApi(){const t=this._getApi("context");return t&&t.observeIntersection?t:null}getMraidApi(){return this._getApi("mraid")}getOmidSessionClient(){return this._getApi("OmidSessionClient")}_getApi(t){return void 0===this.cachedApis[t]&&(this.cachedApis[t]=this._findApi(t,this.docInfo.window)),this.cachedApis[t]}_findApi(t,e,i=0){if(i>=5)return null;try{if(e[t])return e[t]}catch(t){return null}return this._findApi(t,e.parent,i+1)}}var We=function(t={},e){return{setAdContainer:function(e){t.adContainer=e},getElDims:function(t){if(!t)throw new g.Z("getElDims: no element present");const e=t.getBoundingClientRect();return{width:e.width,height:e.height}},_publishUpdate:function(){e.publish(i.nP)}}};var He={getRectPctInView:function(t,e){const i=e.width,r=e.height,n=t.width,s=t.height,a=n*s,o=n+Math.min(0,t.left)+Math.min(0,i-t.right),l=s+Math.min(0,t.top)+Math.min(0,r-t.bottom),c=o*l;return Math.max(0,c/a)},getDefaultBoundingClientRect:function(){return{width:0,height:0,x:0,y:0,top:0,bottom:0,left:0,right:0}},sumRects:function(t,e){return{width:t.width,height:t.height,x:t.x+e.x,y:t.y+e.y,top:t.top+e.top,bottom:t.bottom+e.top,left:t.left+e.left,right:t.right+e.left}}};var ze=function(t,i){const r={getAdBoundingRect:s,getBoundingRect:a,getClientDims:o,getAdPctInView:function(){return He.getRectPctInView(s(),o())},getElPctInView:function(t){return He.getRectPctInView(a(t),o())}},n=We(r,i);return t.asyncUtil.addScrollListener(t.win,n._publishUpdate),(0,e.BF)({},n,r);function s(){return r.adContainer.getBoundingClientRect()}function a(t){return t.getBoundingClientRect()}function o(){return{width:t.win.innerWidth,height:t.win.innerHeight}}};var Ge=function(){let t={width:0,height:0},e=He.getDefaultBoundingClientRect();return{getAdBoundingRect:i,getBoundingRect:r,getClientDims:n,getAdPctInView:function(){return He.getRectPctInView(i(),n())},getElPctInView:function(t){return He.getRectPctInView(r(t),n())},_update:function(i,r){e=i,t=r}};function i(){return e}function r(t){const i=t.getBoundingClientRect();return e?He.sumRects(i,e):i}function n(){return t}};var Ye=function(t,i){const r=We({},i),n=Ge();return t.win._tlWebViewUpdatePosition=function(t,e){if(!s(t,e))return;n._update(t,e),r._publishUpdate()},(0,e.BF)({},r,n);function s(t,e){return!(!t||!e)&&(i=n.getAdBoundingRect(),!a(Qe,i,t)||(r=n.getClientDims(),!a(qe,r,e)));var i,r}function a(t,e,i){return!t.some((t=>e[t]!==i[t]))}};const Qe=["width","height","x","y","top","bottom","left","right"],qe=["width","height"];var Je=function(t,i){const r=We({},i),n=Ge();return t.pageInfo.getAmpApi().observeIntersection((function(t){t.forEach((t=>{const e={width:t.rootBounds.width,height:t.rootBounds.height};n._update(t.boundingClientRect,e),r._publishUpdate()}))})),(0,e.BF)({},r,n)};var Xe=function(t){const i=t.pageInfo.getMraidApi(),r=t.errorHandler;return Object.keys(Ke).reduce((function(t,n){let s=i[n];const a=Ke[n];a.validator&&(s=function(t,e,i){return function(...r){const n=e.apply(t,r);i.mraidResult=n;return(0,i.validator)(n),n}}(i,s,a));return s=function(t,i,n,s){const a=(0,e.r3)(r.fireError,r),o="mraid api error. function: "+n+", e: ";return function(...e){let n;try{n=i.apply(t,e)}catch(t){a(o+t,r.LOG,s.mraidResult),n=s.defaultReturn}return n}}(i,s,n,a),t[n]=s,t}),{})};const Ke={getState:{validator:function(t){if($e(t),"string"!=typeof t)throw new g.Z("response is not a string value")},defaultReturn:"default"},isViewable:{validator:function(t){if($e(t),"boolean"!=typeof t)throw new g.Z("response is not a boolean value")},defaultReturn:!1},getCurrentPosition:{validator:function(t){if($e(t),"number"!=typeof t.width||"number"!=typeof t.height||"number"!=typeof t.x||"number"!=typeof t.y)throw new g.Z("response width, height, x and y fields must be numbers")},defaultReturn:{width:0,height:0,x:0,y:0}},getScreenSize:{validator:function(t){if($e(t),"number"!=typeof t.width||"number"!=typeof t.height)throw new g.Z("response width and height fields must be numbers")},defaultReturn:{width:0,height:0}},addEventListener:{},getVersion:{}};function $e(t){if(null==t)throw new g.Z("response is null or undefined")}var ti=function(t,i){const{placement:r,firePix:n,analytics:s}=t,a=Xe(t),o=We({},i),l=Ge();let c,d=0;"loading"===a.getState()?a.addEventListener("ready",h):h();return(0,e.BF)(o,l,{getAdPctInView:function(){if(u())return d;return l.getAdPctInView()}});function h(){n.fireDyn({long1:2e3,string2:a.getVersion(),string3:r.invCode}),u()&&a.addEventListener("exposureChange",p),a.addEventListener("viewableChange",m)}function u(){return"3.0"===a.getVersion()}function p(t){d=t/100,g()}function m(t){t&&s.onePxViewable(),u()||(g(),t?c=setInterval(g,ei):clearInterval(c))}function g(){const t=a.getCurrentPosition(),e=a.getScreenSize(),i={width:t.width,height:t.height,x:t.x,y:t.y,top:t.y,bottom:t.y+t.height,left:t.x,right:t.x+t.width};l._update(i,e),o._publishUpdate()}};const ei=200;var ii=function({pageInfo:t,placement:i,environment:r,errorHandler:n,settings:s,creativePayload:a},o){var l;const c=r.formats,d=[c.image,c.autoplay,c.header_direct_banner,c.native_lite],h=t.getSafeFrameApi(),u=parseInt(null==a||null===(l=a.settings)||void 0===l?void 0:l.format_id,10),p=s.ignoreSafeframeErrors&&d.includes(u),m={getAdBoundingRect:function(){throw new g.Z("getAdBoundingRect is not supported in a safeFrame environment")},getBoundingRect:function(){throw new g.Z("getBoundingRect is not supported in a safeFrame environment")},getClientDims:function(){throw new g.Z("getClientDims is not supported in a safeFrame environment")},getAdPctInView:function(){return h.ext.inViewPercentage()/100},getElPctInView:function(){throw new g.Z("getElPctInView is not supported in a safeFrame environment")}},f=We(m,o);try{const t=h.ext.geom();h.ext.register(t.self.w,t.self.h,(t=>{"geom-update"===t&&f._publishUpdate()}))}catch(t){if(!p)throw t;n.fireError("Ignoring $sf error: "+t.message,n.WARNING),setInterval((()=>{f._publishUpdate()}),1e3)}4913===i.publisherId&&setInterval((()=>{f._publishUpdate()}),1e3);return(0,e.BF)({},f,m)};var ri=function({asyncUtil:t,win:i},r){let n=!0;const s={getAdBoundingRect:o,getBoundingRect:l,getClientDims:c,getAdPctInView:function(){return He.getRectPctInView(o(),c())},getElPctInView:function(t){return He.getRectPctInView(l(t),c())}},a=We(s,r);return t.addScrollListener(i.top,a._publishUpdate),(0,e.BF)({},a,s);function o(){const e=s.adContainer.ownerDocument.defaultView?s.adContainer.ownerDocument.defaultView.frameElement:null;return e?(n&&(t.addScrollListener(e.contentDocument,a._publishUpdate),n=!1),e.getBoundingClientRect()):He.getDefaultBoundingClientRect()}function l(t){const e=t.getBoundingClientRect(),i=o();return He.sumRects(e,i)}function c(){const t=i.top;return{width:t.innerWidth,height:t.innerHeight}}};var ni=function(t,i){const{pageInfo:r}=t;let n;n=r.isMraid()?ti(t,i):r.isWebview()?Ye(t,i):r.isAmp()?Je(t,i):r.isSafeFrame()?ii(t,i):r.isFriendlyFrameRender()?ri(t,i):ze(t,i);const s=(0,e.Xq)(Object.keys(n),si);if(s.length>0)throw new g.Z("positionService invalid. Unmatched keys: "+s.join(", "));return n};const si=["getAdBoundingRect","getAdPctInView","getBoundingRect","getClientDims","getElDims","getElPctInView","setAdContainer"];var ai=n(724),oi=n(805),li=function({placement:t}){return{render:function(e){const i=e.domRefs.mainImage;let r=i&&(i.complete||i.naturalWidth>0);t.customOptions.dontWaitForImageLoad&&(r=!0);i&&"IMG"===i.tagName&&!r&&e.promises.push(new Promise((t=>{i.addEventListener("load",t)})))}}};var ci=n(251),di=n(440),hi=function({creative:t,docInfo:e,eventController:r}){let n,s,a;return{render:function(l){n=l.state,s=t.getParams(),function(){const t=e.document;if(s&&s.image_height&&s.image_width)a={width:s.image_width,height:s.image_height};else{const e=t.createElement("img");e.src=s.image_url,a={width:e.naturalWidth,height:e.naturalHeight}}}(),r.on(i.ql,o)}};function o(t){if(s.isCSR){const{x:e,y:i}=(0,di.rl)(t,a);n.logoOffsetX=e,n.logoOffsetY=i}else n.logoOffsetX=ui,n.logoOffsetY=ui}};const ui=0;var pi=n(973),mi=n(654);class gi{constructor({analytics:t,browserInfo:e,asyncUtil:i,creative:r}){this.analytics=t,this.browserInfo=e,this.asyncUtil=i,this.creative=r}init(t){this.creative.isCommerceMedia()||this.asyncUtil.listen(t.domRefs.mainClickTarget,"click",(()=>this.clickThrough()),!1,!0)}clickThrough(){const{clickthrough_url:t}=this.creative.params;this.analytics.click(),this.browserInfo.isFacebook?this.asyncUtil.timeoutWrap((()=>{(0,mi.l)(t)}),500):(0,mi.l)(t)}}var fi={create:function(t){return new ai.Z({renderers:function(){const{creative:e,placement:i}=t,r=e.getParams(),n=r.customization&&r.customization.reveal||r.isCSR,s=!e.insertedLogoCorner&&n&&!i.customOptions.is3pAdPreview,a=[oi.Z,li];n&&a.push(ci.Z);s&&a.push(hi);return a}(),eventManagers:[pi.Z,gi],initState:{},supportedDomRefs:[]},t)}};var vi={name:"imageRendererFactoryLoader",isSupported:function(t){return t.isImage()},load:function(){return new Promise((t=>{t({default:fi})}))}};var yi=function({creative:t,eventController:r,docInfo:n}){const s=t.getParams();let a,o,l,c;return{render:function(t){a=t,c=n.document.createElement("img"),c.src=s.image_url,r.on(i.ql,d)},_getZoomValues:h};function d(t){const{noCrop:n,no_crop:d}=(0,e.EC)("?"+s.img_server_params).queryKey,u=!(!parseInt(n,10)&&!parseInt(d,10))?{x1:0,x2:s.image_width,y1:0,y2:s.image_height}:s.focal_box;let p,m;if(u){const i=t.width,r=t.height;!function(t,i,r,n){if(i===o&&r===l)return;o=i,l=r;const c=s.image_width,d=s.image_height,u=h(i,r,c,d,n);bt.Z.setStyle(t,"background-repeat","no-repeat"),bt.Z.setStyle(t,"background-size",u.scaledImgWidth+"px"),bt.Z.setStyle(t,"background-position",u.offsetX+"px "+u.offsetY+"px");const{state:p}=a;p.visibleImageWidth=(0,e.DA)(u.scaledImgWidth,i),p.visibleImageHeight=(0,e.DA)(u.scaledImgHeight,r),p.imageBoxingOffsetX=Math.max(Math.floor((i-p.visibleImageWidth)/2),0),p.imageBoxingOffsetY=Math.max(Math.floor((r-p.visibleImageHeight)/2),0)}(a.domRefs.mainImageCsrEl,i,r,u),p=a.state.visibleImageWidth,m=a.state.visibleImageHeight}else g=a.domRefs.mainImageCsrEl,bt.Z.setStyle(g,"background-position","center"),bt.Z.setStyle(g,"background-size","contain"),bt.Z.setStyle(g,"background-repeat","no-repeat"),bt.Z.setStyle(g,"text-align","left"),bt.Z.setStyle(g,"background-color","#FFFFFF");var g;p||m||(p=c.naturalWidth,m=c.naturalHeight),p&&m&&r.publish(i.p0,(0,di.rl)(t,{width:p,height:m}))}function h(t,e,i,r,n){const s=function(t){const{adWidth:e,adHeight:i,imgWidth:r,imgHeight:n,focalWidth:s,focalHeight:a}=t,o=Math.max(e/r,i/n),l=Math.min(e/s,i/a);return Math.min(o,l)}({adWidth:t,adHeight:e,imgWidth:i,imgHeight:r,focalWidth:n.x2-n.x1,focalHeight:n.y2-n.y1}),a=Math.ceil(s*i),o=Math.ceil(s*r),l={};Object.keys(n).forEach((t=>{const e=n[t];l[t]=Math.floor(s*e)}));return{scaledImgWidth:a,scaledImgHeight:o,offsetX:u(t,a,l.x1,l.x2),offsetY:u(e,o,l.y1,l.y2)}}function u(t,e,i,r){if(t>e)return Math.round((t-e)/2);const n=Math.round((t-i-r)/2);return n>0?0:n+e<t?t-e:n}};var _i={create:function(t){const i=[oi.Z,yi,ci.Z],r=t.creative.params;!(0,e.EC)("?"+r.img_server_params).queryKey.noCrop&&r.focal_box||i.push(hi);const n=[pi.Z,gi];return new ai.Z({renderers:i,eventManagers:n,initState:{},supportedDomRefs:[]},t)}};var Ii={name:"cinemagraphRendererFactoryLoader",isSupported:function(t){return t.isCinemagraph()},load:function(){return new Promise((t=>{t({default:_i})}))}};var Ai={name:"carouselRendererFactoryLoader",isSupported:function(t){return t.isCarousel()},load:function(){return n.e(369).then(n.bind(n,577))}};const Ci=1200;class Si{static isXml(t=""){return t.includes("<VAST")&&t.includes("<Ad")}static getAdAspectRatio(t){return parseFloat((t.width/t.height).toFixed(2))}static sortByAspectRatio(t,e,i){const r=Si.getAdAspectRatio(i),n=t=>r===t,s=Si.parsedAspectRatio(t),a=Si.parsedAspectRatio(e),o=n(s),l=n(a);return o&&l?Si.sortByClosestDims(t,e,i):o&&!l?-1:l&&!o?1:Si.sortByAspectRatioDistance(t,e,i)}static sortByAspectRatioDistance(t,e,i){const r=Si.getAdAspectRatio(i),n=Si.parsedAspectRatio(t),s=Si.parsedAspectRatio(e),a=t=>Math.abs(t-r),o=a(n),l=a(s);return o<l?-1:l<o?1:Si.sortByClosestDims(t,e,i)}static sortMediaBySize(t,e,i){const r={width:i.imageWidth,height:i.imageHeight},n=Si.dimsLessThanPlacement(t,r),s=Si.dimsLessThanPlacement(e,r);return!n&&s?-1:n&&!s?1:Si.sortByAspectRatio(t,e,r)}static orderBestMediaFiles(t){const e=[],i=[],r=[],n=[],s=(t,e)=>"desc"===e?t.sort(((t,e)=>e.getAttribute("bitrate")-t.getAttribute("bitrate"))):t.sort(((t,e)=>t.getAttribute("bitrate")-e.getAttribute("bitrate")));return t.forEach((t=>{const s=wi(t,"bitrate");s?s>=400&&s<Ci?e.push(t):s<Ci?i.push(t):n.push(t):r.push(t)})),s(i,"desc"),s(n),[...e,...i,...n,...r]}static dimsLessThanPlacement(t,e){const i=wi(t,"height");return wi(t,"width")<e.width||i<e.height}static parsedAspectRatio(t){const e=wi(t,"height"),i=wi(t,"width");return e?parseFloat((i/e).toFixed(2)):0}static distanceByDims(t,e){return{width:Math.abs(wi(t,"width")-e.width),height:Math.abs(wi(t,"height")-e.height)}}static sortByClosestDims(t,e,i){const r=Si.distanceByDims(t,i),n=Si.distanceByDims(e,i),s=r.width<n.width&&r.height<n.height,a=r.width>n.width&&r.height>n.height;return s?-1:a?1:Si.sortByBestDeskTopBitRate(t,e)}static sortByBestDeskTopBitRate(t,e){const i=wi(t,"bitrate"),r=wi(e,"bitrate");if(i&&r){const t=i>=400&&i<Ci,e=r>=400&&r<Ci;return t&&!e?-1:!t&&e?1:r-i}return i?1:-1}static byBestBitrateMobile(t,e,i){const r=t=>Math.abs(wi(t,"bitrate")-750),n=wi(t,"bitrate"),s=wi(e,"bitrate");return n===s?Si.sortMediaBySize(t,e,i):!n&&s?1:!s&&n?-1:r(t)-r(e)}}function wi(t,e){return parseInt(t.getAttribute(e),10)}class Mi{constructor(t){let e;if(!window.DOMParser)throw new g.Z("DOMParser API unavailable");e=new DOMParser,this.xmlDocument=e.parseFromString(t,"application/xml"),this._validateVastXml()}querySelector(t){return this.xmlDocument.querySelector(t)}querySelectorAll(t){return this.xmlDocument.querySelectorAll(t)}_validateVastXml(){const t=()=>{if(!this.querySelector("VASTAdTagURI"))throw new g.Z("Missing VASTAdTagURI element")},e=()=>{if(!this.querySelector("Creative"))throw new g.Z("Missing Creative element(s)");if(!!!this.querySelector("Linear"))throw new g.Z("Missing Linear element(s)")};if(!this.querySelector("VAST"))throw new g.Z("Missing VAST element");if(!this.querySelector("Ad"))throw new g.Z("Missing Ad element");if(this.querySelector("Wrapper"))t();else{if(!this.querySelector("InLine"))throw new g.Z("Missing InLine and Wrapper element");e()}}}var Ei=n(906);const Ti=new Promise((()=>{}));class bi{constructor({eventController:t,firePix:e}){(0,p.Z)(this,"timeoutID",void 0),(0,p.Z)(this,"vastWrapperBreadcrumbs",[]),(0,p.Z)(this,"impressionTrackers",[]),(0,p.Z)(this,"assortedTrackers",[]),(0,p.Z)(this,"videoClickTrackers",[]),(0,p.Z)(this,"adVerifications",[]),(0,p.Z)(this,"expandMacros",void 0),this.eventController=t,this.firePix=e}async getVastXml(t){this.expandMacros=e=>t.expandFirstPartyMacros(t.params.additional_data.tid,t.params.asset_id,e);const e=t.params.vast_xml;return Si.isXml(e)?this._parseVastContent(e):this._fetchVast(e)}async _fetchVast(t){const i=this.expandMacros(t);this.vastWrapperBreadcrumbs.push({url:t,expandedUrl:i});try{this._startRedirectTimeout();const t=await(0,e.hj)(i,"GET");this._clearRedirectTimeout();const r=t.target.responseText;return this._parseVastContent(r)}catch(t){this._clearRedirectTimeout();const e="Wrapper redirect failed. Possible causes include 404s and CORS errors";return this._vastWrapperError(e),Ti}}async _parseVastContent(t){if(!t)throw new g.Z("Missing vastXml");let e;try{e=new Mi(t)}catch(t){return this.eventController.publish(i.TZ,Ei.Z.VAST_ERROR_VAST_SCHEMA,{message:t.message}),Ti}try{const t=e.querySelector("Ad InLine"),r=e.querySelector("Ad Wrapper");if(this._collectImpressionTrackers(t||r),this._collectAdVerifications(t||r),r){if(this._collectCreativeTrackers(r),this._hasExceededRedirectLimit())return Ti;try{return await this._fetchVast(r.querySelector("VASTAdTagURI").textContent)}catch(t){this._clearRedirectTimeout(),this.eventController.publish(i.TZ,Ei.Z.VAST_WRAPPER_ERROR)}}if(t)return e}catch(t){this.eventController.publish(i.TZ,Ei.Z.VAST_WRAPPER_ERROR)}return Ti}getImpressionTrackers(t){return[...[].slice.call(t.querySelectorAll("Impression")),...this.impressionTrackers]}getVideoClickTrackers(t){return[...[].slice.call(t.querySelectorAll("ClickTracking")),...this.videoClickTrackers]}getAssortedTrackers(t){return[...[].slice.call(t.querySelectorAll("TrackingEvents Tracking")),...this.assortedTrackers]}getAdVerifications(){return this.adVerifications}_collectAdVerifications(t){this.adVerifications.push(...t.querySelectorAll("AdVerifications"))}getBreadcrumbs(){return this.vastWrapperBreadcrumbs}_collectImpressionTrackers(t){const e=[].slice.call(t.querySelectorAll("Impression"));e.length&&(this.impressionTrackers=[...this.impressionTrackers,...e])}_collectCreativeTrackers(t){const e=[].slice.call(t.querySelectorAll("TrackingEvents Tracking")),i=[].slice.call(t.querySelectorAll("ClickTracking"));this.assortedTrackers=[...this.assortedTrackers,...e],this.videoClickTrackers=[...this.videoClickTrackers,...i]}_startRedirectTimeout(){this.timeoutID=setTimeout((()=>{this.eventController.publish(i.TZ,Ei.Z.VAST_WRAPPER_TIMEOUT)}),5e3)}_clearRedirectTimeout(){clearTimeout(this.timeoutID)}_hasExceededRedirectLimit(){return this.getBreadcrumbs().length>=10&&(this.eventController.publish(i.TZ,Ei.Z.VAST_TOO_MANY_REDIRECTS),!0)}_vastWrapperError(t){this.eventController.publish(i.TZ,Ei.Z.VAST_WRAPPER_ERROR,{message:t,diagnosticContext:{...this.vastWrapperBreadcrumbs}})}}const Li={"video/mp4":!0};class Pi{constructor({placement:t,environment:{renderOptionsMap:e},settings:i},{creative:r,firePix:n,asyncUtil:s,eventController:a}){this.placement=t,this.renderOptionsMap=e,this.settings=i,this.creativeObj=r,this.asyncUtil=s,this.vastParser=new bi({eventController:a,firePix:n}),this.vastXml=null,this.InLine=null,this.Creative=null}async getVastXml(){this.vastXml=await this.vastParser.getVastXml(this.creativeObj),this.InLine=this.vastXml.querySelector("InLine"),this.Creative=this.InLine.querySelector("Creative")}getAdParameters(){const t=this.Creative.querySelector("AdParameters");return t?t.textContent:null}getAdSystem(){const t=this.InLine.querySelector("AdSystem");return t?t.textContent:null}getDurationMS(){const t=this.Creative.querySelector("Duration")||{};return(0,e.LB)(t.textContent)}getVastClickThrough(){return this.Creative.querySelector("ClickThrough")}getVastClickThroughUrl(){const t=this.getVastClickThrough();return t?t.textContent:null}getMediaFiles(t=this.Creative){return[].slice.call(t.querySelectorAll("MediaFile"))}getAdVerifications(){let t=this.vastParser.getAdVerifications();return t=t.filter((t=>t.querySelector('JavaScriptResource[apiFramework="omid"]'))),t.map((t=>{var i,r;const n=null===(i=t.querySelector("JavaScriptResource"))||void 0===i?void 0:i.textContent.trim(),s=null===(r=t.querySelector("VerificationParameters"))||void 0===r?void 0:r.textContent.trim();return{javascriptResource:n,verificationParameters:s,vendor:t.querySelector("Verification").getAttribute("vendor").trim(),url:s?n+"?"+(0,e.xp)(s):n}}))}getLinear(){return this.Creative.querySelector("Linear")}getImpressionTrackers(){return this.vastParser.getImpressionTrackers(this.getLinear())}getVideoClickTrackers(){return this.vastParser.getVideoClickTrackers(this.getLinear())}getAssortedTrackers(){return this.vastParser.getAssortedTrackers(this.getLinear())}getVastWrapperBreadcrumbs(){return this.vastParser.getBreadcrumbs()}useNextVpaidCreative(){const t=this._getNextVpaidCreative();return t&&(this.Creative=t),t}_getNextVpaidCreative(){const t=[].slice.call(this.InLine.querySelectorAll("Creative")),e=t.indexOf(this.Creative);return t.slice(e+1).find((t=>this._getJavascriptVpaid(t).length>0))}chooseBestMediaFiles({useBitrate:t=!1}={}){const e=this.isVpaid()?this._getJavascriptVpaid():this._getSupportedMediaFiles();if(!e.length)return this.getMediaFiles();if(t)return e.sort(((t,e)=>Si.byBestBitrateMobile(t,e,this.placement))).slice(0,1);const i=e.slice().sort(((t,e)=>Si.sortMediaBySize(t,e,this.placement)));return Si.orderBestMediaFiles(i)}_getJavascriptVpaid(t=this.Creative){return this.getMediaFiles(t).filter((t=>{const e="VPAID"===t.getAttribute("apiFramework"),i=t.getAttribute("type");return e&&("application/x-javascript"===i||"application/javascript"===i)}))}_getSupportedMediaFiles(){return this.getMediaFiles().filter((t=>Li[t.getAttribute("type")]))}isVpaid(){const t=[].slice.call(this.Creative.querySelectorAll("MediaFile"));return!!t.length&&t.some((t=>"VPAID"===t.getAttribute("apiFramework")))}}var Di={name:"videoRendererFactoryLoader",isSupported:function(t){return t.isVast()},load:async function({placement:t,environment:e,settings:i,creative:r,firePix:s,errorHandler:a,eventController:o,asyncUtil:l}){const c=new Pi({placement:t,environment:e,settings:i},{creative:r,eventController:o,firePix:s,asyncUtil:l});return r.setVastTag(c),Ei.Z.listen({errorHandler:a,eventController:o}),await c.getVastXml(),Promise.resolve().then(n.bind(n,283))}};var xi={name:"scrollRendererFactoryLoader",isSupported:function(t){return t.isScroll()},load:function(){return n.e(916).then(n.bind(n,725))}};var Ri={name:"windowRendererFactoryLoader",isSupported:function(t){return t.isWindow()},load:function(){return n.e(778).then(n.bind(n,838))}};var Ni=function({creative:t,eventController:r,analytics:n,firePix:s}){const{banner_markup:a,banner_height:o,banner_width:l}=t.params;return{render:function(n){const s=n.domRefs,a=function(){const n=c(),s=document.createElement("iframe"),a="<!DOCTYPE html><html><head></head><body>"+n+"</body></html>";s.className=ki,s.height=o,s.width=l,s.frameBorder="0",s.scrolling="no",s.marginHeight="0",s.marginWidth="0",s.tabIndex=-1,s.setAttribute("allowtransparency","true"),s.setAttribute("hidefocus","true");const d=()=>{var t;const e=null===(t=s.contentWindow)||void 0===t?void 0:t.document;e.open(),e.write(a),e.close(),s.removeEventListener("load",d)};return r.on(i.RU,(()=>{var t,e;"complete"===(null===(t=s.contentWindow)||void 0===t||null===(e=t.document)||void 0===e?void 0:e.readyState)?d():s.addEventListener("load",d)})),(0,e.Nj)(t.params.additional_data.adid,s),s}();return s.adWrapper=a,s.adWrapperWithDims=a,s.mainImage=a,s},_expandClickMacro:c};function c(){const e=t.params.additional_data.pr,i=t.params.additional_data.biid;let r="";"AUDIT"!==e?r=n.getRedirectClickUrl():s.fireDyn({long1:i,string2:"AUDIT_DYN"});const o=u.ZP.DISPLAY_CLICK_MACROS;let l=a;return o.forEach((t=>{const{regex:e,level:i}=t;if(e.test(l)){const t=ue(r,i);l=l.replace(e,t)}})),l}};const ki=u.ZP.TL_CLASS_PREFIX+"iframe";var Oi={create:function(t){return new ai.Z({renderers:[Ni],eventManagers:[pi.Z],initState:{},supportedDomRefs:[]},t)}};var Zi={load:function({placement:t,environment:e,settings:i,creative:r,firePix:n,errorHandler:s,eventController:a,asyncUtil:o}){const l=function(t,e){const i=t.find((t=>t.isSupported(e)));void 0===i&&function(){throw new g.Z("Supported renderer factory not found.")}();return i}(ji,r),c=function(t,e){return t.filter((t=>t.isSupported(e)))}(Vi,r).map((t=>t.load())),d=l.load({placement:t,environment:e,settings:i,creative:r,firePix:n,errorHandler:s,eventController:a,asyncUtil:o});return c.unshift(d),Promise.all(c)}};const ji=[vi,Ii,Ai,Di,xi,{name:"pharmaRendererFactoryLoader",isSupported:function(t){return t.isPharma()},load:function(){return n.e(951).then(n.bind(n,604))}},Ri,{name:"bannerRendererFactoryLoader",isSupported:function(t){return t.isBanner()},load:function(){return new Promise((t=>{t({default:Oi})}))}}],Vi=[{name:"revealConfigFactoryLoader",isSupported:function(t){return t.params.customization&&t.params.customization.reveal},load:function(){return n.e(912).then(n.bind(n,796))}},{name:"commerceMediaConfigFactoryLoader",isSupported:function(t){return t.isCommerceMedia()},load:function(){return n.e(138).then(n.bind(n,451))}}];class Ui{constructor({topWindow:t}){const i=t.document,r=[i.URL,i.referrer,window.document.URL,window.document.referrer].find(Ui.isTripleLiftTest);if(this.debugFlag=!!r,r){const t=(0,e.EC)(r),{tl_image_id:i,tl_template_id:n,tid:s,tl_dyn_id:a,tl_scu_id:o,tl_preview_id:l,tp_preview_id:c,tl_debug_log:d,view_type:h,tlBidUrl:u}=t.queryKey;this.tlImageId=i,this.tlTemplateId=n||s,this.debugLog=!!d,this.tlBidUrl=!!u&&decodeURIComponent(u),this.forceBidUrl=!(!l&&!c),this.adPreview=!!(l||c||h),this.thirdPartyAdPreview=!!c,this.tlPreviewId=l,this.tpPreviewId=c,this.tlDynId=a||o}}static isTripleLiftTest(t){return"string"==typeof t&&t.toLowerCase().includes("triplelifttest=true")}}var Fi=n(85);class Bi extends Fi.ZP{constructor(t){super(t),this.priority=Fi.jT.SECOND}async run(){this.eventController.publish(i.RB),super.run()}}class Wi{constructor(t){(0,p.Z)(this,"eventController",void 0),(0,p.Z)(this,"runners",[]),this.eventController=t,t.on(i.P7,(()=>this.runFallbacks()))}addManager(t){const e=this.runners.findIndex((e=>e.priority===t.priority));-1!==e?this.runners.splice(e,1,t):this.runners.push(t)}async runFallback(t){t.state===Fi.Tl.init&&t.conditionsMet()&&await t.run()}async runFallbacks(){this.runners.sort(((t,e)=>t.priority-e.priority));for(let t=0;t<this.runners.length&&(await this.runFallback(this.runners[t]),!this.runners[t].success);t++);}}class Hi{constructor(t){(0,p.Z)(this,"asset_id",void 0),(0,p.Z)(this,"image_id",void 0),(0,p.Z)(this,"image_url",void 0),(0,p.Z)(this,"image_width",void 0),(0,p.Z)(this,"image_height",void 0),(0,p.Z)(this,"heading",void 0),(0,p.Z)(this,"caption",void 0),(0,p.Z)(this,"cta",void 0),(0,p.Z)(this,"clickthrough_url",void 0),(0,p.Z)(this,"click_tracker_encoding_level",void 0),(0,p.Z)(this,"img_server_params",void 0),(0,p.Z)(this,"impression_pixels",void 0),(0,p.Z)(this,"viewability_pixels",void 0),(0,p.Z)(this,"js_trackers",void 0),(0,p.Z)(this,"clickthrough_pixels",void 0),(0,p.Z)(this,"omidTracker",void 0),(0,p.Z)(this,"length_seconds",void 0),(0,p.Z)(this,"cc_url",void 0),(0,p.Z)(this,"vast_xml",void 0),(0,p.Z)(this,"img_frame",void 0),(0,p.Z)(this,"animation_variants",void 0),(0,p.Z)(this,"image_render_params",void 0),(0,p.Z)(this,"banner_width",void 0),(0,p.Z)(this,"banner_height",void 0),(0,p.Z)(this,"banner_markup",void 0),(0,p.Z)(this,"end_card",void 0),(0,p.Z)(this,"feature",void 0),(0,p.Z)(this,"background",void 0),(0,p.Z)(this,"splash",void 0),(0,p.Z)(this,"prv_sample_rate",void 0),this.cta=null==t?void 0:t.cta}}class zi extends Hi{constructor(t,e){super(e),this.banner_markup=t.adm,this.banner_width=null==t?void 0:t.w,this.banner_height=null==t?void 0:t.h}}class Gi extends Hi{constructor(t,e,i){super(i),this.populateAssets(t.native.asset,e,i),this.populateEvents(t.event,e)}populateAssets(t,e,i){for(let r=0;r<t.length;r++){const n=t[r];e===this.getMultiIndex(n)&&(n.title?this.heading=n.title.text:n.data?this.populateDataAsset(n,i):n.image?this.populateImageAsset(n,i):n.video?this.populateVideoAsset(n):n.link&&(this.clickthrough_url=n.link.url,this.clickthrough_pixels=n.link.trkr))}}populateImageAsset(t,e){const i=t.image,r=t.image.ext,n=t.image.type;n===O?this.populateMainImageAsset(i,r):n===k?this.populateLogoAsset(e,i,r):n===Z?this.end_card=i.url:n===j?this.background=i.url:n===V?this.feature=i.url:n===U?this.splash=i.url:n===F?this.secondaryLogo=i.url:n===B&&(this.end_card_advertiser=i.url)}populateVideoAsset(t){if(this.vast_xml=t.video.curl?t.video.curl:t.video.adm,this.creative_type="vast",t.video.ext){const e=t.video.ext.tlVideo;this.length_seconds=e.durationMs/1e3,this.cc_url=e.closedCaptionUrl,this.use_vast_clickthrough=e.useVastClickthrough}}populateLogoAsset(t,e,i){t.logo_image_url=e.url,t.logo_width=e.w,t.logo_height=e.h,t.alt_logo_image_url=null==i?void 0:i.altUrl}populateMainImageAsset(t,e){if(this.image_url=t.url,t.w&&(this.image_width=t.w),t.h&&(this.image_height=t.h),null!=e&&e.tlImage){var i;const t=e.tlImage;if(this.image_id=t.imageId,t.renderParameters){this.image_render_params=t.renderParameters;const e=[];Object.entries(t.renderParameters).forEach((([t,i])=>this.addValue(e,t,i))),this.img_server_params=e.join("&")}if(t.focalRectangle){const e=t.focalRectangle,i={};i.x1=e.topLeftX,i.x2=e.topLeftX+e.width,i.y1=e.topLeftY,i.y2=e.topLeftY+e.height,this.focal_box=i}(null===(i=t.animationVariants)||void 0===i?void 0:i.length)>0&&(this.animation_variants=t.animationVariants)}else this.image_id=-1}populateDataAsset(t,e){const i=t.data.value,r=t.data.type;r===v?this.caption=i:r===_?this.sub_heading=i:r===I?this.cta=i:r===E?this.img_frame=i:r===y?this.price=i:r===S?this.location=i:r===x?e.disclosure.text=i:r===R?e.disclosure.render_method=i:r===P?e.isi_url=i:r===D?e.customization=i:r===f?e.advertiser_name=i:r===A?this.customerReview=i:r===C?this.productName=i:r===w?this.date=i:r===M?this.time=i:r===N&&(e.template_component_url=i)}populateEvents(t,e){for(let i=0;i<t.length;i++){const r=t[i];if(e!==this.getMultiIndex(r))continue;const n=r.type,s=r.method;if(n===Y)s===z?(this.impression_pixels||(this.impression_pixels=[]),this.impression_pixels.push(r.url)):s===G&&(this.js_trackers||(this.js_trackers=[]),this.js_trackers.push(r.url));else if(n===Q&&s===z)null==this.viewability_pixels&&(this.viewability_pixels=[]),this.viewability_pixels.push(r.url);else if(n===q&&s===z)null==this.clickthrough_pixels&&(this.clickthrough_pixels=[]),this.clickthrough_pixels.push(r.url);else if(n===J&&s===G){const t=r.ext;let e=null;(t.omidVendorKey||t.omidVerificationParameter.length>0)&&(e={omidVendorKey:t.omidVendorKey,omidVerificationParameter:t.omidVerificationParameter}),this.omidTracker={event:X,method:K,url:r.url,ext:e}}}}getMultiIndex(t){var e;return(null==t||null===(e=t.ext)||void 0===e?void 0:e.tlMultiIndex)||0}addValue(t,e,i){i&&t.push(e+"="+encodeURIComponent(i))}}class Yi{constructor(e){(0,p.Z)(this,"format_id",void 0),(0,p.Z)(this,"additional_data",void 0),(0,p.Z)(this,"template_id",void 0),(0,p.Z)(this,"customization",void 0),(0,p.Z)(this,"payable_event",void 0),(0,p.Z)(this,"billable_event",void 0),(0,p.Z)(this,"billable_pixel",void 0),(0,p.Z)(this,"adchoices_url",void 0),(0,p.Z)(this,"client_side_render",void 0),(0,p.Z)(this,"nob_passthru",void 0),(0,p.Z)(this,"render_options_bm",void 0),(0,p.Z)(this,"creativeAssetId",void 0),(0,p.Z)(this,"viewability",void 0),(0,p.Z)(this,"prv_sample_rate",void 0),(0,p.Z)(this,"dco_tag_url",void 0),(0,p.Z)(this,"dco_protocol",void 0),(0,p.Z)(this,"banner_width",void 0),(0,p.Z)(this,"banner_height",void 0),(0,p.Z)(this,"disclosure",void 0),(0,p.Z)(this,"cta",void 0),(0,p.Z)(this,"isi_url",void 0),(0,p.Z)(this,"logo_image_url",void 0),(0,p.Z)(this,"logo_width",void 0),(0,p.Z)(this,"logo_height",void 0),(0,p.Z)(this,"alt_logo_image_url",void 0),(0,p.Z)(this,"advertiser_name",void 0),(0,p.Z)(this,"ad_markup",void 0),(0,p.Z)(this,"customerReview",void 0),(0,p.Z)(this,"productName",void 0),(0,p.Z)(this,"location",void 0),(0,p.Z)(this,"date",void 0),(0,p.Z)(this,"time",void 0),(0,p.Z)(this,"template_component_url",void 0),this.format_id=e.tlFormatId,this.additional_data=e.tlAdditionalData,this.template_id=e.templateId,this.customization=e.customization,this.payable_event=e.payableEvent,this.billable_event=e.billableEvent,this.billable_pixel=e.billablePixel,this.adchoices_url=e.adchoicesUrl,this.client_side_render=e.clientSideRender,this.nob_passthru=e.nobPassthru,this.render_options_bm=e.renderOptionsBm,this.creativeAssetId=e.creativeAssetId,this.viewability=e.viewability,this.prv_sample_rate=e.prvSampleRate,this.dco_tag_url=e.dcoTagUrl,this.dco_protocol=e.dcoProtocol,this.banner_width=e.bannerWidth,this.banner_height=e.bannerHeight,this.disclosure={text:"Learn more",render_method:t.X8.DRM_DEFAULT},this.template_component_url=e.templateComponentUrl}}class Qi extends Hi{constructor(t,e){var i,r;super(e),this.vast_xml=t.curl?t.curl:t.adm,this.creative_type="vast",this.length_seconds=this.getDuration(t),this.cc_url=null===(i=t.ext)||void 0===i||null===(r=i.tlVideo)||void 0===r?void 0:r.closedCaptionUrl}getDuration(t){var e;const i=null===(e=t.ext)||void 0===e?void 0:e.tlVideo;let r=0;return r=null!=i&&i.durationMs?i.durationMs()/1e3:t.dur,r}}class qi{constructor(t,e,i){this.display=t.display,this.video=t.video,this.assets=[],this.settings=t.ext?new Yi(t.ext):e,this.video?this.populateVideoAssets():i?this.populateBannerAssets():this.display&&this.display.native&&(this.populateNativeAssets(t),this.populateNativeSettings(t))}populateNativeAssets(t){var e;const i=t.display;let r=1;null!==(e=i.native.ext)&&void 0!==e&&e.tlMultiCount&&(r=i.native.ext.tlMultiCount);const n=i.native.link;for(let e=0;e<r;e++){var s;const r=new Gi(i,e,this.settings);this.assets.push(r),n&&this.setLink(r,n),r.asset_id=null===(s=t.ext)||void 0===s?void 0:s.creativeAssetId}}setLink(t,e){e.url&&(t.clickthrough_url=e.url);0!==e.trkr.length&&(t.clickthrough_pixels=e.trkr)}populateNativeSettings(t){var e,i,r,n,s,a,o,l;this.settings.ad_markup=null==t||null===(e=t.display)||void 0===e?void 0:e.adm,this.settings.adchoices_url=null==t||null===(i=t.display)||void 0===i?void 0:i.priv,this.settings.dco_protocol=null==t||null===(r=t.display)||void 0===r||null===(n=r.native)||void 0===n||null===(s=n.ext)||void 0===s?void 0:s.tlDcoProtocol,this.settings.dco_tag_url=null==t||null===(a=t.display)||void 0===a||null===(o=a.native)||void 0===o||null===(l=o.ext)||void 0===l?void 0:l.assetsurl}populateVideoAssets(){const t=new Qi(this.video,this.settings);this.assets.push(t)}populateBannerAssets(){const t=new zi(this.display,this.settings);this.assets.push(t)}}class Ji{constructor({ad:t,settings:e},i,r){if(t)try{var n,s;this.ad=new qi(t,e,r);const a={long1:Kt.Fx,string2:JSON.stringify(null===(n=this.ad)||void 0===n?void 0:n.assets).slice(0,600),string3:JSON.stringify(null===(s=this.ad)||void 0===s?void 0:s.settings).slice(0,100)},o=.01;Math.random()<o?i.firePix.fireDyn(a):i.firePix.fireDyn({long1:Kt.Fx})}catch(e){i.fireError("Error parsing assets to DCR: "+e.toString(),i.ERROR,t)}}getAssets(){var t;return null===(t=this.ad)||void 0===t?void 0:t.assets}getSettings(){var t;return null===(t=this.ad)||void 0===t?void 0:t.settings}}const{NW:Xi,NE:Ki,SE:$i,SW:tr}=u.ZP,er="revealTrigger",ir="logo",rr="adchoices",nr="muteButton",sr="blacklisted",ar=[Ki,Xi,$i,tr],or=ar;class lr{constructor({creative:t,placement:e,browserInfo:i,errorHandler:r,hasCtaMacro:n}){this.creative=t,this.placement=e,this.browserInfo=i,this.toConfig=this.toConfig.bind(this),this.errorHandler=r,this.hasCtaMacro=n,this.insertedLogoCorner="",this.domRefs=null,this.state=null,this.corners={[Xi]:null,[Ki]:null,[$i]:null,[tr]:null},this.blackListCorners(),this.elements=[{name:nr,isNeeded:()=>!!this.domRefs[nr],getCorner:()=>this.getMuteCorner(),getElement:()=>this.domRefs[nr].el,getOffsets:()=>this.getMuteOffsets()},{name:er,isNeeded:()=>!!this.domRefs[er],getCorner:()=>this._getElementCorner(er)||this.getRevealCorner(),getElement:()=>this.domRefs[er],getOffsets:()=>this.getDefaultOffsets(),getCallback:(t,e)=>this.getRevealCallback(t,e)},{name:ir,isNeeded:()=>this.needsLogo(),getCorner:()=>this._getElementCorner(ir)||this.getLogoCorner(),getElement:()=>this.domRefs[ir]||this.domRefs.videoLogo,getOffsets:()=>this.getLogoOffsets()},{name:rr,isNeeded:()=>this.needsAdChoices(),getElement:()=>this.domRefs[rr],getCorner:()=>this.getAdChoicesCorner(),getOffsets:()=>this.getDefaultOffsets(),getCallback:(t,e)=>this.getAdChoicesCallback(t,e)}],this.setLogoCornerForImageServer(),this.creative.insertedLogoCorner=this.insertedLogoCorner,this.creative.setImageUrlAndSrcSet()}create(){return this.elements.filter((t=>t.isNeeded())).slice(0,4).map(this.toConfig)}toConfig(t){const e={};e.element=t.getElement(),e.corner=t.getCorner();const{xOffsetPx:i,yOffsetPx:r}=t.getOffsets();return e.xOffsetPx=i,e.yOffsetPx=r,"function"==typeof t.getCallback&&(e.callback=t.getCallback(e.element,e.corner)),this.corners[e.corner]=t.name,e}_getElementCorner(t){var e;return null===(e=Object.entries(this.corners).filter((([,e])=>e===t))[0])||void 0===e?void 0:e.shift()}getAlignment(){return this.creative.isVast()||this.creative.isCinemagraph()?lr.CREATIVE_CONTENT:lr.MAIN_IMAGE_SLOT}getRevealCorner(){const t=this.getPreferredRevealCorner();return this.getPreferredOrEmptyCorner(this.getEmptyCorners(),t,!0)}getAdChoicesCorner(){return this.getPreferredOrEmptyCorner(this.getEmptyCorners(),or,!0)}getLogoCorner(){const t=this.getLogoPreferredCorner()||Xi;return this.getPreferredOrEmptyCorner(this.getEmptyCorners(),[t],!1)}getLogoPreferredCorner(){return this.getImgServerArgs().queryKey.lp}getImgServerArgs(){const t=this.creative.getParams();return(0,e.EC)("?"+t.img_server_params)}setLogoCornerForImageServer(){var t;let e="";const i=this.creative.getParams();if(!(!this.hasCtaMacro&&this.creative.isDemandSideCtaTextOptIn())&&(null===(t=i.imageServerParams)||void 0===t?void 0:t.logo)&&!this.creative.isPharma()&&!this.creative.isAutoplayingVideo()&&!this.creative.isCinemagraph()&&!this.creative.isWindow()){var r,n;null!==(r=i.customization)&&void 0!==r&&r.reveal&&(this.corners[this.getRevealCorner()]=er);e=this.getPreferredOrEmptyCorner(this.getEmptyCorners(),[null===(n=i.imageServerParams)||void 0===n?void 0:n.lp],!1),ar.includes(e)&&(this.insertedLogoCorner=e,this.corners[e]=ir)}}getMuteCorner(){return this.creative.isHighImpact()?this.getPreferredOrEmptyCorner(this.getEmptyCorners(),[$i],!0):this.getPreferredOrEmptyCorner(this.getEmptyCorners(),[tr],!0)}needsAdChoices(){return!(this.state.isAdChoiceFromTemplate||this.creative.isAdChoicesOptOut())}needsLogo(){if(this.areAllCornersLogoBlacklisted()||this._getElementCorner(ir))return!1;if(this.creative.isVast()){const t=this.browserInfo.isMobile,e=this.creative.params.logo_image_url,i=this.placement.logoBlackList||"",r=Xi,n=-1===i.indexOf(r);return e&&n&&!t&&!!this.domRefs.videoLogo}return!!this.domRefs[ir]}getEmptyCorners(){return Object.keys(this.corners).filter((t=>null===this.corners[t]))}getBlackListedCorners(){return Object.keys(this.corners).filter((t=>this.corners[t]===sr))}blackListCorners(){const{logoBlackList:t}=this.placement;if(t){(0,e.A2)(t).split(",").forEach((t=>{this.corners[t]=sr}))}}areAllCornersLogoBlacklisted(){return Object.values(this.corners).every((t=>t===sr))}getPreferredOrEmptyCorner(t,i,r){let n=i.find((i=>t.indexOf((0,e.A2)(i))>-1));return!n&&r&&(n=i.find((t=>this.getBlackListedCorners().indexOf((0,e.A2)(t))>-1))),n||this.getEmptyCorners()[0]}getPreferredRevealCorner(){var t;let i=[tr,$i,Xi,Ki];const r=null===(t=this.creative.getParams().customization.reveal.trigger)||void 0===t?void 0:t.corner;return r&&(i=i.filter((t=>t!==(0,e.A2)(r))),i.unshift((0,e.A2)(r))),i}getRevealCallback(t,e){const i={[Xi]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJtYXRyaXgoMSAwIDAgLTEgMCA0NSkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgMGw0NSA0NUgweiIvPjxyZWN0IGZpbGw9IiMwMDAiIHg9IjEwIiB5PSIxNCIgd2lkdGg9IjIxIiBoZWlnaHQ9IjIyIiByeD0iMiIvPjxwYXRoIGQ9Ik0yNy40NzkgMTcuMjI1YS44MTYuODE2IDAgMCAwLS41OC0uMjM2SDE3LjYxYS44MTYuODE2IDAgMCAwLS41OC4yMzYuODI3LjgyNyAwIDAgMCAwIDEuMTZsMi4zMjIgMi4zMjMtMi4wMzIgMi4wMzFjLTIuOTc1IDIuOTc2LTYuMTUgNy4yMDItNC4yODEgMTEuNTkzLjU4IDEuMzQyIDEuNTI0IDIuNDg1IDIuNTQgMy41IDEuMjcgMS4yNyAzLjU2NCAyLjI5NiA1LjI0MiAyLjk0LjMwOS4xMDkuNjk5LjI5OSAxLjAyNS4zNTMuMTU0LjAyOC4yODEuMDI4LjQwOC0uMS4xODItLjE4LjE0Ni0uNDM1LS4wMjctLjYwNy0uMTQ1LS4xNDUtLjM0NS0uMjcyLS40OTktLjQwOC0uMzk5LS4zNDUtLjc4OS0uNjk5LTEuMTYtMS4wNy00LjMyNy00LjMyNy0yLjUxMy03LjY0NyAxLjM5Ni0xMS41NTZsMi4wMzItMi4wMzIgMi4zMjIgMi4zMjJhLjgyNy44MjcgMCAwIDAgMS4xNjEgMCAuODE2LjgxNiAwIDAgMCAuMjM2LS41OHYtOS4yODlhLjgxNi44MTYgMCAwIDAtLjIzNi0uNTh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},[Ki]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJyb3RhdGUoMTgwIDIyLjUgMjIuNSkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgMGw0NSA0NUgweiIvPjxyZWN0IGZpbGw9IiMwMDAiIHg9IjEwIiB5PSIxNCIgd2lkdGg9IjIxIiBoZWlnaHQ9IjIyIiByeD0iMiIvPjxwYXRoIGQ9Ik0yNy40NzkgMTcuMjI1YS44MTYuODE2IDAgMCAwLS41OC0uMjM2SDE3LjYxYS44MTYuODE2IDAgMCAwLS41OC4yMzYuODI3LjgyNyAwIDAgMCAwIDEuMTZsMi4zMjIgMi4zMjMtMi4wMzIgMi4wMzFjLTIuOTc1IDIuOTc2LTYuMTUgNy4yMDItNC4yODEgMTEuNTkzLjU4IDEuMzQyIDEuNTI0IDIuNDg1IDIuNTQgMy41IDEuMjcgMS4yNyAzLjU2NCAyLjI5NiA1LjI0MiAyLjk0LjMwOS4xMDkuNjk5LjI5OSAxLjAyNS4zNTMuMTU0LjAyOC4yODEuMDI4LjQwOC0uMS4xODItLjE4LjE0Ni0uNDM1LS4wMjctLjYwNy0uMTQ1LS4xNDUtLjM0NS0uMjcyLS40OTktLjQwOC0uMzk5LS4zNDUtLjc4OS0uNjk5LTEuMTYtMS4wNy00LjMyNy00LjMyNy0yLjUxMy03LjY0NyAxLjM5Ni0xMS41NTZsMi4wMzItMi4wMzIgMi4zMjIgMi4zMjJhLjgyNy44MjcgMCAwIDAgMS4xNjEgMCAuODE2LjgxNiAwIDAgMCAuMjM2LS41OHYtOS4yODlhLjgxNi44MTYgMCAwIDAtLjIzNi0uNTh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},[$i]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgNDUgMCkiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTAgMGw0NSA0NUgweiIvPjxyZWN0IGZpbGw9IiMwMDAiIHg9IjEwIiB5PSIxNCIgd2lkdGg9IjIxIiBoZWlnaHQ9IjIyIiByeD0iMiIvPjxwYXRoIGQ9Ik0yNy40NzkgMTcuMjI1YS44MTYuODE2IDAgMCAwLS41OC0uMjM2SDE3LjYxYS44MTYuODE2IDAgMCAwLS41OC4yMzYuODI3LjgyNyAwIDAgMCAwIDEuMTZsMi4zMjIgMi4zMjMtMi4wMzIgMi4wMzFjLTIuOTc1IDIuOTc2LTYuMTUgNy4yMDItNC4yODEgMTEuNTkzLjU4IDEuMzQyIDEuNTI0IDIuNDg1IDIuNTQgMy41IDEuMjcgMS4yNyAzLjU2NCAyLjI5NiA1LjI0MiAyLjk0LjMwOS4xMDkuNjk5LjI5OSAxLjAyNS4zNTMuMTU0LjAyOC4yODEuMDI4LjQwOC0uMS4xODItLjE4LjE0Ni0uNDM1LS4wMjctLjYwNy0uMTQ1LS4xNDUtLjM0NS0uMjcyLS40OTktLjQwOC0uMzk5LS4zNDUtLjc4OS0uNjk5LTEuMTYtMS4wNy00LjMyNy00LjMyNy0yLjUxMy03LjY0NyAxLjM5Ni0xMS41NTZsMi4wMzItMi4wMzIgMi4zMjIgMi4zMjJhLjgyNy44MjcgMCAwIDAgMS4xNjEgMCAuODE2LjgxNiAwIDAgMCAuMjM2LS41OHYtOS4yODlhLjgxNi44MTYgMCAwIDAtLjIzNi0uNTh6IiBmaWxsPSIjRkZGIi8+PC9nPjwvc3ZnPg=="},[tr]:{PEELBACK_URL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDUiIGhlaWdodD0iNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMCAwbDQ1IDQ1SDB6Ii8+PHJlY3QgZmlsbD0iIzAwMCIgeD0iMTAiIHk9IjE0IiB3aWR0aD0iMjEiIGhlaWdodD0iMjIiIHJ4PSIyIi8+PHBhdGggZD0iTTI3LjQ3OSAxNy4yMjVhLjgxNi44MTYgMCAwIDAtLjU4LS4yMzZIMTcuNjFhLjgxNi44MTYgMCAwIDAtLjU4LjIzNi44MjcuODI3IDAgMCAwIDAgMS4xNmwyLjMyMiAyLjMyMy0yLjAzMiAyLjAzMWMtMi45NzUgMi45NzYtNi4xNSA3LjIwMi00LjI4MSAxMS41OTMuNTggMS4zNDIgMS41MjQgMi40ODUgMi41NCAzLjUgMS4yNyAxLjI3IDMuNTY0IDIuMjk2IDUuMjQyIDIuOTQuMzA5LjEwOS42OTkuMjk5IDEuMDI1LjM1My4xNTQuMDI4LjI4MS4wMjguNDA4LS4xLjE4Mi0uMTguMTQ2LS40MzUtLjAyNy0uNjA3LS4xNDUtLjE0NS0uMzQ1LS4yNzItLjQ5OS0uNDA4LS4zOTktLjM0NS0uNzg5LS42OTktMS4xNi0xLjA3LTQuMzI3LTQuMzI3LTIuNTEzLTcuNjQ3IDEuMzk2LTExLjU1NmwyLjAzMi0yLjAzMiAyLjMyMiAyLjMyMmEuODI3LjgyNyAwIDAgMCAxLjE2MSAwIC44MTYuODE2IDAgMCAwIC4yMzYtLjU4di05LjI4OWEuODE2LjgxNiAwIDAgMC0uMjM2LS41OHoiIGZpbGw9IiNGRkYiLz48L2c+PC9zdmc+"}},{trigger:r}=this.creative.getParams().customization.reveal;return"peelback"===r.type?()=>t.setAttribute("src",i[e].PEELBACK_URL):"info_icon"===r.type?()=>t.setAttribute("src","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzUiIGhlaWdodD0iMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cGF0aCBmaWxsLW9wYWNpdHk9Ii44MTUiIGZpbGw9IiMwMDAiIGQ9Ik0wIDBoMzV2MzVIMHoiLz48cGF0aCBkPSJNMjEuNjY3IDI1LjMxM3YtMi42MDVhLjUwNy41MDcgMCAwIDAtLjE0Ny0uMzc0LjUwNy41MDcgMCAwIDAtLjM3NC0uMTQ2aC0xLjU2M3YtOC4zMzRhLjUwNy41MDcgMCAwIDAtLjE0Ni0uMzc0LjUwNy41MDcgMCAwIDAtLjM3NS0uMTQ3aC01LjIwOGEuNTA3LjUwNyAwIDAgMC0uMzc0LjE0Ny41MDcuNTA3IDAgMCAwLS4xNDcuMzc0djIuNjA0YzAgLjE1Mi4wNS4yNzcuMTQ3LjM3NWEuNTA3LjUwNyAwIDAgMCAuMzc0LjE0NmgxLjU2M3Y1LjIwOWgtMS41NjNhLjUwNy41MDcgMCAwIDAtLjM3NC4xNDYuNTA3LjUwNyAwIDAgMC0uMTQ3LjM3NHYyLjYwNWMwIC4xNTEuMDUuMjc2LjE0Ny4zNzRhLjUwNy41MDcgMCAwIDAgLjM3NC4xNDZoNy4yOTJhLjUwNy41MDcgMCAwIDAgLjM3NC0uMTQ2LjUwNy41MDcgMCAwIDAgLjE0Ny0uMzc1em0tMi4wODQtMTMuNjE3VjguNzJhLjYyNi42MjYgMCAwIDAtLjE0Ni0uNDI4LjQ3NS40NzUgMCAwIDAtLjM3NS0uMTY3aC0zLjEyNWEuNDc1LjQ3NSAwIDAgMC0uMzc0LjE2Ny42MjYuNjI2IDAgMCAwLS4xNDYuNDI4djIuOTc2YzAgLjE3NC4wNDguMzE3LjE0Ni40MjhhLjQ3NS40NzUgMCAwIDAgLjM3NC4xNjhoMy4xMjZhLjQ3NS40NzUgMCAwIDAgLjM3NC0uMTY4LjYyNi42MjYgMCAwIDAgLjE0Ni0uNDI4ek0zMCAxNy41YzAgMi4yNjgtLjU1OSA0LjM2LTEuNjc2IDYuMjc0YTEyLjQ0NCAxMi40NDQgMCAwIDEtNC41NSA0LjU1QzIxLjg2IDI5LjQ0IDE5Ljc2OCAzMCAxNy41IDMwcy00LjM2LS41NTktNi4yNzQtMS42NzZhMTIuNDQ0IDEyLjQ0NCAwIDAgMS00LjU1LTQuNTVDNS41NiAyMS44NiA1IDE5Ljc2OCA1IDE3LjVzLjU1OS00LjM2IDEuNjc2LTYuMjc0YTEyLjQ0NCAxMi40NDQgMCAwIDEgNC41NS00LjU1QzEzLjE0IDUuNTYgMTUuMjMyIDUgMTcuNSA1czQuMzYuNTU5IDYuMjc0IDEuNjc2YTEyLjQ0NCAxMi40NDQgMCAwIDEgNC41NSA0LjU1QzI5LjQ0IDEzLjE0IDMwIDE1LjIzMiAzMCAxNy41eiIgZmlsbD0iI0ZGRiIvPjwvZz48L3N2Zz4="):null}getAdChoicesCallback(t,e){const i={[Xi]:"border-bottom-right-radius",[Ki]:"border-bottom-left-radius",[$i]:"border-top-left-radius",[tr]:"border-top-right-radius"};return()=>bt.Z.setStyle(t,i[e],"8px")}getLogoOffsets(){let t,e;const i=this.getImgServerArgs().queryKey,r=parseInt(i.logo_y_pct,10),n=parseInt(i.logo_x_pct,10);isNaN(n)&&isNaN(r)?(t=parseInt(i.lox,10),e=parseInt(i.loy,10)):({xOffsetPx:t,yOffsetPx:e}=this.getLogoOffsetsFromPercentage(n,r));const s=isNaN(t)&&isNaN(e);this.creative.isCinemagraph()&&s&&(t=10,e=10);const{finalOffsetX:a,finalOffsetY:o}=this.getFinalLogoOffsets();return{xOffsetPx:(t||0)+a+"px",yOffsetPx:(e||0)+o+"px"}}pct2Px(t,e){return Math.floor(.01*t*e)}getLogoOffsetsFromPercentage(t,e){let i,r;this.state.visibleImageWidth||this.state.visibleImageHeight?(i=this.state.visibleImageWidth,r=this.state.visibleImageHeight):(i=this.placement.imageWidth,r=this.placement.imageHeight);return{xOffsetPx:this.pct2Px(t,i),yOffsetPx:this.pct2Px(e,r)}}getFinalLogoOffsets(){return this.state.imageBoxingOffsetX||this.state.imageBoxingOffsetY?{finalOffsetX:this.state.imageBoxingOffsetX,finalOffsetY:this.state.imageBoxingOffsetY}:this.state.logoOffsetX||this.state.logoOffsetY?{finalOffsetX:this.state.logoOffsetX,finalOffsetY:this.state.logoOffsetY}:{finalOffsetX:0,finalOffsetY:0}}getMuteOffsets(){return{xOffsetPx:"5px",yOffsetPx:"5px"}}getDefaultOffsets(){return{xOffsetPx:"0px",yOffsetPx:"0px"}}}(0,p.Z)(lr,"CREATIVE_CONTENT","creativeContent"),(0,p.Z)(lr,"MAIN_IMAGE_SLOT","mainImageSlot");var cr={run:async(...t)=>{try{await async function(t){window.performance&&performance.now||(window.performance=window.performance||{},window.performance.now=Date.now);const r=performance.now(),{cacheHit:s,revision:a="un",scriptWindow:l}=t;let{currentScript:c}=t;const p=a.slice(0,7);let f,v,y,_,I,A,C,S,w,M,E,T,b,L,P,D,x,R,N,k,O,Z,j,V,U,F,B,W,H,z,G,Y,Q,q,J,X,K=!1;const $=()=>{f=new St,v=new Rt.ZP({eventController:f}),y=new It({scriptWindow:l}),_=new Ui({topWindow:y.topWindow}),I=_.debugFlag,A=new At(t.environment),C=Lt(t.placement,{urlParams:_}),S=new Gt(t.settings),L=new ce(t.environment.formats,f),w=new wt({docInfo:y,rev:p,placement:C,debugFlag:I,ebPath:A.ebPath,auctionId:J},{eventController:f}),M=new _t.Z({environment:A,bundleStartTime:r},{eventController:f,urlParams:_}),E=new de({settings:S,ttjStartTime:t.ttjStartTime,revision:p,isTestEnv:!!_.tlBidUrl},{eventController:f,firePix:w}),D=new Ct.Z({firePix:w,urlParams:_,lifecycleManager:v}),x=D.decorate.bind(D),P=new Pt({placement:C,environment:A,docInfo:y,settings:S,currentScript:c},{errorHandler:D}),T=new he(E),b=new Wi(f)},tt=()=>{if(v.setPhaseAfterInit(),k=t.auctionResponse||P.getHeaderBiddingAuctionResponse(),k&&(E.setIsHeaderBidding(!0),f.publish(i.i2,k),bt()),!k&&P.getAuctionResponsePseudoId()){const t=P.getSupplySourceId();D.fireError("Header bidding response not found for supply source: "+t,Ct.Z.ERROR)}s||E.log(de.BUNDLE_LOAD_TIME,r),R=new Be({docInfo:y,placement:C}),N=new oe(x,y.topWindow),Dt.needsBusting(C,y.window)&&Dt.bust(y.document,P.getScriptSrc())},et=()=>{const t=P.getDtjTacticId(),i=Le.getCmpApiWindow(y.topWindow,D);i&&(O=new Le({win:i,isProxyNeeded:i!==y.topWindow,errorHandler:D})),Z=new zt({hookFinder:P,docInfo:y,defaultCode:C.defaultCode,pageInfo:R,isFallback:K},{firePix:w,asyncUtil:N,errorHandler:D}),t||(C.demandEnabled||I||k?(0,e.Z0)()||(j=new ae({placement:C,environment:A,topWindow:y.topWindow,debugFlag:_.debugFlag,gdpr:O}),Z.setUserSync(j)):Z.serve("demand_disabled"))},it=()=>{const{navigator:t}=y;if(!t)throw new g.Z("setBrowserInfo failed: no navigator");const e=new h(t.userAgent);V=e.getBrowserInfo()},rt=()=>{U=ni({win:y.topWindow,pageInfo:R,placement:C,environment:A,browserInfo:V,errorHandler:D,firePix:w,analytics:G,asyncUtil:N,settings:S,creativePayload:k},f),F=new le({placement:C,docInfo:y},{positionService:U,eventController:f,errorHandler:D,asyncUtil:N})},nt=async()=>{T.startLap();const t=await m.create(y);B=new Mt({auctionFrameWindow:t.contentWindow,errorDecorator:x}),B.setListeners();if(new Tt({placement:C,auctionIframe:t},{eventController:f,serveDefault:Z,firePix:w,errorDecorator:x,errorHandler:D}).registerAuctionListeners(),!k||K){const e={auctionIframe:t,browserInfo:V,docInfo:y,environment:A,gdpr:O,placement:C,rev:p,isFallback:K};K&&(e.fallbackBannerSize=Ot());const i=new d(e,{errorDecorator:x,errorHandler:D,eventController:f,firePix:w,pageInfo:R,serveDefault:Z,hookFinder:P,urlParams:_,asyncUtil:N});T.log(de.AUCTION_START),k=await i.getCreative(),T.log(de.AUCTION_RESPONSE),bt()}},st=async()=>{const{settings:{dco_tag_url:t,dco_protocol:e}}=k;if(t&&e===u.ZP.DCO_PROTOCOLS.DV_BLOCKING){const t=new we(k,{errorHandler:D});await t.callDV()}else if(t){W=new yt({assets:k.assets,settings:k.settings,frame:m.get(),env:A},{errorHandler:D});try{const t=await W.getOptimizedAsset();k.assets=t.assets,k.settings.isFallbackAssets=W.isFallback,t.assets.length>0&&t.assets[0].privacy_url&&(k.settings.adchoices_url=t.assets[0].privacy_url)}catch{D.fireError("Failed to serve DCO",D.ERROR),Z.serve("dco_error")}}},at=()=>{Z.adRendered=!0,H=new Yt.Z(D);const t=H.getAltTemplateId(k.settings.template_id,P.getTagTemplateId(),_.tlTemplateId),e=H.getAltTemplate(C.templates,t);if(!L.isHdx()&&!Yt.Z.hasMacro(e.templateCode))throw new g.Z("Format not HDX and template code is not valid.");e.templateCode&&Object.assign(C,e),C.provenTemplate&&(C.customOptions.unwrappedUnit=!1,C.customOptions.friendlyIframeRender=!0),H.parse(C.templateCode)},ot=()=>{const t=P.currentScript&&(0,e.EC)(P.currentScript.src).queryKey.ct;if(!H)throw new g.Z("templateCode is not valid");z=Ie.create({environment:A,placement:C,pageInfo:R,isSmallScreen:V.isSmallScreen,clickTrackerDTJ:t,debug:I,creativePayload:k,templateDetail:H.templateDetail,tlImageId:_.tlImageId,errorHandler:D,formatManager:L}),X=new lr({creative:z,placement:C,browserInfo:V,errorHandler:D,hasCtaMacro:H.hasCtaMacro}),z.isHdx()&&(C.customOptions.friendlyIframeRender=!0,C.replaceParent=0),z.isNativeLite()&&(C.customOptions.unwrappedUnit=!1,C.customOptions.friendlyIframeRender=!0,C.replaceParent=0),!R.isViewabilityAware()&&z.needsViewabilityAwareness()&&D.fireError("Position aware format served to unfriendly frame",D.WARNING)},lt=()=>{Q=new jt({creativePayload:k,firePix:w}),Y=new se({docInfo:y,pageInfo:R,placement:C},{creative:z,auctionIframeWriterOverride:B,firePix:w,errorHandler:D,eventController:f}),G=new o({environment:A,pageInfo:R,placement:C,dco:W},{creative:z,lifecycleManager:v,thirdPartyAnalytics:Y,payableEventEmitter:Q,firePix:w,errorHandler:D,asyncUtil:N,eventController:f})},ct=async()=>{T.log(de.RENDER);try{G.render()}catch(t){D.fireError("analytics error: "+t.toString(),D.ERROR)}P.styleHook();const t={placement:C,environment:A,settings:S,creative:z,firePix:w,errorHandler:D,eventController:f,asyncUtil:N},r=await Zi.load(t),n=r[0].default,s=r.slice(1).map((t=>t.default)).map((t=>t.create())),a={creative:z,placement:C,environment:A,browserInfo:V,pageInfo:R,docInfo:y,analytics:G,asyncUtil:N,templateCode:H,positionService:U,firePix:w,errorHandler:D,eventController:f,viewabilityController:F,featureConfigs:s,fallbackManager:b,cornerElementsConfig:X},l=n.create(a),c=await l.render();q=c.domRefs,H.chosenTemplate.appendChild(q.adWrapper);const{childNodes:d}=H.templateWrapEl;for(let t=0;t<d.length;t++){const e=d[t];1===e.nodeType&&Bt.insertAd(e,P.getHook(),C.customOptions.friendlyIframeRender)}(0,e.qe)(y.topWindow,"resize",document),T.log(de.AD_ON_PAGE),G.adOnPage(),f.publish(i.RU,q),o.sendAdReadySignal()},dt=()=>{const t=q.mainImageCsrEl||q.mainImage,{adWrapperWithDims:i}=q;if(G.appendThirdPartyJs(t),G.disclosureRenderResult(),j&&j.doSyncIfAllDone(),R.isViewabilityAware()){if(window.IntersectionObserver&&window.IntersectionObserverEntry&&"isIntersecting"in window.IntersectionObserverEntry.prototype&&!R.isMraid()){let t=null;const e={0:(t,e)=>{t[0].isIntersecting&&(G.onePxViewable(),e.disconnect())},[le.getRequiredPct(i)]:(e,i)=>{e[0].isIntersecting?t=setTimeout((()=>{G.viewable(),i.disconnect()}),1e3):t&&clearTimeout(t)}};Object.entries(e).forEach((([t,e])=>{const r={threshold:parseFloat(t)};new IntersectionObserver(e,r).observe(i)}))}F.listenForPercentageAdViewability(i,G.viewable.bind(G)),F.listenForOnePxAdViewability(G.onePxViewable.bind(G))}(0,e.UP)(S.pmdLogRate,(()=>{const e=1e3;N.timeoutWrap((()=>{Ht({adWrapperWithDims:i,mainContent:t,positionService:U,pageInfo:R,bundleStartTime:r,firePix:w,errorHandler:D})}),e)}))},ht=()=>{(new xt).layout(P.getHook())},ut=async()=>{const t=async()=>{const t=new(0,(await n.e(888).then(n.bind(n,794))).default)({placement:C,docInfo:y,domRefs:q,errorHandler:D,pageInfo:R,firePix:w});F.listenForPercentageAdViewability(q.adWrapperWithDims,(()=>{t.run()}))};(0,e.UP)(S.placementCategorizationRate,(()=>{t()}))},pt=async()=>{const t=async()=>{const t=new(0,(await n.e(36).then(n.bind(n,325))).default)({docInfo:y,domRefs:q,errorHandler:D,pageInfo:R,analytics:G});F.listenForPercentageAdViewability(q.adWrapperWithDims,(()=>{t.run()}))},i={342:1,746:1},r=S.prvSampleRate,s=(z.getParams().prv_sample_rate||0)/100,a=i[C.publisherId]||0,o=Math.max(r,s,a);(0,e.UP)(o,(()=>{v.setPhaseAfterPostRender(),t()}))},mt=()=>{f.destroy(),c=P.currentScript,J=w.auctionId,$(),tt()},gt=async t=>{K=!0,Z.setIsFallback(K),mt(),v.setPhaseAfterInit(),await nt(),await st(),Z.hasDefaulted||(at(),ot(),lt(),rt(),t.conditionsMet()?(q.adWrapper.parentNode.removeChild(q.adWrapper),await ct(),dt(),ht(),await ut(),await pt(),t.verifySuccess()):D.fireError("Fallback render avoided",D.WARNING),t.destroy())},ft=()=>{const t=new Bi(f);t.setCallback((()=>gt(t))),b.addManager(t)},vt=()=>{!C.customOptions.videoErrorFallbackOptOut&&z.isAutoplay()&&ft()},Et=async()=>{$(),tt(),et(),it(),await nt(),await st(),Z.hasDefaulted||(at(),ot(),lt(),rt(),await ct(),dt(),ht(),await ut(),await pt(),vt())};try{await Et()}catch(t){if(D)try{D.fireError(t,D.ERROR)}catch(t){Nt(t)}else Nt(t)}function bt(){const t=new Ji(k,D),e=t.getAssets();e&&(k.assets=e);const i=t.getSettings();i&&(k.settings=i)}function Lt(t,e){const i={};return e.urlParams.adPreview&&(i.friendlyIframeRender=!0),new Ut({...t,customOptions:{...t.customOptions,...i,is3pAdPreview:e.urlParams.thirdPartyAdPreview}})}function Nt(t){const i={e:"Critical: "+(t.message||t),lvl:1};i.inv_code=kt((()=>C.invCode),null),i.aid=kt((()=>w.auctionId),null),i.rev=kt((()=>p),null),i.block=kt((()=>v.getPhase()),Rt.k0),console.error("tl: "+(t.stack||t),i);const r=kt((()=>y.topDocument),document),n=kt((()=>A.ebPath),"eb2.3lift.com");r.createElement("IMG").src=(0,e.uC)(n,"sce",i)}function kt(t,e){try{return t()}catch{return e}}function Ot(){let t={width:0,height:0};return z.params.banner_width&&z.params.banner_height&&(t={width:z.params.banner_width,height:z.params.banner_height}),t}}(...t)}catch(t){const e=encodeURIComponent("Fatal: "+(t.message||t));document.createElement("IMG").src="//eb2.3lift.com/sce?lvl=1&block="+Rt.k0+"&e="+e}}};const dr="5b127f1a7825086209cb9d14d26e2f86435fb3cd",hr=window._tlVideoLoader;n.p=hr.getPublicPath(dr),hr.onload(cr,dr)}()}();